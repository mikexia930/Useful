import{d as $,q as D,I as L,o as w,c as k,v as c,X as b,a7 as p,g as h,a as f,w as O,ad as E,s as j,x as H,W as B,a8 as W,ao as V,ap as P,t as q,D as A}from"./index.faab34ef.js";import{_ as J,U as X}from"./UIWithTitle.0e5eec4c.js";import{s as G,D as K}from"./DUpload.0c34622a.js";import{d as I}from"./copyLib.a3b1e3c2.js";import{E as T,b as N}from"./Interface.626ae8f0.js";import{_ as F,s as S,E as U}from"./DButton.vue_vue_type_script_setup_true_lang.cdf87bb8.js";import{e as Q,c as z,r as Y,p as Z}from"./fileLib.41837830.js";import{t as ee,_ as oe}from"./DResult.vue_vue_type_script_setup_true_lang.79754a0a.js";import{_ as M}from"./_plugin-vue_export-helper.cdc0426e.js";import"./DTooltip.28ab5894.js";import"./_baseIsEqual.35b9df4a.js";import"./findIndex.8f62b537.js";import"./hasIn.6feb23c8.js";import"./memoize.4bde03d7.js";import"./index.720773ae.js";import"./styleChecker.fbdd00d2.js";import"./index.5baa3baf.js";import"./Col.9baba479.js";import"./responsiveObserve.e9ddf116.js";import"./last.2965d17e.js";import"./_flatRest.64e8233e.js";import"./debounce.19eb1104.js";import"./now.b82f2ad8.js";var R={exports:{}};(function(v){(function(){function _(e){return new n(e)}function n(e){var l,r=e&&e.color&&e.color.replace(/\s/g,"").toLowerCase()||"#fff",a=(e=e&&e.format&&e.format.replace(/\s/g,"").toLowerCase()||"rgb").indexOf("rgba")==-1?0:1,s=e.indexOf("hsla")==-1?0:1;if(-1<r.indexOf("#"))e=="hex"?(l=this.hexToRgb(r),l=this.rgbToHex(l)):-1<e.indexOf("rgb")?l=this.hexToRgb(r,a):-1<e.indexOf("hsl")&&(l=this.hexToRgb(r),l=this.rgbToHsl(l,s));else if(-1<r.indexOf("rgb"))l=this.getRgb(r,a),e=="hex"?l=this.rgbToHex(l):-1<e.indexOf("hsl")&&(l=this.rgbToHsl(l,s));else if(-1<r.indexOf("hsl"))l=this.getHsl(r,s),l=this.hslToRgb(l,a),e=="hex"?l=this.rgbToHex(l):-1<e.indexOf("hsl")&&(l=this.rgbToHsl(l,s));else{for(var o,t=this.defineColor,i=0,u=t.length;i<u;i++)if(r==t[i].name){o=t[i].hex;break}o&&0<o.length?e=="hex"?(l=this.hexToRgb(o),l=this.rgbToHex(l)):-1<e.indexOf("rgb")?l=this.hexToRgb(o,a):-1<e.indexOf("hsl")&&(l=this.hexToRgb(o),l=this.rgbToHsl(l,s)):alert("\u53C2\u6570color\u6682\u672A\u5B9A\u4E49")}return l}var d;n.prototype={constructor:this,defineColor:[{name:"red",hex:"#f00"},{name:"orange",hex:"#ffa500"},{name:"yellow",hex:"#ff0"},{name:"green",hex:"#0f0"},{name:"cyan",hex:"#0ff"},{name:"blue",hex:"#00f"},{name:"violet",hex:"#ee82ee"},{name:"black",hex:"#000"},{name:"white",hex:"#fff"}],getRgb:function(e,l){var o=(e=e.toLowerCase()).indexOf("rgba")==-1?0:1,r=(e=(e=o?e.replace("rgba",""):e.replace("rgb","")).replace(/\s/g,"").split(","),Number(e[0].slice(1))),a=Number(e[1]),s=Number(o?e[2]:e[2].slice(0,-1)),o=!o||1<Number(e[3].slice(0,-1))?1:Number(e[3].slice(0,-1));return{r,g:a,b:s,o,complete:l?"rgba("+[r,a,s,o].join(",")+")":"rgb("+[r,a,s].join(",")+")"}},getHsl:function(e,l){var o=(e=e.toLowerCase()).indexOf("hsla")==-1?0:1,r=(e=(e=o?e.replace("hsla",""):e.replace("hsl","")).replace(/\s/g,"").split(","),Number(e[0].slice(1))),a=parseInt(e[1]),s=parseInt(o?e[2]:e[2].slice(0,-1)),o=!o||1<Number(e[3].slice(0,-1))?1:Number(e[3].slice(0,-1));return{h:r,s:a/100,l:s/100,o,complete:l?"hsla("+[r,a,s,o].join(",")+")":"hsl("+[r,a,s].join(",")+")"}},rgbToHex:function(e){var l=Number(e.r).toString(16),r=Number(e.g).toString(16),a=Number(e.b).toString(16),s=Math.round(255*e.o).toString(16),o=0;return{r:l=l.length<2?0+l:l,g:r=r.length<2?0+r:r,b:a=a.length<2?0+a:a,o:s=s.length<2?0+s:s,complete:(o=l[0]==l[1]&&r[0]==r[1]&&a[0]==a[1]&&s[0]==s[1]?1:o)?"#"+l[0]+r[0]+a[0]+(e.o==1?"":s):"#"+l+r+a+(e.o==1?"":s)}},rgbToHsl:function(t,l){var r,a=Number(t.r)/255,s=Number(t.g)/255,o=Number(t.b)/255,t=Number(t.o),i=Math.max(a,s,o),u=Math.min(a,s,o),m=(i+u)/2;if(i==u)r=x=0;else{var g=i-u,x=m<.5?g/(i+u):g/(2-i-u);switch(i){case a:r=(s-o)/g;break;case s:r=(o-a)/g+2;break;case o:r=(a-s)/g+4}r=(r*=60)<0?r+360:r}return{h:r=Math.round(r),s:x=Math.round(100*x)+"%",l:m=Math.round(100*m)+"%",o:t,complete:l?"hsla("+[r,x,m,t].join(",")+")":"hsl("+[r,x,m].join(",")+")"}},hexToRgb:function(e,l){var r,a,s,o,t=(e=e.replace("#","")).split("");return e.length==3?(r=parseInt(t[0]+t[0],16),a=parseInt(t[1]+t[1],16),s=parseInt(t[2]+t[2],16),o=1):e.length==4?(r=parseInt(t[0]+t[0],16),a=parseInt(t[1]+t[1],16),s=parseInt(t[2]+t[2],16),o=Math.round(parseInt(t[3]+t[3],16)/255*100)/100):e.length==6?(r=parseInt(t[0]+t[1],16),a=parseInt(t[2]+t[3],16),s=parseInt(t[4]+t[5],16),o=1):e.length==8&&(r=parseInt(t[0]+t[1],16),a=parseInt(t[2]+t[3],16),s=parseInt(t[4]+t[5],16),o=Math.round(parseInt(t[6]+t[7],16)/255*100)/100),{r,g:a,b:s,o,complete:l?"rgba("+[r,a,s,o].join(",")+")":"rgb("+[r,a,s].join(",")+")"}},hslToRgb:function(m,l){var r,a,s,o,t=Number(m.h),i=Number(m.s),u=Number(m.l),m=Number(m.o);return i==0?a=s=o=u:(a=(r=function(g,x,y){return y<0&&(y+=1),1<y&&--y,y<1/6?g+6*(x-g)*y:y<.5?x:y<2/3?g+(x-g)*(2/3-y)*6:g})(i=2*u-(u=u<.5?u*(1+i):u+i-u*i),u,(t/=360)+1/3),s=r(i,u,t),o=r(i,u,t-1/3)),{r:a=Math.round(255*a),g:s=Math.round(255*s),b:o=Math.round(255*o),o:m,complete:l?"rgba("+[a,s,o,m].join(",")+")":"rgb("+[a,s,o].join(",")+")"}}},d=function(){return this||(0,eval)("this")}(),v.exports?v.exports=_:"colorFormat"in d||(d.colorFormat=_)})()})(R);const C=R.exports,te={class:"editor-select"},se={class:"select_title"},re={class:"select_title tw-my-4"},le={class:"select_selected"},ae={class:"select_title"},ne={class:"select_show_font"},ie={class:"select_show_black"},ce={class:"select_show_white"},ue={class:"select_show_format"},pe={name:"ColorSelect"},de=$({...pe,props:{imageUrl:{}},setup(v){const _=v,n=D({color:"#2e81ff",input:"",format:{hex:"",rgb:"",rgba:"",hsl:"",hsla:""},suck:{canvas:null,area:[]}});function d(s,o,t=void 0){const i=document.getElementsByClassName("color-upload-show_canvas")[0],u=document.getElementsByClassName("color-upload-show_image")[0];u&&i&&(u.style.display=s?"block":"none",i.style.display=o?"block":"none",t?i.appendChild(t):i.removeChild(i.childNodes[0]))}function e(s){var o;if(s){const{imageUrl:t}=_;Q(t).then(i=>{const{canvas:u,height:m,width:g}=i;n.suck.canvas=u,n.suck.area=[0,m,g,m],t?d(!1,!0,u):(d(!0,!1,u),S(U.Warning,h("color.upload.notice.empty")))}).catch(i=>{console.log("covertImageToCanvas",i),S(U.Warning,h("color.upload.notice.empty")),d(!0,!1)})}else d(!0,!1),n.suck.canvas&&((o=n.suck.canvas)==null||o.remove)}function l(s){const{r:o,g:t,b:i,a:u}=s.rgba;n.color=`rgba(${o}, ${t}, ${i}, ${u})`}function r(){const s=ee(n.input);if(s){const o=C({color:s,format:"rgb"}).complete;o&&(n.color=String(o))}else S(U.Warning,h("color.select.input.notice.empty"))}function a(s){s&&(n.format.rgb=String(C({color:s,format:"rgb"}).complete),n.format.rgba=String(C({color:s,format:"rgba"}).complete),n.format.hsl=String(C({color:s,format:"hsl"}).complete),n.format.hsla=String(C({color:s,format:"hsla"}).complete),n.format.hex=String(C({color:s,format:"hex"}).complete))}return L(()=>n.color,s=>{a(s)},{immediate:!0}),(s,o)=>(w(),k("div",te,[c("div",null,[c("div",se,b(p(h)("color.select.select")),1),f(p(G),{theme:"light",color:n.color,"sucker-hide":!1,"sucker-canvas":n.suck.canvas,"sucker-area":n.suck.area,onChangeColor:l,onOpenSucker:e},null,8,["color","sucker-canvas","sucker-area"]),c("div",re,b(p(h)("color.select.input.label")),1),c("div",null,[f(J,{value:n.input,"onUpdate:value":o[0]||(o[0]=t=>n.input=t),placeholder:p(h)("color.select.input.placeholder"),"is-search":!0},{suffix:O(()=>[f(F,{type:"text",name:p(h)("tags.confirm"),onClick:r},null,8,["name"])]),_:1},8,["value","placeholder"])])]),c("div",le,[c("div",ae,b(p(h)("color.select.selected")),1),c("div",{class:"select_show",style:E({backgroundColor:n.color})},[c("div",ne,[c("div",ie,b(p(h)("color.select.black")),1),c("div",{class:"select_show_black",style:E({textShadow:`1px 1px 0 ${n.color}`})},b(p(h)("color.select.shadow")),5),c("div",ce,b(p(h)("color.select.white")),1),c("div",{class:"select_show_white",style:E({textShadow:`1px 1px 0 ${n.color}`})},b(p(h)("color.select.shadow")),5)])],4),c("div",ue,[c("div",null,[c("span",null,b(n.format.hex),1),c("span",{onClick:o[1]||(o[1]=()=>p(I)(n.format.hex))},[f(N,{size:"sm",type:p(T).CopyOutlined},null,8,["type"])])]),c("div",null,[c("span",null,b(n.format.rgb),1),c("span",{onClick:o[2]||(o[2]=()=>p(I)(n.format.rgb))},[f(N,{size:"sm",type:p(T).CopyOutlined},null,8,["type"])])]),c("div",null,[c("span",null,b(n.format.rgba),1),c("span",{onClick:o[3]||(o[3]=()=>p(I)(n.format.rgba))},[f(N,{size:"sm",type:p(T).CopyOutlined},null,8,["type"])])]),c("div",null,[c("span",null,b(n.format.hsl),1),c("span",{onClick:o[4]||(o[4]=()=>p(I)(n.format.hsl))},[f(N,{size:"sm",type:p(T).CopyOutlined},null,8,["type"])])]),c("div",null,[c("span",null,b(n.format.hsla),1),c("span",{onClick:o[5]||(o[5]=()=>p(I)(n.format.hsla))},[f(N,{size:"sm",type:p(T).CopyOutlined},null,8,["type"])])])])])]))}});const me=M(de,[["__scopeId","data-v-ee589eb2"]]),_e={name:"DUploadList"},he=$({..._e,props:{maxSize:{default:20},allowTypes:{default:()=>z}},emits:["error","file"],setup(v,{emit:_}){const n=v,d=j([]),e=j("");function l(){if(d.value.length>0){const{originFileObj:t}=d.value[0];t&&s(t)?Y(t).then(i=>{const{src:u}=i;e.value=u,a(t)}).catch(()=>{r(),_("error","file error")}):(r(),_("error","file error"))}else e.value="",a("")}function r(){e.value="",d.value=[]}function a(t){_("file",{previewUrl:e.value,file:t})}function s(t){const{maxSize:i,allowTypes:u}=n,m=u.includes(t.type),g=t.size/1024/1024>i;return m&&!g}const o=()=>!1;return(t,i)=>(w(),H(K,W(t.$attrs,{"file-list":d.value,"onUpdate:fileList":i[0]||(i[0]=u=>d.value=u),"show-upload-list":!1,"max-count":1,"before-upload":o,onChange:l}),{default:O(()=>[B(t.$slots,"default",{},()=>[f(F,{name:"Upload"})])]),_:3},16,["file-list"]))}}),fe=v=>(V("data-v-d0436e56"),v=v(),P(),v),ge={class:"color-upload"},ve={class:"color-upload_upload"},be={class:"color-upload-show"},xe={class:"color-upload-show_image"},ye=["src"],we={key:1,class:"tw-flex tw-h-full tw-justify-center tw-items-center"},Ce=fe(()=>c("div",{class:"color-upload-show_canvas tw-hidden"},null,-1)),ke={name:"ColorUpload"},$e=$({...ke,props:{imageUrl:{}},emits:["update:imageUrl"],setup(v,{emit:_}){function n(e){_("update:imageUrl",e.previewUrl)}function d(e){S(U.Error,e)}return(e,l)=>(w(),k("div",ge,[c("div",ve,[f(he,{"max-size":200,onFile:n,onError:d},{default:O(()=>[f(F,{name:p(h)("color.upload.image")},null,8,["name"])]),_:1})]),c("div",be,[c("div",xe,[e.imageUrl?(w(),k("img",{key:0,src:e.imageUrl},null,8,ye)):(w(),k("div",we,[f(oe,{msg:p(h)("color.upload.notice.empty")},null,8,["msg"])]))]),Ce])]))}});const Ie=M($e,[["__scopeId","data-v-d0436e56"]]),Te={class:"color-editor"},Ne={class:"editor_left"},Se={class:"editor_title"},Ue={class:"editor_right"},Oe={class:"editor_title"},Me={class:"editor_right_upload"},Ee={name:"ColorEditor"},je=$({...Ee,setup(v){const _=j("");return q(()=>{A(()=>{var n;(n=document.getElementsByClassName("editor_right"))==null||n[0].addEventListener("paste",d=>{Z(d,z,!0).then(e=>{_.value=String(e)})})})}),(n,d)=>(w(),k("div",Te,[c("div",Ne,[c("div",Se,b(p(h)("color.select.label")),1),c("div",null,[f(me,{"image-url":_.value},null,8,["image-url"])])]),c("div",Ue,[c("div",Oe,b(p(h)("color.upload.label")),1),c("div",Me,[f(Ie,{"image-url":_.value,"onUpdate:imageUrl":d[0]||(d[0]=e=>_.value=e)},null,8,["image-url"])])])]))}});const Fe=M(je,[["__scopeId","data-v-82a0ee27"]]),He={class:"warp_bigger color_area"},ze={name:"ModuleColor"},Re=$({...ze,setup(v){return(_,n)=>(w(),k("div",He,[f(X,{title:p(h)("module.color")},{default:O(()=>[f(Fe)]),_:1},8,["title"])]))}});const De=M(Re,[["__scopeId","data-v-c0050130"]]),co=$({__name:"Color",setup(v){return(_,n)=>(w(),H(De))}});export{co as default};
