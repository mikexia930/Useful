import{d as se,z as E,S as _e,p as T,_ as h,k as I,$ as M,cN as Te,K as F,v as Re,m as J,ci as qe,W as Q,u as He,P as de,o as Ue,H as $e,G as je,ao as ze,ai as Ge,ag as Ke,s as We}from"./index.3deece30.js";import{b as Ce,c as De,w as Ie,U as Le,D as Xe}from"./Interface.8f0a6e0f.js";import{i as Ye,K as oe,u as Je,o as Qe,e as Ze}from"./DInput.vue_vue_type_script_setup_true_lang.8d83bae6.js";function pe(){return typeof BigInt=="function"}function Z(n){var e=n.trim(),t=e.startsWith("-");t&&(e=e.slice(1)),e=e.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),e.startsWith(".")&&(e="0".concat(e));var r=e||"0",i=r.split("."),c=i[0]||"0",f=i[1]||"0";c==="0"&&f==="0"&&(t=!1);var v=t?"-":"";return{negative:t,negativeStr:v,trimStr:r,integerStr:c,decimalStr:f,fullStr:"".concat(v).concat(r)}}function ye(n){var e=String(n);return!Number.isNaN(Number(e))&&e.includes("e")}function ee(n){var e=String(n);if(ye(n)){var t=Number(e.slice(e.indexOf("e-")+2)),r=e.match(/\.(\d+)/);return r!=null&&r[1]&&(t+=r[1].length),t}return e.includes(".")&&Se(e)?e.length-e.indexOf(".")-1:0}function he(n){var e=String(n);if(ye(n)){if(n>Number.MAX_SAFE_INTEGER)return String(pe()?BigInt(n).toString():Number.MAX_SAFE_INTEGER);if(n<Number.MIN_SAFE_INTEGER)return String(pe()?BigInt(n).toString():Number.MIN_SAFE_INTEGER);e=n.toFixed(ee(e))}return Z(e).fullStr}function Se(n){return typeof n=="number"?!Number.isNaN(n):n?/^\s*-?\d+(\.\d+)?\s*$/.test(n)||/^\s*-?\d+\.\s*$/.test(n)||/^\s*-?\.\d+\s*$/.test(n):!1}var et=function(){function n(e){if(De(this,n),this.origin="",!e&&e!==0||!String(e).trim()){this.empty=!0;return}this.origin=String(e),this.number=Number(e)}return Ce(n,[{key:"negate",value:function(){return new n(-this.toNumber())}},{key:"add",value:function(t){if(this.isInvalidate())return new n(t);var r=Number(t);if(Number.isNaN(r))return this;var i=this.number+r;if(i>Number.MAX_SAFE_INTEGER)return new n(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new n(Number.MIN_SAFE_INTEGER);var c=Math.max(ee(this.number),ee(r));return new n(i.toFixed(c))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toNumber()===(t==null?void 0:t.toNumber())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t?this.isInvalidate()?"":he(this.number):this.origin}}]),n}(),tt=function(){function n(e){if(De(this,n),this.origin="",!e&&e!==0||!String(e).trim()){this.empty=!0;return}if(this.origin=String(e),e==="-"){this.nan=!0;return}var t=e;if(ye(t)&&(t=Number(t)),t=typeof t=="string"?t:he(t),Se(t)){var r=Z(t);this.negative=r.negative;var i=r.trimStr.split(".");this.integer=BigInt(i[0]);var c=i[1]||"0";this.decimal=BigInt(c),this.decimalLen=c.length}else this.nan=!0}return Ce(n,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(t){var r="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(t,"0"));return BigInt(r)}},{key:"negate",value:function(){var t=new n(this.toString());return t.negative=!t.negative,t}},{key:"add",value:function(t){if(this.isInvalidate())return new n(t);var r=new n(t);if(r.isInvalidate())return this;var i=Math.max(this.getDecimalStr().length,r.getDecimalStr().length),c=this.alignDecimal(i),f=r.alignDecimal(i),v=(c+f).toString(),d=Z(v),p=d.negativeStr,g=d.trimStr,l="".concat(p).concat(g.padStart(i+1,"0"));return new n("".concat(l.slice(0,-i),".").concat(l.slice(-i)))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toString()===(t==null?void 0:t.toString())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t?this.isInvalidate()?"":Z("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),n}();function k(n){return pe()?new tt(n):new et(n)}function be(n,e,t){if(n==="")return"";var r=Z(n),i=r.negativeStr,c=r.integerStr,f=r.decimalStr,v="".concat(e).concat(f),d="".concat(i).concat(c);if(t>=0){var p=Number(f[t]);if(p>=5){var g=k(n).add("".concat(i,"0.").concat("0".repeat(t)).concat(10-p));return be(g.toString(),e,t)}return t===0?d:"".concat(d).concat(e).concat(f.padEnd(t,"0").slice(0,t))}return v===".0"?d:"".concat(d).concat(v)}var nt=200,at=600;const rt=se({name:"StepHandler",inheritAttrs:!1,props:{prefixCls:String,upDisabled:Boolean,downDisabled:Boolean,onStep:{type:Function}},slots:["upNode","downNode"],setup:function(e,t){var r=t.slots,i=t.emit,c=E(),f=function(p,g){p.preventDefault(),i("step",g);function l(){i("step",g),c.value=setTimeout(l,nt)}c.value=setTimeout(l,at)},v=function(){clearTimeout(c.value)};return _e(function(){v()}),function(){if(Ye())return null;var d=e.prefixCls,p=e.upDisabled,g=e.downDisabled,l="".concat(d,"-handler"),B=T(l,"".concat(l,"-up"),h({},"".concat(l,"-up-disabled"),p)),V=T(l,"".concat(l,"-down"),h({},"".concat(l,"-down-disabled"),g)),_={unselectable:"on",role:"button",onMouseup:v,onMouseleave:v},w=r.upNode,A=r.downNode;return I("div",{class:"".concat(l,"-wrap")},[I("span",M(M({},_),{},{onMousedown:function(C){f(C,!0)},"aria-label":"Increase Value","aria-disabled":p,class:B}),[(w==null?void 0:w())||I("span",{unselectable:"on",class:"".concat(d,"-handler-up-inner")},null)]),I("span",M(M({},_),{},{onMousedown:function(C){f(C,!1)},"aria-label":"Decrease Value","aria-disabled":g,class:V}),[(A==null?void 0:A())||I("span",{unselectable:"on",class:"".concat(d,"-handler-down-inner")},null)])])}}});function it(n,e){var t=E(null);function r(){try{var c=n.value,f=c.selectionStart,v=c.selectionEnd,d=c.value,p=d.substring(0,f),g=d.substring(v);t.value={start:f,end:v,value:d,beforeTxt:p,afterTxt:g}}catch{}}function i(){if(n.value&&t.value&&e.value)try{var c=n.value.value,f=t.value,v=f.beforeTxt,d=f.afterTxt,p=f.start,g=c.length;if(c.endsWith(d))g=c.length-t.value.afterTxt.length;else if(c.startsWith(v))g=v.length;else{var l=v[p-1],B=c.indexOf(l,p-1);B!==-1&&(g=B+1)}n.value.setSelectionRange(g,g)}catch(V){Te(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(V.message))}}return[r,i]}const ut=function(){var n=E(0),e=function(){Ie.cancel(n.value)};return _e(function(){e()}),function(t){e(),n.value=Ie(function(){t()})}};var lt=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},we=function(e,t){return e||t.isEmpty()?t.toString():t.toNumber()},xe=function(e){var t=k(e);return t.isInvalidate()?null:t},Be=function(){return{stringMode:{type:Boolean},defaultValue:{type:[String,Number]},value:{type:[String,Number]},prefixCls:{type:String},min:{type:[String,Number]},max:{type:[String,Number]},step:{type:[String,Number],default:1},tabindex:{type:Number},controls:{type:Boolean,default:!0},readonly:{type:Boolean},disabled:{type:Boolean},autofocus:{type:Boolean},keyboard:{type:Boolean,default:!0},parser:{type:Function},formatter:{type:Function},precision:{type:Number},decimalSeparator:{type:String},onInput:{type:Function},onChange:{type:Function},onPressEnter:{type:Function},onStep:{type:Function},onBlur:{type:Function},onFocus:{type:Function}}};const ot=se({name:"InnerInputNumber",inheritAttrs:!1,props:F(F({},Be()),{lazy:Boolean}),slots:["upHandler","downHandler"],setup:function(e,t){var r=t.attrs,i=t.slots,c=t.emit,f=t.expose,v=E(),d=E(!1),p=E(!1),g=E(!1),l=E(k(e.value));function B(o){e.value===void 0&&(l.value=o)}var V=function(a,s){if(!s)return e.precision>=0?e.precision:Math.max(ee(a),ee(e.step))},_=function(a){var s=String(a);if(e.parser)return e.parser(s);var u=s;return e.decimalSeparator&&(u=u.replace(e.decimalSeparator,".")),u.replace(/[^\w.-]+/g,"")},w=E(""),A=function(a,s){if(e.formatter)return e.formatter(a,{userTyping:s,input:String(w.value)});var u=typeof a=="number"?he(a):a;if(!s){var m=V(u,s);if(Se(u)&&(e.decimalSeparator||m>=0)){var N=e.decimalSeparator||".";u=be(u,N,m)}}return u},z=function(){var o=e.value;return l.value.isInvalidate()&&["string","number"].includes(Re(o))?Number.isNaN(o)?"":o:A(l.value.toString(),!1)}();w.value=z;function C(o,a){w.value=A(o.isInvalidate()?o.toString(!1):o.toString(!a),a)}var P=J(function(){return xe(e.max)}),S=J(function(){return xe(e.min)}),y=J(function(){return!P.value||!l.value||l.value.isInvalidate()?!1:P.value.lessEquals(l.value)}),R=J(function(){return!S.value||!l.value||l.value.isInvalidate()?!1:l.value.lessEquals(S.value)}),G=it(v,d),x=qe(G,2),q=x[0],te=x[1],H=function(a){return P.value&&!a.lessEquals(P.value)?P.value:S.value&&!S.value.lessEquals(a)?S.value:null},U=function(a){return!H(a)},$=function(a,s){var u,m=a,N=U(m)||m.isEmpty();if(!m.isEmpty()&&!s&&(m=H(m)||m,N=!0),!e.readonly&&!e.disabled&&N){var D=m.toString(),O=V(D,s);return O>=0&&(m=k(be(D,".",O))),m.equals(l.value)||(B(m),(u=e.onChange)===null||u===void 0||u.call(e,m.isEmpty()?null:we(e.stringMode,m)),e.value===void 0&&C(m,s)),m}return l.value},K=ut(),W=function o(a){var s;if(q(),w.value=a,!g.value){var u=_(a),m=k(u);m.isNaN()||$(m,!0)}(s=e.onInput)===null||s===void 0||s.call(e,a),K(function(){var N=a;e.parser||(N=a.replace(/ã€‚/g,".")),N!==a&&o(N)})},L=function(){g.value=!0},ne=function(){g.value=!1,W(v.value.value)},X=function(a){W(a.target.value)},Y=function(a){var s,u;if(!(a&&y.value||!a&&R.value)){p.value=!1;var m=k(e.step);a||(m=m.negate());var N=(l.value||k(0)).add(m.toString()),D=$(N,!1);(s=e.onStep)===null||s===void 0||s.call(e,we(e.stringMode,D),{offset:e.step,type:a?"up":"down"}),(u=v.value)===null||u===void 0||u.focus()}},ae=function(a){var s=k(_(w.value)),u=s;s.isNaN()?u=l.value:u=$(s,a),e.value!==void 0?C(l.value,!1):u.isNaN()||C(u,!1)},ce=function(a){var s,u=a.which;p.value=!0,u===oe.ENTER&&(g.value||(p.value=!1),ae(!1),(s=e.onPressEnter)===null||s===void 0||s.call(e,a)),e.keyboard!==!1&&!g.value&&[oe.UP,oe.DOWN].includes(u)&&(Y(oe.UP===u),a.preventDefault())},b=function(){p.value=!1},j=function(a){ae(!1),d.value=!1,p.value=!1,c("blur",a)};return Q(function(){return e.precision},function(){l.value.isInvalidate()||C(l.value,!1)},{flush:"post"}),Q(function(){return e.value},function(){var o=k(e.value);l.value=o;var a=k(_(w.value));(!o.equals(a)||!p.value||e.formatter)&&C(o,p.value)},{flush:"post"}),Q(w,function(){e.formatter&&te()},{flush:"post"}),Q(function(){return e.disabled},function(o){o&&(d.value=!1)}),f({focus:function(){var a;(a=v.value)===null||a===void 0||a.focus()},blur:function(){var a;(a=v.value)===null||a===void 0||a.blur()}}),function(){var o,a=F(F({},r),e),s=a.prefixCls,u=s===void 0?"rc-input-number":s,m=a.min,N=a.max,D=a.step,O=D===void 0?1:D;a.defaultValue,a.value;var re=a.disabled,ie=a.readonly;a.keyboard;var ue=a.controls,ve=ue===void 0?!0:ue,le=a.autofocus;a.stringMode,a.parser,a.formatter,a.precision,a.decimalSeparator,a.onChange,a.onInput,a.onPressEnter,a.onStep;var Ve=a.lazy,ke=a.class,Me=a.style,Fe=lt(a,["prefixCls","min","max","step","defaultValue","value","disabled","readonly","keyboard","controls","autofocus","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","lazy","class","style"]),Ae=i.upHandler,Pe=i.downHandler,Ne="".concat(u,"-input"),fe={};return Ve?fe.onChange=X:fe.onInput=X,I("div",{class:T(u,ke,(o={},h(o,"".concat(u,"-focused"),d.value),h(o,"".concat(u,"-disabled"),re),h(o,"".concat(u,"-readonly"),ie),h(o,"".concat(u,"-not-a-number"),l.value.isNaN()),h(o,"".concat(u,"-out-of-range"),!l.value.isInvalidate()&&!U(l.value)),o)),style:Me,onKeydown:ce,onKeyup:b},[ve&&I(rt,{prefixCls:u,upDisabled:y.value,downDisabled:R.value,onStep:Y},{upNode:Ae,downNode:Pe}),I("div",{class:"".concat(Ne,"-wrap")},[I("input",M(M(M({autofocus:le,autocomplete:"off",role:"spinbutton","aria-valuemin":m,"aria-valuemax":N,"aria-valuenow":l.value.isInvalidate()?null:l.value.toString(),step:O},Fe),{},{ref:v,class:Ne,value:w.value,disabled:re,readonly:ie,onFocus:function(Oe){d.value=!0,c("focus",Oe)}},fe),{},{onBlur:j,onCompositionstart:L,onCompositionend:ne}),null)])])}}});function me(n){return n!=null}var st=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},Ee=Be(),ct=function(){return F(F({},Ee),{size:{type:String},bordered:{type:Boolean,default:!0},placeholder:String,name:String,id:String,type:String,addonBefore:de.any,addonAfter:de.any,prefix:de.any,"onUpdate:value":Ee.onChange,valueModifiers:Object})},ge=se({name:"AInputNumber",inheritAttrs:!1,props:ct(),slots:["addonBefore","addonAfter","prefix"],setup:function(e,t){var r=t.emit,i=t.expose,c=t.attrs,f=t.slots,v=Je(),d=He("input-number",e),p=d.prefixCls,g=d.size,l=d.direction,B=E(e.value===void 0?e.defaultValue:e.value),V=E(!1);Q(function(){return e.value},function(){B.value=e.value});var _=E(null),w=function(){var y;(y=_.value)===null||y===void 0||y.focus()},A=function(){var y;(y=_.value)===null||y===void 0||y.blur()};i({focus:w,blur:A});var z=function(y){e.value===void 0&&(B.value=y),r("update:value",y),r("change",y),v.onFieldChange()},C=function(y){V.value=!1,r("blur",y),v.onFieldBlur()},P=function(y){V.value=!0,r("focus",y)};return function(){var S,y,R,G,x=F(F({},c),e),q=x.class,te=x.bordered,H=x.readonly,U=x.style,$=x.addonBefore,K=$===void 0?(y=f.addonBefore)===null||y===void 0?void 0:y.call(f):$,W=x.addonAfter,L=W===void 0?(R=f.addonAfter)===null||R===void 0?void 0:R.call(f):W,ne=x.prefix,X=ne===void 0?(G=f.prefix)===null||G===void 0?void 0:G.call(f):ne,Y=x.valueModifiers,ae=Y===void 0?{}:Y,ce=st(x,["class","bordered","readonly","style","addonBefore","addonAfter","prefix","valueModifiers"]),b=p.value,j=g.value,o=T((S={},h(S,"".concat(b,"-lg"),j==="large"),h(S,"".concat(b,"-sm"),j==="small"),h(S,"".concat(b,"-rtl"),l.value==="rtl"),h(S,"".concat(b,"-readonly"),H),h(S,"".concat(b,"-borderless"),!te),S),q),a=I(ot,M(M({},Qe(ce,["size","defaultValue"])),{},{ref:_,lazy:!!ae.lazy,value:B.value,class:o,prefixCls:b,readonly:H,onChange:z,onBlur:C,onFocus:P}),{upHandler:function(){return I(Le,{class:"".concat(b,"-handler-up-inner")},null)},downHandler:function(){return I(Xe,{class:"".concat(b,"-handler-down-inner")},null)}}),s=me(K)||me(L);if(me(X)){var u,m=T("".concat(b,"-affix-wrapper"),(u={},h(u,"".concat(b,"-affix-wrapper-focused"),V.value),h(u,"".concat(b,"-affix-wrapper-disabled"),e.disabled),h(u,"".concat(b,"-affix-wrapper-rtl"),l.value==="rtl"),h(u,"".concat(b,"-affix-wrapper-readonly"),H),h(u,"".concat(b,"-affix-wrapper-borderless"),!te),h(u,"".concat(q),!s&&q),u));a=I("div",{class:m,style:U,onMouseup:function(){return _.value.focus()}},[I("span",{class:"".concat(b,"-prefix")},[X]),a])}if(s){var N,D="".concat(b,"-group"),O="".concat(D,"-addon"),re=K?I("div",{class:O},[K]):null,ie=L?I("div",{class:O},[L]):null,ue=T("".concat(b,"-wrapper"),D,h({},"".concat(D,"-rtl"),l.value==="rtl")),ve=T("".concat(b,"-group-wrapper"),(N={},h(N,"".concat(b,"-group-wrapper-sm"),j==="small"),h(N,"".concat(b,"-group-wrapper-lg"),j==="large"),h(N,"".concat(b,"-group-wrapper-rtl"),l.value==="rtl"),N),q);a=I("div",{class:ve,style:U},[I("div",{class:ue},[re,a,ie])])}return Ze(a,{style:U})}}});const vt=F(ge,{install:function(e){return e.component(ge.name,ge),e}}),ft={name:"DInputNumber"},bt=se({...ft,props:{value:{default:0}},emits:["update:value"],setup(n,{emit:e}){const t=n,r=J({get:()=>t.value,set:i=>e("update:value",i)});return(i,c)=>{const f=vt;return Ue(),$e(f,Ge(i.$attrs,{value:r.value,"onUpdate:value":c[0]||(c[0]=v=>r.value=v),class:Ke(We).theme.current}),{addonAfter:je(()=>[ze(i.$slots,"addonAfter")]),_:3},16,["value","class"])}}});export{bt as _};
