import{_ as Y}from"./DMarkdown.vue_vue_type_script_setup_true_lang.bdab1876.js";import{bh as f,q as Z,d as $,K as x,o as c,c as C,a as r,$ as t,S as e,g as p,w as _,a4 as s,av as tt,v as g,y as I,a0 as et,a1 as nt,x as F}from"./index.9266fe7f.js";import{u as ot}from"./ModuleAutoSaveLib.8d42a064.js";import{_ as k}from"./_plugin-vue_export-helper.cdc0426e.js";import{U as st}from"./UIWithTitle.0ba888b9.js";import{b as at,c as rt,a as it,d as lt,e as mt,U as ct}from"./UICreateImport.vue_vue_type_script_setup_true_lang.c1480d91.js";import{u as dt}from"./PortImport.vue_vue_type_script_setup_true_lang.05f6995c.js";import{_ as pt}from"./DButton.vue_vue_type_script_setup_true_lang.f01b73c3.js";import{_ as _t,a as ut}from"./Interface.5d379190.js";import{d as b}from"./copyLib.a293d052.js";import{a as v}from"./config.aa76b2c0.js";import"./memoize.e560e7a2.js";import"./fileLib.095e2999.js";import"./DTooltip.a164b95f.js";import"./_baseIsEqual.c6682faf.js";import"./ModuleCollapsetLib.5ec92ace.js";import"./routeLib.6e6566a2.js";import"./findIndex.1cce42a8.js";import"./hasIn.738d762b.js";import"./index.e869f91d.js";import"./KeyCode.9e37adda.js";import"./pick.c38772a2.js";import"./_flatRest.c6189477.js";import"./DSelect.vue_vue_type_script_setup_true_lang.acb30ba2.js";import"./styleChecker.0f858936.js";import"./debounce.74925b94.js";import"./now.ac1a2184.js";import"./DResult.vue_vue_type_script_setup_true_lang.8793c2b7.js";import"./DSpin.c481c300.js";import"./randomLib.04c6c9cc.js";import"./stringify.15412eb9.js";const yt="ed",h=".md",ft={[f.Config]:"typing_config",[f.Folder]:"typing_folder",[f.Content]:"typing_content",[f.Env]:"typing_env"};function gt(){return{content:{content:"",html:""},isSaved:0}}const m=Z({folders:[],item:{}}),vt={class:"typing-content"},ht={name:"TypingEditor"},Ct=$({...ht,setup(T){const i=x("contentIdentity"),n=x("contentName");ot(m,i,["content"],n);function d(u){m.item[i.value].content.html=u}return(u,y)=>(c(),C("div",vt,[r(Y,{"show-code-row-number":!0,"text-identity":`${t(yt)}-${t(i)}`,content:t(m).item[t(i)].content.content,"onUpdate:content":y[0]||(y[0]=w=>t(m).item[t(i)].content.content=w),style:{height:"100%"},onOnHtmlChanged:d},null,8,["text-identity","content"])]))}});const wt=k(Ct,[["__scopeId","data-v-ed359743"]]),It={class:"warp_bigger format_area"},xt={key:0,class:"show_area"},Ft={class:"tw-flex tw-justify-end tw-items-center"},$t={key:0},Tt={class:"tw-ml-2"},Dt={class:"tw-ml-2"},bt={class:"tw-mr-1"},kt={name:"ModuleTyping"},St=$({...kt,setup(T){const i=x("storeIDB"),{curContentIdentity:n,curContentName:d,curContentFolderIdentity:u,curFolders:y,curHistoryFolders:w,curIsSaved:S,addFolder:N,renameFolder:E,deleteFolder:U,sortFolder:B,createContent:M,saveContent:H,showContent:V,renameContent:O,copyContent:P,deleteContent:j,autoSaveContent:R,importContent:q,getContent:z,saveFolder:A,saveContentItem:K}=dt(i,ft,m,gt());e("contentIsSaved",S),e("contentFolderIdentity",u),e("contentIdentity",n),e("contentName",d),e("historyFolders",w),e("folders",y),e("addFolder",N),e("renameFolder",E),e("deleteFolder",U),e("showContent",V),e("copyContent",P),e("renameContent",O),e("deleteContent",j),e("sortFolder",B),e("saveContent",H),e("autoSaveContent",R),e("getContent",z),e("saveFolder",A),e("saveContentItem",K);function L(){M()}function W(l){s.loading=!0;const{name:o,content:a,isSave:Q,folderIdentity:X}=l;q(o,{content:a},Q,X,h).then(()=>{s.loading=!1}).catch(()=>{s.loading=!1})}let D;(l=>{l.Markdown="markdown",l.Html="html"})(D||(D={}));const G=[{value:"markdown",label:p("typing.markdownValue")},{value:"html",label:p("typing.htmlValue")}];function J(l){const{html:o,content:a}=m.item[n.value].content;l==="markdown"?b(a||""):b(o||"")}return(l,o)=>(c(),C("div",It,[r(ct,{collapse:t(s).historyDrawer.collapse,"onUpdate:collapse":o[2]||(o[2]=a=>t(s).historyDrawer.collapse=a),history:t(s).historyDrawer,suffix:t(h)},{default:_(()=>[t(n)?(c(),C("div",xt,[r(st,{title:t(p)(`module.${t(s).module}`),contentName:t(d),"onUpdate:contentName":o[1]||(o[1]=a=>tt(d)?d.value=a:null),"is-has-name":!0},{titleRight:_(()=>[g("div",Ft,[t(n)?(c(),C("span",$t,[r(at,{"store-item-data":t(m).item[t(n)]},null,8,["store-item-data"])])):I("",!0),g("span",Tt,[r(rt,{"support-types":["text/markdown"],accept:[t(h)],"un-support-msg":t(p)("port.mdOnly"),"store-item-data":t(m).item[t(n)],suffix:t(h),type:t(v).MD,types:[t(v).MD,t(v).PDF,t(v).HTML],onSelect:L,onContent:W},null,8,["accept","un-support-msg","store-item-data","suffix","type","types"])]),g("span",Dt,[r(it,{data:G,onSelected:J},{anchor:_(()=>[r(pt,{type:"primary"},{default:_(()=>[g("span",bt,et(t(p)("tags.copy")),1),r(_t,{type:t(ut).DownOutlined,size:"xs"},null,8,["type"])]),_:1})]),_:1})]),r(lt,nt({class:"tw-ml-2"},l.$attrs),null,16),t(s).historyDrawer.collapse?(c(),F(mt,{key:1,class:"tw-ml-2",visible:t(s).historyDrawer.visible,"onUpdate:visible":o[0]||(o[0]=a=>t(s).historyDrawer.visible=a)},null,8,["visible"])):I("",!0)])]),default:_(()=>[(c(),F(wt,{key:t(n)}))]),_:1},8,["title","contentName"])])):I("",!0)]),_:1},8,["collapse","history","suffix"])]))}});const Nt=k(St,[["__scopeId","data-v-903c76fb"]]),me=$({__name:"Typing",setup(T){return(i,n)=>(c(),F(Nt))}});export{me as default};
