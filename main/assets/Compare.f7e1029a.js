import{a as qe,u as xe,b as er,c as rr,_ as tr,d as nr,e as ir,U as ar}from"./PortExport.vue_vue_type_script_setup_true_lang.c939a6dc.js";import{U as lr,_ as sr}from"./UIWithTitle.30bc1e52.js";import{r as or,X as fr}from"./codemirror.4373ef55.js";import{X as Ue,d as me,B as ce,j as hr,o as ne,c as Ce,a as Y,b as De,aC as gr,b9 as ur,a5 as ve,a4 as H,D as J,au as oe,at as te,a6 as We,av as cr,a3 as vr,W as ee}from"./index.611b52b0.js";import{u as mr}from"./ModuleAutoSaveLib.04e12bb3.js";import{_ as $e}from"./_plugin-vue_export-helper.cdc0426e.js";import{g as ie}from"./lib.75e6cd80.js";import{b as ue}from"./config.f9e89767.js";import{_ as pr,E as dr}from"./Interface.48732bbd.js";import{d as we}from"./copyLib.49c87afd.js";import{_ as _r}from"./DCheckbox.vue_vue_type_script_setup_true_lang.29ca96b9.js";import{E as br,a as Re}from"./DConfirm.15e4c3c0.js";import"./dayjs.min.6c47bd3a.js";import"./forEach.99eaac2d.js";import"./identity.ef62d0c1.js";import"./index.410413ae.js";import"./hasIn.84fb846a.js";import"./toNumber.d0d01f72.js";import"./memoize.c79247e9.js";import"./index.fcfefed5.js";import"./messageLib.15acb5c4.js";import"./randomLib.04c6c9cc.js";import"./stringify.15412eb9.js";import"./cloneDeep.87697a00.js";import"./isPlainObject.4756aa4c.js";import"./dateLib.63528a18.js";import"./advancedFormat.16ff0fee.js";import"./Modal.a2e097dd.js";import"./styleChecker.fdf7553f.js";(function(x,p){(function(C){C(or())})(function(C){var S=C.Pos,y="http://www.w3.org/2000/svg";function r(e,n){this.mv=e,this.type=n,this.classes=n=="left"?{chunk:"CodeMirror-merge-l-chunk",start:"CodeMirror-merge-l-chunk-start",end:"CodeMirror-merge-l-chunk-end",insert:"CodeMirror-merge-l-inserted",del:"CodeMirror-merge-l-deleted",connect:"CodeMirror-merge-l-connect"}:{chunk:"CodeMirror-merge-r-chunk",start:"CodeMirror-merge-r-chunk-start",end:"CodeMirror-merge-r-chunk-end",insert:"CodeMirror-merge-r-inserted",del:"CodeMirror-merge-r-deleted",connect:"CodeMirror-merge-r-connect"}}r.prototype={constructor:r,init:function(e,n,l){this.edit=this.mv.edit,(this.edit.state.diffViews||(this.edit.state.diffViews=[])).push(this),this.orig=C(e,de({value:n,readOnly:!this.mv.options.allowEditingOriginals},de(l))),this.mv.options.connect=="align"&&(this.edit.state.trackAlignable||(this.edit.state.trackAlignable=new _e(this.edit)),this.orig.state.trackAlignable=new _e(this.orig)),this.lockButton.title=this.edit.phrase("Toggle locked scrolling"),this.lockButton.setAttribute("aria-label",this.lockButton.title),this.orig.state.diffViews=[this];var h=l.chunkClassLocation||"background";Object.prototype.toString.call(h)!="[object Array]"&&(h=[h]),this.classes.classLocation=h,this.diff=ye(K(n),K(l.value),this.mv.options.ignoreWhitespace),this.chunks=Me(this.diff),this.diffOutOfDate=this.dealigned=!1,this.needsScrollSync=null,this.showDifferences=l.showDifferences!==!1},registerEvents:function(e){this.forceUpdate=o(this),c(this,!0,!1),s(this,e)},setShowDifferences:function(e){e=e!==!1,e!=this.showDifferences&&(this.showDifferences=e,this.forceUpdate("full"))}};function t(e){e.diffOutOfDate&&(e.diff=ye(e.orig.getValue(),e.edit.getValue(),e.mv.options.ignoreWhitespace),e.chunks=Me(e.diff),e.diffOutOfDate=!1,C.signal(e.edit,"updateDiff",e.diff))}var i=!1;function o(e){var n={from:0,to:0,marked:[]},l={from:0,to:0,marked:[]},h,g=!1;function u(E){i=!0,g=!1,E=="full"&&(e.svg&&fe(e.svg),e.copyButtons&&fe(e.copyButtons),b(e.edit,n.marked,e.classes),b(e.orig,l.marked,e.classes),n.from=n.to=l.from=l.to=0),t(e),e.showDifferences&&(w(e.edit,e.diff,n,DIFF_INSERT,e.classes),w(e.orig,e.diff,l,DIFF_DELETE,e.classes)),e.mv.options.connect=="align"&&N(e),M(e),e.needsScrollSync!=null&&a(e,e.needsScrollSync),i=!1}function m(E){i||(e.dealigned=!0,d(E))}function d(E){i||g||(clearTimeout(h),E===!0&&(g=!0),h=setTimeout(u,E===!0?20:250))}function _(E,O){e.diffOutOfDate||(e.diffOutOfDate=!0,n.from=n.to=l.from=l.to=0),m(O.text.length-1!=O.to.line-O.from.line)}function T(){e.diffOutOfDate=!0,e.dealigned=!0,u("full")}return e.edit.on("change",_),e.orig.on("change",_),e.edit.on("swapDoc",T),e.orig.on("swapDoc",T),e.mv.options.connect=="align"&&(C.on(e.edit.state.trackAlignable,"realign",m),C.on(e.orig.state.trackAlignable,"realign",m)),e.edit.on("viewportChange",function(){d(!1)}),e.orig.on("viewportChange",function(){d(!1)}),u(),u}function s(e,n){e.edit.on("scroll",function(){a(e,!0)&&M(e)}),e.orig.on("scroll",function(){a(e,!1)&&M(e),n&&a(n,!0)&&M(n)})}function a(e,n){if(e.diffOutOfDate)return e.lockScroll&&e.needsScrollSync==null&&(e.needsScrollSync=n),!1;if(e.needsScrollSync=null,!e.lockScroll)return!0;var l,h,g=+new Date;if(n?(l=e.edit,h=e.orig):(l=e.orig,h=e.edit),l.state.scrollSetBy==e&&(l.state.scrollSetAt||0)+250>g)return!1;var u=l.getScrollInfo();if(e.mv.options.connect=="align")$=u.top;else{var m=.5*u.clientHeight,d=u.top+m,_=l.lineAtHeight(d,"local"),T=ze(e.chunks,_,n),E=f(l,n?T.edit:T.orig),O=f(h,n?T.orig:T.edit),V=(d-E.top)/(E.bot-E.top),$=O.top-m+V*(O.bot-O.top),z,X;if($>u.top&&(X=u.top/m)<1)$=$*X+u.top*(1-X);else if((z=u.height-u.clientHeight-u.top)<m){var j=h.getScrollInfo(),Q=j.height-j.clientHeight-$;Q>z&&(X=z/m)<1&&($=$*X+(j.height-j.clientHeight-z)*(1-X))}}return h.scrollTo(u.left,$),h.state.scrollSetAt=g,h.state.scrollSetBy=e,!0}function f(e,n){var l=n.after;return l==null&&(l=e.lastLine()+1),{top:e.heightAtLine(n.before||0,"local"),bot:e.heightAtLine(l,"local")}}function c(e,n,l){e.lockScroll=n,n&&l!=!1&&a(e,DIFF_INSERT)&&M(e),(n?C.addClass:C.rmClass)(e.lockButton,"CodeMirror-merge-scrolllock-enabled")}function v(e,n,l){for(var h=l.classLocation,g=0;g<h.length;g++)e.removeLineClass(n,h[g],l.chunk),e.removeLineClass(n,h[g],l.start),e.removeLineClass(n,h[g],l.end)}function b(e,n,l){for(var h=0;h<n.length;++h){var g=n[h];g instanceof C.TextMarker?g.clear():g.parent&&v(e,g,l)}n.length=0}function w(e,n,l,h,g){var u=e.getViewport();e.operation(function(){l.from==l.to||u.from-l.to>20||l.from-u.to>20?(b(e,l.marked,g),k(e,n,h,l.marked,u.from,u.to,g),l.from=u.from,l.to=u.to):(u.from<l.from&&(k(e,n,h,l.marked,u.from,l.from,g),l.from=u.from),u.to>l.to&&(k(e,n,h,l.marked,l.to,u.to,g),l.to=u.to))})}function D(e,n,l,h,g,u){for(var m=l.classLocation,d=e.getLineHandle(n),_=0;_<m.length;_++)h&&e.addLineClass(d,m[_],l.chunk),g&&e.addLineClass(d,m[_],l.start),u&&e.addLineClass(d,m[_],l.end);return d}function k(e,n,l,h,g,u,m){var d=S(0,0),_=S(g,0),T=e.clipPos(S(u-1)),E=l==DIFF_DELETE?m.del:m.insert;function O(be,ae){for(var le=Math.max(g,be),Pe=Math.min(u,ae),se=le;se<Pe;++se)h.push(D(e,se,m,!0,se==be,se==ae-1));be==ae&&le==ae&&Pe==ae&&(le?h.push(D(e,le-1,m,!1,!1,!0)):h.push(D(e,le,m,!1,!0,!1)))}for(var V=0,$=!1,z=0;z<n.length;++z){var X=n[z],j=X[0],Q=X[1];if(j==DIFF_EQUAL){var Ie=d.line+(Se(n,z)?0:1);he(d,Q);var Be=d.line+(ke(n,z)?1:0);Be>Ie&&($&&(O(V,Ie),$=!1),V=Be)}else if($=!0,j==l){var Le=he(d,Q,!0),Ne=Ke(_,d),Oe=Je(T,Le);Ze(Ne,Oe)||h.push(e.markText(Ne,Oe,{className:E})),d=Le}}$&&O(V,d.line+1)}function M(e){if(!!e.showDifferences){if(e.svg){fe(e.svg);var n=e.gap.offsetWidth;Fe(e.svg,"width",n,"height",e.gap.offsetHeight)}e.copyButtons&&fe(e.copyButtons);for(var l=e.edit.getViewport(),h=e.orig.getViewport(),g=e.mv.wrap.getBoundingClientRect().top,u=g-e.edit.getScrollerElement().getBoundingClientRect().top+e.edit.getScrollInfo().top,m=g-e.orig.getScrollerElement().getBoundingClientRect().top+e.orig.getScrollInfo().top,d=0;d<e.chunks.length;d++){var _=e.chunks[d];_.editFrom<=l.to&&_.editTo>=l.from&&_.origFrom<=h.to&&_.origTo>=h.from&&R(e,_,m,u,n)}}}function A(e,n){for(var l=0,h=0,g=0;g<n.length;g++){var u=n[g];if(u.editTo>e&&u.editFrom<=e)return null;if(u.editFrom>e)break;l=u.editTo,h=u.origTo}return h+(e-l)}function B(e,n,l){for(var h=e.state.trackAlignable,g=e.firstLine(),u=0,m=[],d=0;;d++){for(var _=n[d],T=_?l?_.origFrom:_.editFrom:1e9;u<h.alignable.length;u+=2){var E=h.alignable[u]+1;if(!(E<=g))if(E<=T)m.push(E);else break}if(!_)break;m.push(g=l?_.origTo:_.editTo)}return m}function W(e,n,l,h){var g=0,u=0,m=0,d=0;e:for(;;g++){var _=e[g],T=n[u];if(!_&&T==null)break;for(var E=_?_[0]:1e9,O=T==null?1e9:T;m<l.length;){var V=l[m];if(V.origFrom<=O&&V.origTo>O){u++,g--;continue e}if(V.editTo>E){if(V.editFrom<=E)continue e;break}d+=V.origTo-V.origFrom-(V.editTo-V.editFrom),m++}if(E==O-d)_[h]=O,u++;else if(E<O-d)_[h]=E+d;else{var $=[O-d,null,null];$[h]=O,e.splice(g,0,$),u++}}}function L(e,n){var l=B(e.edit,e.chunks,!1),h=[];if(n)for(var g=0,u=0;g<n.chunks.length;g++){for(var m=n.chunks[g].editTo;u<l.length&&l[u]<m;)u++;(u==l.length||l[u]!=m)&&l.splice(u++,0,m)}for(var g=0;g<l.length;g++)h.push([l[g],null,null]);return W(h,B(e.orig,e.chunks,!0),e.chunks,1),n&&W(h,B(n.orig,n.chunks,!0),n.chunks,2),h}function N(e,n){if(!(!e.dealigned&&!n)){if(!e.orig.curOp)return e.orig.operation(function(){N(e,n)});e.dealigned=!1;var l=e.mv.left==e?e.mv.right:e.mv.left;l&&(t(l),l.dealigned=!1);for(var h=L(e,l),g=e.mv.aligners,u=0;u<g.length;u++)g[u].clear();g.length=0;var m=[e.edit,e.orig],d=[],_=[];l&&m.push(l.orig);for(var u=0;u<m.length;u++)d.push(m[u].getScrollInfo().top),_.push(-m[u].getScrollerElement().getBoundingClientRect().top);(_[0]!=_[1]||m.length==3&&_[1]!=_[2])&&F(m,_,[0,0,0],g);for(var T=0;T<h.length;T++)F(m,_,h[T],g);for(var u=0;u<m.length;u++)m[u].scrollTo(null,d[u])}}function F(e,n,l,h){for(var g=-1e8,u=[],m=0;m<e.length;m++)if(l[m]!=null){var d=e[m].heightAtLine(l[m],"local")-n[m];u[m]=d,g=Math.max(g,d)}for(var m=0;m<e.length;m++)if(l[m]!=null){var _=g-u[m];_>1&&h.push(I(e[m],l[m],_))}}function I(e,n,l){var h=!0;n>e.lastLine()&&(n--,h=!1);var g=document.createElement("div");return g.className="CodeMirror-merge-spacer",g.style.height=l+"px",g.style.minWidth="1px",e.addLineWidget(n,g,{height:l,above:h,mergeSpacer:!0,handleMouseEvents:!0})}function R(e,n,l,h,g){var u=e.type=="left",m=e.orig.heightAtLine(n.origFrom,"local",!0)-l;if(e.svg){var d=m,_=e.edit.heightAtLine(n.editFrom,"local",!0)-h;if(u){var T=d;d=_,_=T}var E=e.orig.heightAtLine(n.origTo,"local",!0)-l,O=e.edit.heightAtLine(n.editTo,"local",!0)-h;if(u){var T=E;E=O,O=T}var V=" C "+g/2+" "+_+" "+g/2+" "+d+" "+(g+2)+" "+d,$=" C "+g/2+" "+E+" "+g/2+" "+O+" -1 "+O;Fe(e.svg.appendChild(document.createElementNS(y,"path")),"d","M -1 "+_+V+" L "+(g+2)+" "+E+$+" z","class",e.classes.connect)}if(e.copyButtons){var z=e.copyButtons.appendChild(Z("div",e.type=="left"?"\u21DD":"\u21DC","CodeMirror-merge-copy")),X=e.mv.options.allowEditingOriginals;if(z.title=e.edit.phrase(X?"Push to left":"Revert chunk"),z.chunk=n,z.style.top=(n.origTo>n.origFrom?m:e.edit.heightAtLine(n.editFrom,"local")-h)+"px",z.setAttribute("role","button"),z.setAttribute("tabindex","0"),z.setAttribute("aria-label",z.title),X){var j=e.edit.heightAtLine(n.editFrom,"local")-h,Q=e.copyButtons.appendChild(Z("div",e.type=="right"?"\u21DD":"\u21DC","CodeMirror-merge-copy-reverse"));Q.title="Push to right",Q.chunk={editFrom:n.origFrom,editTo:n.origTo,origFrom:n.editFrom,origTo:n.editTo},Q.style.top=j+"px",e.type=="right"?Q.style.left="2px":Q.style.right="2px",Q.setAttribute("role","button"),Q.setAttribute("tabindex","0"),Q.setAttribute("aria-label",Q.title)}}}function U(e,n,l,h){if(!e.diffOutOfDate){var g=h.origTo>l.lastLine()?S(h.origFrom-1):S(h.origFrom,0),u=S(h.origTo,0),m=h.editTo>n.lastLine()?S(h.editFrom-1):S(h.editFrom,0),d=S(h.editTo,0),_=e.mv.options.revertChunk;_?_(e.mv,l,g,u,n,m,d):n.replaceRange(l.getRange(g,u),m,d)}}var P=C.MergeView=function(e,n){if(!(this instanceof P))return new P(e,n);this.options=n;var l=n.origLeft,h=n.origRight==null?n.orig:n.origRight,g=l!=null,u=h!=null,m=1+(g?1:0)+(u?1:0),d=[],_=this.left=null,T=this.right=null,E=this;if(g){_=this.left=new r(this,"left");var O=Z("div",null,"CodeMirror-merge-pane CodeMirror-merge-left");d.push(O),d.push(G(_))}var V=Z("div",null,"CodeMirror-merge-pane CodeMirror-merge-editor");if(d.push(V),u){T=this.right=new r(this,"right"),d.push(G(T));var $=Z("div",null,"CodeMirror-merge-pane CodeMirror-merge-right");d.push($)}(u?$:V).className+=" CodeMirror-merge-pane-rightmost",d.push(Z("div",null,null,"height: 0; clear: both;"));var z=this.wrap=e.appendChild(Z("div",d,"CodeMirror-merge CodeMirror-merge-"+m+"pane"));this.edit=C(V,de(n)),_&&_.init(O,l,n),T&&T.init($,h,n),n.collapseIdentical&&this.editor().operation(function(){Xe(E,n.collapseIdentical)}),n.connect=="align"&&(this.aligners=[],N(this.left||this.right,!0)),_&&_.registerEvents(T),T&&T.registerEvents(_);var X=function(){_&&M(_),T&&M(T)};C.on(window,"resize",X);var j=setInterval(function(){for(var Q=z.parentNode;Q&&Q!=document.body;Q=Q.parentNode);Q||(clearInterval(j),C.off(window,"resize",X))},5e3)};function G(e){var n=e.lockButton=Z("div",null,"CodeMirror-merge-scrolllock");n.setAttribute("role","button"),n.setAttribute("tabindex","0");var l=Z("div",[n],"CodeMirror-merge-scrolllock-wrap");C.on(n,"click",function(){c(e,!e.lockScroll)}),C.on(n,"keyup",function(m){(m.key==="Enter"||m.code==="Space")&&c(e,!e.lockScroll)});var h=[l];if(e.mv.options.revertButtons!==!1){e.copyButtons=Z("div",null,"CodeMirror-merge-copybuttons-"+e.type);var g=function(m){var d=m.target||m.srcElement;if(!!d.chunk){if(d.className=="CodeMirror-merge-copy-reverse"){U(e,e.orig,e.edit,d.chunk);return}U(e,e.edit,e.orig,d.chunk)}};C.on(e.copyButtons,"click",g),C.on(e.copyButtons,"keyup",function(m){(m.key==="Enter"||m.code==="Space")&&g(m)}),h.unshift(e.copyButtons)}if(e.mv.options.connect!="align"){var u=document.createElementNS&&document.createElementNS(y,"svg");u&&!u.createSVGRect&&(u=null),e.svg=u,u&&h.push(u)}return e.gap=Z("div",h,"CodeMirror-merge-gap")}P.prototype={constructor:P,editor:function(){return this.edit},rightOriginal:function(){return this.right&&this.right.orig},leftOriginal:function(){return this.left&&this.left.orig},setShowDifferences:function(e){this.right&&this.right.setShowDifferences(e),this.left&&this.left.setShowDifferences(e)},rightChunks:function(){if(this.right)return t(this.right),this.right.chunks},leftChunks:function(){if(this.left)return t(this.left),this.left.chunks}};function K(e){return typeof e=="string"?e:e.getValue()}var pe;function ye(e,n,l){pe||(pe=new diff_match_patch);for(var h=pe.diff_main(e,n),g=0;g<h.length;++g){var u=h[g];(l?!/[^ \t]/.test(u[1]):!u[1])?h.splice(g--,1):g&&h[g-1][0]==u[0]&&(h.splice(g--,1),h[g][1]+=u[1])}return h}function Me(e){var n=[];if(!e.length)return n;for(var l=0,h=0,g=S(0,0),u=S(0,0),m=0;m<e.length;++m){var d=e[m],_=d[0];if(_==DIFF_EQUAL){var T=!Se(e,m)||g.line<l||u.line<h?1:0,E=g.line+T,O=u.line+T;he(g,d[1],null,u);var V=ke(e,m)?1:0,$=g.line+V,z=u.line+V;$>E&&(m&&n.push({origFrom:h,origTo:O,editFrom:l,editTo:E}),l=$,h=z)}else he(_==DIFF_INSERT?g:u,d[1])}return(l<=g.line||h<=u.line)&&n.push({origFrom:h,origTo:u.line+1,editFrom:l,editTo:g.line+1}),n}function ke(e,n){if(n==e.length-1)return!0;var l=e[n+1][1];return l.length==1&&n<e.length-2||l.charCodeAt(0)!=10?!1:n==e.length-2?!0:(l=e[n+2][1],(l.length>1||n==e.length-3)&&l.charCodeAt(0)==10)}function Se(e,n){if(n==0)return!0;var l=e[n-1][1];return l.charCodeAt(l.length-1)!=10?!1:n==1?!0:(l=e[n-2][1],l.charCodeAt(l.length-1)==10)}function ze(e,n,l){for(var h,g,u,m,d=0;d<e.length;d++){var _=e[d],T=l?_.editFrom:_.origFrom,E=l?_.editTo:_.origTo;g==null&&(T>n?(g=_.editFrom,m=_.origFrom):E>n&&(g=_.editTo,m=_.origTo)),E<=n?(h=_.editTo,u=_.origTo):T<=n&&(h=_.editFrom,u=_.origFrom)}return{edit:{before:h,after:g},orig:{before:u,after:m}}}function Qe(e,n,l){e.addLineClass(n,"wrap","CodeMirror-merge-collapsed-line");var h=document.createElement("span");h.className="CodeMirror-merge-collapsed-widget",h.title=e.phrase("Identical text collapsed. Click to expand.");var g=e.markText(S(n,0),S(l-1),{inclusiveLeft:!0,inclusiveRight:!0,replacedWith:h,clearOnEnter:!0});function u(){g.clear(),e.removeLineClass(n,"wrap","CodeMirror-merge-collapsed-line")}return g.explicitlyCleared&&u(),C.on(h,"click",u),g.on("clear",u),C.on(h,"click",u),{mark:g,clear:u}}function Ge(e,n){var l=[];function h(){for(var d=0;d<l.length;d++)l[d].clear()}for(var g=0;g<n.length;g++){var u=n[g],m=Qe(u.cm,u.line,u.line+e);l.push(m),m.mark.on("clear",h)}return l[0].mark}function Te(e,n,l,h){for(var g=0;g<e.chunks.length;g++)for(var u=e.chunks[g],m=u.editFrom-n;m<u.editTo+n;m++){var d=m+l;d>=0&&d<h.length&&(h[d]=!1)}}function Xe(e,n){typeof n!="number"&&(n=2);for(var l=[],h=e.editor(),g=h.firstLine(),u=g,m=h.lastLine();u<=m;u++)l.push(!0);e.left&&Te(e.left,n,g,l),e.right&&Te(e.right,n,g,l);for(var d=0;d<l.length;d++)if(l[d]){for(var _=d+g,T=1;d<l.length-1&&l[d+1];d++,T++);if(T>n){var E=[{line:_,cm:h}];e.left&&E.push({line:A(_,e.left.chunks),cm:e.left.orig}),e.right&&E.push({line:A(_,e.right.chunks),cm:e.right.orig});var O=Ge(T,E);e.options.onCollapse&&e.options.onCollapse(e,_,T,O)}}}function Z(e,n,l,h){var g=document.createElement(e);if(l&&(g.className=l),h&&(g.style.cssText=h),typeof n=="string")g.appendChild(document.createTextNode(n));else if(n)for(var u=0;u<n.length;++u)g.appendChild(n[u]);return g}function fe(e){for(var n=e.childNodes.length;n>0;--n)e.removeChild(e.firstChild)}function Fe(e){for(var n=1;n<arguments.length;n+=2)e.setAttribute(arguments[n],arguments[n+1])}function de(e,n){n||(n={});for(var l in e)e.hasOwnProperty(l)&&(n[l]=e[l]);return n}function he(e,n,l,h){for(var g=l?S(e.line,e.ch):e,u=0;;){var m=n.indexOf(`
`,u);if(m==-1)break;++g.line,h&&++h.line,u=m+1}return g.ch=(u?0:g.ch)+(n.length-u),h&&(h.ch=(u?0:h.ch)+(n.length-u)),g}var Ee=1,re=2,ge=4;function _e(e){this.cm=e,this.alignable=[],this.height=e.doc.height;var n=this;e.on("markerAdded",function(l,h){if(!!h.collapsed){var g=h.find(1);g!=null&&n.set(g.line,ge)}}),e.on("markerCleared",function(l,h,g,u){u!=null&&h.collapsed&&n.check(u,ge,n.hasMarker)}),e.on("markerChanged",this.signal.bind(this)),e.on("lineWidgetAdded",function(l,h,g){h.mergeSpacer||(h.above?n.set(g-1,re):n.set(g,Ee))}),e.on("lineWidgetCleared",function(l,h,g){h.mergeSpacer||(h.above?n.check(g-1,re,n.hasWidgetBelow):n.check(g,Ee,n.hasWidget))}),e.on("lineWidgetChanged",this.signal.bind(this)),e.on("change",function(l,h){var g=h.from.line,u=h.to.line-h.from.line,m=h.text.length-1,d=g+m;(u||m)&&n.map(g,u,m),n.check(d,ge,n.hasMarker),(u||m)&&n.check(h.from.line,ge,n.hasMarker)}),e.on("viewportChange",function(){n.cm.doc.height!=n.height&&n.signal()})}_e.prototype={signal:function(){C.signal(this,"realign"),this.height=this.cm.doc.height},set:function(e,n){for(var l=-1;l<this.alignable.length;l+=2){var h=this.alignable[l]-e;if(h==0){if((this.alignable[l+1]&n)==n)return;this.alignable[l+1]|=n,this.signal();return}if(h>0)break}this.signal(),this.alignable.splice(l,0,e,n)},find:function(e){for(var n=0;n<this.alignable.length;n+=2)if(this.alignable[n]==e)return n;return-1},check:function(e,n,l){var h=this.find(e);if(!(h==-1||!(this.alignable[h+1]&n))&&!l.call(this,e)){this.signal();var g=this.alignable[h+1]&~n;g?this.alignable[h+1]=g:this.alignable.splice(h,2)}},hasMarker:function(e){var n=this.cm.getLineHandle(e);if(n.markedSpans){for(var l=0;l<n.markedSpans.length;l++)if(n.markedSpans[l].marker.collapsed&&n.markedSpans[l].to!=null)return!0}return!1},hasWidget:function(e){var n=this.cm.getLineHandle(e);if(n.widgets){for(var l=0;l<n.widgets.length;l++)if(!n.widgets[l].above&&!n.widgets[l].mergeSpacer)return!0}return!1},hasWidgetBelow:function(e){if(e==this.cm.lastLine())return!1;var n=this.cm.getLineHandle(e+1);if(n.widgets){for(var l=0;l<n.widgets.length;l++)if(n.widgets[l].above&&!n.widgets[l].mergeSpacer)return!0}return!1},map:function(e,n,l){for(var h=l-n,g=e+n,u=-1,m=-1,d=0;d<this.alignable.length;d+=2){var _=this.alignable[d];_==e&&this.alignable[d+1]&re&&(u=d),_==g&&this.alignable[d+1]&re&&(m=d),!(_<=e)&&(_<g?this.alignable.splice(d--,2):this.alignable[d]+=h)}if(u>-1){var T=this.alignable[u+1];T==re?this.alignable.splice(u,2):this.alignable[u+1]=T&~re}m>-1&&l&&this.set(e+l,re)}};function Je(e,n){return(e.line-n.line||e.ch-n.ch)<0?e:n}function Ke(e,n){return(e.line-n.line||e.ch-n.ch)>0?e:n}function Ze(e,n){return e.line==n.line&&e.ch==n.ch}function je(e,n,l){for(var h=e.length-1;h>=0;h--){var g=e[h],u=(l?g.origTo:g.editTo)-1;if(u<n)return u}}function Ye(e,n,l){for(var h=0;h<e.length;h++){var g=e[h],u=l?g.origFrom:g.editFrom;if(u>n)return u}}function Ae(e,n){var l=null,h=e.state.diffViews,g=e.getCursor().line;if(h)for(var u=0;u<h.length;u++){var m=h[u],d=e==m.orig;t(m);var _=n<0?je(m.chunks,g,d):Ye(m.chunks,g,d);_!=null&&(l==null||(n<0?_>l:_<l))&&(l=_)}if(l!=null)e.setCursor(l,0);else return C.Pass}C.commands.goNextDiff=function(e){return Ae(e,1)},C.commands.goPrevDiff=function(e){return Ae(e,-1)}})})();var Ve={exports:{}};(function(x){var p=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},C=-1,S=1,y=0;p.Diff=function(r,t){return[r,t]},p.prototype.diff_main=function(r,t,i,o){typeof o>"u"&&(this.Diff_Timeout<=0?o=Number.MAX_VALUE:o=new Date().getTime()+this.Diff_Timeout*1e3);var s=o;if(r==null||t==null)throw new Error("Null input. (diff_main)");if(r==t)return r?[new p.Diff(y,r)]:[];typeof i>"u"&&(i=!0);var a=i,f=this.diff_commonPrefix(r,t),c=r.substring(0,f);r=r.substring(f),t=t.substring(f),f=this.diff_commonSuffix(r,t);var v=r.substring(r.length-f);r=r.substring(0,r.length-f),t=t.substring(0,t.length-f);var b=this.diff_compute_(r,t,a,s);return c&&b.unshift(new p.Diff(y,c)),v&&b.push(new p.Diff(y,v)),this.diff_cleanupMerge(b),b},p.prototype.diff_compute_=function(r,t,i,o){var s;if(!r)return[new p.Diff(S,t)];if(!t)return[new p.Diff(C,r)];var a=r.length>t.length?r:t,f=r.length>t.length?t:r,c=a.indexOf(f);if(c!=-1)return s=[new p.Diff(S,a.substring(0,c)),new p.Diff(y,f),new p.Diff(S,a.substring(c+f.length))],r.length>t.length&&(s[0][0]=s[2][0]=C),s;if(f.length==1)return[new p.Diff(C,r),new p.Diff(S,t)];var v=this.diff_halfMatch_(r,t);if(v){var b=v[0],w=v[1],D=v[2],k=v[3],M=v[4],A=this.diff_main(b,D,i,o),B=this.diff_main(w,k,i,o);return A.concat([new p.Diff(y,M)],B)}return i&&r.length>100&&t.length>100?this.diff_lineMode_(r,t,o):this.diff_bisect_(r,t,o)},p.prototype.diff_lineMode_=function(r,t,i){var o=this.diff_linesToChars_(r,t);r=o.chars1,t=o.chars2;var s=o.lineArray,a=this.diff_main(r,t,!1,i);this.diff_charsToLines_(a,s),this.diff_cleanupSemantic(a),a.push(new p.Diff(y,""));for(var f=0,c=0,v=0,b="",w="";f<a.length;){switch(a[f][0]){case S:v++,w+=a[f][1];break;case C:c++,b+=a[f][1];break;case y:if(c>=1&&v>=1){a.splice(f-c-v,c+v),f=f-c-v;for(var D=this.diff_main(b,w,!1,i),k=D.length-1;k>=0;k--)a.splice(f,0,D[k]);f=f+D.length}v=0,c=0,b="",w="";break}f++}return a.pop(),a},p.prototype.diff_bisect_=function(r,t,i){for(var o=r.length,s=t.length,a=Math.ceil((o+s)/2),f=a,c=2*a,v=new Array(c),b=new Array(c),w=0;w<c;w++)v[w]=-1,b[w]=-1;v[f+1]=0,b[f+1]=0;for(var D=o-s,k=D%2!=0,M=0,A=0,B=0,W=0,L=0;L<a&&!(new Date().getTime()>i);L++){for(var N=-L+M;N<=L-A;N+=2){var F=f+N,I;N==-L||N!=L&&v[F-1]<v[F+1]?I=v[F+1]:I=v[F-1]+1;for(var R=I-N;I<o&&R<s&&r.charAt(I)==t.charAt(R);)I++,R++;if(v[F]=I,I>o)A+=2;else if(R>s)M+=2;else if(k){var U=f+D-N;if(U>=0&&U<c&&b[U]!=-1){var P=o-b[U];if(I>=P)return this.diff_bisectSplit_(r,t,I,R,i)}}}for(var G=-L+B;G<=L-W;G+=2){var U=f+G,P;G==-L||G!=L&&b[U-1]<b[U+1]?P=b[U+1]:P=b[U-1]+1;for(var K=P-G;P<o&&K<s&&r.charAt(o-P-1)==t.charAt(s-K-1);)P++,K++;if(b[U]=P,P>o)W+=2;else if(K>s)B+=2;else if(!k){var F=f+D-G;if(F>=0&&F<c&&v[F]!=-1){var I=v[F],R=f+I-F;if(P=o-P,I>=P)return this.diff_bisectSplit_(r,t,I,R,i)}}}}return[new p.Diff(C,r),new p.Diff(S,t)]},p.prototype.diff_bisectSplit_=function(r,t,i,o,s){var a=r.substring(0,i),f=t.substring(0,o),c=r.substring(i),v=t.substring(o),b=this.diff_main(a,f,!1,s),w=this.diff_main(c,v,!1,s);return b.concat(w)},p.prototype.diff_linesToChars_=function(r,t){var i=[],o={};i[0]="";function s(v){for(var b="",w=0,D=-1,k=i.length;D<v.length-1;){D=v.indexOf(`
`,w),D==-1&&(D=v.length-1);var M=v.substring(w,D+1);(o.hasOwnProperty?o.hasOwnProperty(M):o[M]!==void 0)?b+=String.fromCharCode(o[M]):(k==a&&(M=v.substring(w),D=v.length),b+=String.fromCharCode(k),o[M]=k,i[k++]=M),w=D+1}return b}var a=4e4,f=s(r);a=65535;var c=s(t);return{chars1:f,chars2:c,lineArray:i}},p.prototype.diff_charsToLines_=function(r,t){for(var i=0;i<r.length;i++){for(var o=r[i][1],s=[],a=0;a<o.length;a++)s[a]=t[o.charCodeAt(a)];r[i][1]=s.join("")}},p.prototype.diff_commonPrefix=function(r,t){if(!r||!t||r.charAt(0)!=t.charAt(0))return 0;for(var i=0,o=Math.min(r.length,t.length),s=o,a=0;i<s;)r.substring(a,s)==t.substring(a,s)?(i=s,a=i):o=s,s=Math.floor((o-i)/2+i);return s},p.prototype.diff_commonSuffix=function(r,t){if(!r||!t||r.charAt(r.length-1)!=t.charAt(t.length-1))return 0;for(var i=0,o=Math.min(r.length,t.length),s=o,a=0;i<s;)r.substring(r.length-s,r.length-a)==t.substring(t.length-s,t.length-a)?(i=s,a=i):o=s,s=Math.floor((o-i)/2+i);return s},p.prototype.diff_commonOverlap_=function(r,t){var i=r.length,o=t.length;if(i==0||o==0)return 0;i>o?r=r.substring(i-o):i<o&&(t=t.substring(0,i));var s=Math.min(i,o);if(r==t)return s;for(var a=0,f=1;;){var c=r.substring(s-f),v=t.indexOf(c);if(v==-1)return a;f+=v,(v==0||r.substring(s-f)==t.substring(0,f))&&(a=f,f++)}},p.prototype.diff_halfMatch_=function(r,t){if(this.Diff_Timeout<=0)return null;var i=r.length>t.length?r:t,o=r.length>t.length?t:r;if(i.length<4||o.length*2<i.length)return null;var s=this;function a(A,B,W){for(var L=A.substring(W,W+Math.floor(A.length/4)),N=-1,F="",I,R,U,P;(N=B.indexOf(L,N+1))!=-1;){var G=s.diff_commonPrefix(A.substring(W),B.substring(N)),K=s.diff_commonSuffix(A.substring(0,W),B.substring(0,N));F.length<K+G&&(F=B.substring(N-K,N)+B.substring(N,N+G),I=A.substring(0,W-K),R=A.substring(W+G),U=B.substring(0,N-K),P=B.substring(N+G))}return F.length*2>=A.length?[I,R,U,P,F]:null}var f=a(i,o,Math.ceil(i.length/4)),c=a(i,o,Math.ceil(i.length/2)),v;if(!f&&!c)return null;c?f?v=f[4].length>c[4].length?f:c:v=c:v=f;var b,w,D,k;r.length>t.length?(b=v[0],w=v[1],D=v[2],k=v[3]):(D=v[0],k=v[1],b=v[2],w=v[3]);var M=v[4];return[b,w,D,k,M]},p.prototype.diff_cleanupSemantic=function(r){for(var t=!1,i=[],o=0,s=null,a=0,f=0,c=0,v=0,b=0;a<r.length;)r[a][0]==y?(i[o++]=a,f=v,c=b,v=0,b=0,s=r[a][1]):(r[a][0]==S?v+=r[a][1].length:b+=r[a][1].length,s&&s.length<=Math.max(f,c)&&s.length<=Math.max(v,b)&&(r.splice(i[o-1],0,new p.Diff(C,s)),r[i[o-1]+1][0]=S,o--,o--,a=o>0?i[o-1]:-1,f=0,c=0,v=0,b=0,s=null,t=!0)),a++;for(t&&this.diff_cleanupMerge(r),this.diff_cleanupSemanticLossless(r),a=1;a<r.length;){if(r[a-1][0]==C&&r[a][0]==S){var w=r[a-1][1],D=r[a][1],k=this.diff_commonOverlap_(w,D),M=this.diff_commonOverlap_(D,w);k>=M?(k>=w.length/2||k>=D.length/2)&&(r.splice(a,0,new p.Diff(y,D.substring(0,k))),r[a-1][1]=w.substring(0,w.length-k),r[a+1][1]=D.substring(k),a++):(M>=w.length/2||M>=D.length/2)&&(r.splice(a,0,new p.Diff(y,w.substring(0,M))),r[a-1][0]=S,r[a-1][1]=D.substring(0,D.length-M),r[a+1][0]=C,r[a+1][1]=w.substring(M),a++),a++}a++}},p.prototype.diff_cleanupSemanticLossless=function(r){function t(M,A){if(!M||!A)return 6;var B=M.charAt(M.length-1),W=A.charAt(0),L=B.match(p.nonAlphaNumericRegex_),N=W.match(p.nonAlphaNumericRegex_),F=L&&B.match(p.whitespaceRegex_),I=N&&W.match(p.whitespaceRegex_),R=F&&B.match(p.linebreakRegex_),U=I&&W.match(p.linebreakRegex_),P=R&&M.match(p.blanklineEndRegex_),G=U&&A.match(p.blanklineStartRegex_);return P||G?5:R||U?4:L&&!F&&I?3:F||I?2:L||N?1:0}for(var i=1;i<r.length-1;){if(r[i-1][0]==y&&r[i+1][0]==y){var o=r[i-1][1],s=r[i][1],a=r[i+1][1],f=this.diff_commonSuffix(o,s);if(f){var c=s.substring(s.length-f);o=o.substring(0,o.length-f),s=c+s.substring(0,s.length-f),a=c+a}for(var v=o,b=s,w=a,D=t(o,s)+t(s,a);s.charAt(0)===a.charAt(0);){o+=s.charAt(0),s=s.substring(1)+a.charAt(0),a=a.substring(1);var k=t(o,s)+t(s,a);k>=D&&(D=k,v=o,b=s,w=a)}r[i-1][1]!=v&&(v?r[i-1][1]=v:(r.splice(i-1,1),i--),r[i][1]=b,w?r[i+1][1]=w:(r.splice(i+1,1),i--))}i++}},p.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,p.whitespaceRegex_=/\s/,p.linebreakRegex_=/[\r\n]/,p.blanklineEndRegex_=/\n\r?\n$/,p.blanklineStartRegex_=/^\r?\n\r?\n/,p.prototype.diff_cleanupEfficiency=function(r){for(var t=!1,i=[],o=0,s=null,a=0,f=!1,c=!1,v=!1,b=!1;a<r.length;)r[a][0]==y?(r[a][1].length<this.Diff_EditCost&&(v||b)?(i[o++]=a,f=v,c=b,s=r[a][1]):(o=0,s=null),v=b=!1):(r[a][0]==C?b=!0:v=!0,s&&(f&&c&&v&&b||s.length<this.Diff_EditCost/2&&f+c+v+b==3)&&(r.splice(i[o-1],0,new p.Diff(C,s)),r[i[o-1]+1][0]=S,o--,s=null,f&&c?(v=b=!0,o=0):(o--,a=o>0?i[o-1]:-1,v=b=!1),t=!0)),a++;t&&this.diff_cleanupMerge(r)},p.prototype.diff_cleanupMerge=function(r){r.push(new p.Diff(y,""));for(var t=0,i=0,o=0,s="",a="",f;t<r.length;)switch(r[t][0]){case S:o++,a+=r[t][1],t++;break;case C:i++,s+=r[t][1],t++;break;case y:i+o>1?(i!==0&&o!==0&&(f=this.diff_commonPrefix(a,s),f!==0&&(t-i-o>0&&r[t-i-o-1][0]==y?r[t-i-o-1][1]+=a.substring(0,f):(r.splice(0,0,new p.Diff(y,a.substring(0,f))),t++),a=a.substring(f),s=s.substring(f)),f=this.diff_commonSuffix(a,s),f!==0&&(r[t][1]=a.substring(a.length-f)+r[t][1],a=a.substring(0,a.length-f),s=s.substring(0,s.length-f))),t-=i+o,r.splice(t,i+o),s.length&&(r.splice(t,0,new p.Diff(C,s)),t++),a.length&&(r.splice(t,0,new p.Diff(S,a)),t++),t++):t!==0&&r[t-1][0]==y?(r[t-1][1]+=r[t][1],r.splice(t,1)):t++,o=0,i=0,s="",a="";break}r[r.length-1][1]===""&&r.pop();var c=!1;for(t=1;t<r.length-1;)r[t-1][0]==y&&r[t+1][0]==y&&(r[t][1].substring(r[t][1].length-r[t-1][1].length)==r[t-1][1]?(r[t][1]=r[t-1][1]+r[t][1].substring(0,r[t][1].length-r[t-1][1].length),r[t+1][1]=r[t-1][1]+r[t+1][1],r.splice(t-1,1),c=!0):r[t][1].substring(0,r[t+1][1].length)==r[t+1][1]&&(r[t-1][1]+=r[t+1][1],r[t][1]=r[t][1].substring(r[t+1][1].length)+r[t+1][1],r.splice(t+1,1),c=!0)),t++;c&&this.diff_cleanupMerge(r)},p.prototype.diff_xIndex=function(r,t){var i=0,o=0,s=0,a=0,f;for(f=0;f<r.length&&(r[f][0]!==S&&(i+=r[f][1].length),r[f][0]!==C&&(o+=r[f][1].length),!(i>t));f++)s=i,a=o;return r.length!=f&&r[f][0]===C?a:a+(t-s)},p.prototype.diff_prettyHtml=function(r){for(var t=[],i=/&/g,o=/</g,s=/>/g,a=/\n/g,f=0;f<r.length;f++){var c=r[f][0],v=r[f][1],b=v.replace(i,"&amp;").replace(o,"&lt;").replace(s,"&gt;").replace(a,"&para;<br>");switch(c){case S:t[f]='<ins style="background:#e6ffe6;">'+b+"</ins>";break;case C:t[f]='<del style="background:#ffe6e6;">'+b+"</del>";break;case y:t[f]="<span>"+b+"</span>";break}}return t.join("")},p.prototype.diff_text1=function(r){for(var t=[],i=0;i<r.length;i++)r[i][0]!==S&&(t[i]=r[i][1]);return t.join("")},p.prototype.diff_text2=function(r){for(var t=[],i=0;i<r.length;i++)r[i][0]!==C&&(t[i]=r[i][1]);return t.join("")},p.prototype.diff_levenshtein=function(r){for(var t=0,i=0,o=0,s=0;s<r.length;s++){var a=r[s][0],f=r[s][1];switch(a){case S:i+=f.length;break;case C:o+=f.length;break;case y:t+=Math.max(i,o),i=0,o=0;break}}return t+=Math.max(i,o),t},p.prototype.diff_toDelta=function(r){for(var t=[],i=0;i<r.length;i++)switch(r[i][0]){case S:t[i]="+"+encodeURI(r[i][1]);break;case C:t[i]="-"+r[i][1].length;break;case y:t[i]="="+r[i][1].length;break}return t.join("	").replace(/%20/g," ")},p.prototype.diff_fromDelta=function(r,t){for(var i=[],o=0,s=0,a=t.split(/\t/g),f=0;f<a.length;f++){var c=a[f].substring(1);switch(a[f].charAt(0)){case"+":try{i[o++]=new p.Diff(S,decodeURI(c))}catch{throw new Error("Illegal escape in diff_fromDelta: "+c)}break;case"-":case"=":var v=parseInt(c,10);if(isNaN(v)||v<0)throw new Error("Invalid number in diff_fromDelta: "+c);var b=r.substring(s,s+=v);a[f].charAt(0)=="="?i[o++]=new p.Diff(y,b):i[o++]=new p.Diff(C,b);break;default:if(a[f])throw new Error("Invalid diff operation in diff_fromDelta: "+a[f])}}if(s!=r.length)throw new Error("Delta length ("+s+") does not equal source text length ("+r.length+").");return i},p.prototype.match_main=function(r,t,i){if(r==null||t==null||i==null)throw new Error("Null input. (match_main)");return i=Math.max(0,Math.min(i,r.length)),r==t?0:r.length?r.substring(i,i+t.length)==t?i:this.match_bitap_(r,t,i):-1},p.prototype.match_bitap_=function(r,t,i){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var o=this.match_alphabet_(t),s=this;function a(I,R){var U=I/t.length,P=Math.abs(i-R);return s.Match_Distance?U+P/s.Match_Distance:P?1:U}var f=this.Match_Threshold,c=r.indexOf(t,i);c!=-1&&(f=Math.min(a(0,c),f),c=r.lastIndexOf(t,i+t.length),c!=-1&&(f=Math.min(a(0,c),f)));var v=1<<t.length-1;c=-1;for(var b,w,D=t.length+r.length,k,M=0;M<t.length;M++){for(b=0,w=D;b<w;)a(M,i+w)<=f?b=w:D=w,w=Math.floor((D-b)/2+b);D=w;var A=Math.max(1,i-w+1),B=Math.min(i+w,r.length)+t.length,W=Array(B+2);W[B+1]=(1<<M)-1;for(var L=B;L>=A;L--){var N=o[r.charAt(L-1)];if(M===0?W[L]=(W[L+1]<<1|1)&N:W[L]=(W[L+1]<<1|1)&N|((k[L+1]|k[L])<<1|1)|k[L+1],W[L]&v){var F=a(M,L-1);if(F<=f)if(f=F,c=L-1,c>i)A=Math.max(1,2*i-c);else break}}if(a(M+1,i)>f)break;k=W}return c},p.prototype.match_alphabet_=function(r){for(var t={},i=0;i<r.length;i++)t[r.charAt(i)]=0;for(var i=0;i<r.length;i++)t[r.charAt(i)]|=1<<r.length-i-1;return t},p.prototype.patch_addContext_=function(r,t){if(t.length!=0){if(r.start2===null)throw Error("patch not initialized");for(var i=t.substring(r.start2,r.start2+r.length1),o=0;t.indexOf(i)!=t.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)o+=this.Patch_Margin,i=t.substring(r.start2-o,r.start2+r.length1+o);o+=this.Patch_Margin;var s=t.substring(r.start2-o,r.start2);s&&r.diffs.unshift(new p.Diff(y,s));var a=t.substring(r.start2+r.length1,r.start2+r.length1+o);a&&r.diffs.push(new p.Diff(y,a)),r.start1-=s.length,r.start2-=s.length,r.length1+=s.length+a.length,r.length2+=s.length+a.length}},p.prototype.patch_make=function(r,t,i){var o,s;if(typeof r=="string"&&typeof t=="string"&&typeof i>"u")o=r,s=this.diff_main(o,t,!0),s.length>2&&(this.diff_cleanupSemantic(s),this.diff_cleanupEfficiency(s));else if(r&&typeof r=="object"&&typeof t>"u"&&typeof i>"u")s=r,o=this.diff_text1(s);else if(typeof r=="string"&&t&&typeof t=="object"&&typeof i>"u")o=r,s=t;else if(typeof r=="string"&&typeof t=="string"&&i&&typeof i=="object")o=r,s=i;else throw new Error("Unknown call format to patch_make.");if(s.length===0)return[];for(var a=[],f=new p.patch_obj,c=0,v=0,b=0,w=o,D=o,k=0;k<s.length;k++){var M=s[k][0],A=s[k][1];switch(!c&&M!==y&&(f.start1=v,f.start2=b),M){case S:f.diffs[c++]=s[k],f.length2+=A.length,D=D.substring(0,b)+A+D.substring(b);break;case C:f.length1+=A.length,f.diffs[c++]=s[k],D=D.substring(0,b)+D.substring(b+A.length);break;case y:A.length<=2*this.Patch_Margin&&c&&s.length!=k+1?(f.diffs[c++]=s[k],f.length1+=A.length,f.length2+=A.length):A.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(f,w),a.push(f),f=new p.patch_obj,c=0,w=D,v=b);break}M!==S&&(v+=A.length),M!==C&&(b+=A.length)}return c&&(this.patch_addContext_(f,w),a.push(f)),a},p.prototype.patch_deepCopy=function(r){for(var t=[],i=0;i<r.length;i++){var o=r[i],s=new p.patch_obj;s.diffs=[];for(var a=0;a<o.diffs.length;a++)s.diffs[a]=new p.Diff(o.diffs[a][0],o.diffs[a][1]);s.start1=o.start1,s.start2=o.start2,s.length1=o.length1,s.length2=o.length2,t[i]=s}return t},p.prototype.patch_apply=function(r,t){if(r.length==0)return[t,[]];r=this.patch_deepCopy(r);var i=this.patch_addPadding(r);t=i+t+i,this.patch_splitMax(r);for(var o=0,s=[],a=0;a<r.length;a++){var f=r[a].start2+o,c=this.diff_text1(r[a].diffs),v,b=-1;if(c.length>this.Match_MaxBits?(v=this.match_main(t,c.substring(0,this.Match_MaxBits),f),v!=-1&&(b=this.match_main(t,c.substring(c.length-this.Match_MaxBits),f+c.length-this.Match_MaxBits),(b==-1||v>=b)&&(v=-1))):v=this.match_main(t,c,f),v==-1)s[a]=!1,o-=r[a].length2-r[a].length1;else{s[a]=!0,o=v-f;var w;if(b==-1?w=t.substring(v,v+c.length):w=t.substring(v,b+this.Match_MaxBits),c==w)t=t.substring(0,v)+this.diff_text2(r[a].diffs)+t.substring(v+c.length);else{var D=this.diff_main(c,w,!1);if(c.length>this.Match_MaxBits&&this.diff_levenshtein(D)/c.length>this.Patch_DeleteThreshold)s[a]=!1;else{this.diff_cleanupSemanticLossless(D);for(var k=0,M,A=0;A<r[a].diffs.length;A++){var B=r[a].diffs[A];B[0]!==y&&(M=this.diff_xIndex(D,k)),B[0]===S?t=t.substring(0,v+M)+B[1]+t.substring(v+M):B[0]===C&&(t=t.substring(0,v+M)+t.substring(v+this.diff_xIndex(D,k+B[1].length))),B[0]!==C&&(k+=B[1].length)}}}}}return t=t.substring(i.length,t.length-i.length),[t,s]},p.prototype.patch_addPadding=function(r){for(var t=this.Patch_Margin,i="",o=1;o<=t;o++)i+=String.fromCharCode(o);for(var o=0;o<r.length;o++)r[o].start1+=t,r[o].start2+=t;var s=r[0],a=s.diffs;if(a.length==0||a[0][0]!=y)a.unshift(new p.Diff(y,i)),s.start1-=t,s.start2-=t,s.length1+=t,s.length2+=t;else if(t>a[0][1].length){var f=t-a[0][1].length;a[0][1]=i.substring(a[0][1].length)+a[0][1],s.start1-=f,s.start2-=f,s.length1+=f,s.length2+=f}if(s=r[r.length-1],a=s.diffs,a.length==0||a[a.length-1][0]!=y)a.push(new p.Diff(y,i)),s.length1+=t,s.length2+=t;else if(t>a[a.length-1][1].length){var f=t-a[a.length-1][1].length;a[a.length-1][1]+=i.substring(0,f),s.length1+=f,s.length2+=f}return i},p.prototype.patch_splitMax=function(r){for(var t=this.Match_MaxBits,i=0;i<r.length;i++)if(!(r[i].length1<=t)){var o=r[i];r.splice(i--,1);for(var s=o.start1,a=o.start2,f="";o.diffs.length!==0;){var c=new p.patch_obj,v=!0;for(c.start1=s-f.length,c.start2=a-f.length,f!==""&&(c.length1=c.length2=f.length,c.diffs.push(new p.Diff(y,f)));o.diffs.length!==0&&c.length1<t-this.Patch_Margin;){var b=o.diffs[0][0],w=o.diffs[0][1];b===S?(c.length2+=w.length,a+=w.length,c.diffs.push(o.diffs.shift()),v=!1):b===C&&c.diffs.length==1&&c.diffs[0][0]==y&&w.length>2*t?(c.length1+=w.length,s+=w.length,v=!1,c.diffs.push(new p.Diff(b,w)),o.diffs.shift()):(w=w.substring(0,t-c.length1-this.Patch_Margin),c.length1+=w.length,s+=w.length,b===y?(c.length2+=w.length,a+=w.length):v=!1,c.diffs.push(new p.Diff(b,w)),w==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(w.length))}f=this.diff_text2(c.diffs),f=f.substring(f.length-this.Patch_Margin);var D=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);D!==""&&(c.length1+=D.length,c.length2+=D.length,c.diffs.length!==0&&c.diffs[c.diffs.length-1][0]===y?c.diffs[c.diffs.length-1][1]+=D:c.diffs.push(new p.Diff(y,D))),v||r.splice(++i,0,c)}}},p.prototype.patch_toText=function(r){for(var t=[],i=0;i<r.length;i++)t[i]=r[i];return t.join("")},p.prototype.patch_fromText=function(r){var t=[];if(!r)return t;for(var i=r.split(`
`),o=0,s=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<i.length;){var a=i[o].match(s);if(!a)throw new Error("Invalid patch string: "+i[o]);var f=new p.patch_obj;for(t.push(f),f.start1=parseInt(a[1],10),a[2]===""?(f.start1--,f.length1=1):a[2]=="0"?f.length1=0:(f.start1--,f.length1=parseInt(a[2],10)),f.start2=parseInt(a[3],10),a[4]===""?(f.start2--,f.length2=1):a[4]=="0"?f.length2=0:(f.start2--,f.length2=parseInt(a[4],10)),o++;o<i.length;){var c=i[o].charAt(0);try{var v=decodeURI(i[o].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+v)}if(c=="-")f.diffs.push(new p.Diff(C,v));else if(c=="+")f.diffs.push(new p.Diff(S,v));else if(c==" ")f.diffs.push(new p.Diff(y,v));else{if(c=="@")break;if(c!=="")throw new Error('Invalid patch mode "'+c+'" in: '+v)}o++}}return t},p.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},p.patch_obj.prototype.toString=function(){var r,t;this.length1===0?r=this.start1+",0":this.length1==1?r=this.start1+1:r=this.start1+1+","+this.length1,this.length2===0?t=this.start2+",0":this.length2==1?t=this.start2+1:t=this.start2+1+","+this.length2;for(var i=["@@ -"+r+" +"+t+` @@
`],o,s=0;s<this.diffs.length;s++){switch(this.diffs[s][0]){case S:o="+";break;case C:o="-";break;case y:o=" ";break}i[s+1]=o+encodeURI(this.diffs[s][1])+`
`}return i.join("").replace(/%20/g," ")},x.exports=p,x.exports.diff_match_patch=p,x.exports.DIFF_DELETE=C,x.exports.DIFF_INSERT=S,x.exports.DIFF_EQUAL=y})(Ve);const wr=Ve.exports,q=Ue({folders:[],item:{}}),Cr={class:"content_area"},Dr={name:"CompareEditor"},yr=me({...Dr,setup(x){const p=ce("contentIdentity");window.diff_match_patch=wr,window.DIFF_DELETE=-1,window.DIFF_INSERT=1,window.DIFF_EQUAL=0,mr(q,p,["content"]);const C=Ue({value:"",origLeft:null,orig:"",connect:"align",mode:"text/html",lineNumbers:!0,collapseIdentical:!1,highlightDifferences:!0,allowEditingOriginals:!0});hr(()=>{const{content:y}=q.item[p.value];y.useThreeWay?y.diff||(y.diff=y.content.replace("yellow","orange")):y.diff=null,C.value=y.content,C.origLeft=y.diff,C.orig=y.compare});function S(y){const{content:r}=q.item[p.value],{type:t,data:i}=y;switch(t){case"value":r.useThreeWay?r.diff=i:r.content=i;break;case"left":r.useThreeWay&&(r.content=i);break;case"right":r.compare=i;break}}return(y,r)=>(ne(),Ce("div",Cr,[Y(fr,{"is-merge":!0,options:C,"textarea-key":"refCompare",events:[],onChange:S},null,8,["options"])]))}});const Mr=$e(yr,[["__scopeId","data-v-7a42dc18"]]),He=".compare",kr={[ue.Config]:"compare_config",[ue.Folder]:"compare_folder",[ue.Content]:"compare_content",[ue.Env]:"compare_env"};function Sr(){return{content:{useThreeWay:!1,content:"",compare:"",diff:null},isSaved:0}}const Tr={name:"CompareExport"},Fr=me({...Tr,setup(x){const p=ce("contentIdentity"),C=ce("contentName"),S=De(()=>({module:br.Typing,identity:p.value})),y=De(()=>{const r={name:C.value,content:JSON.stringify(q.item[p.value].content),suffix:He},t=gr(C.value,".");return t.length>1&&(r.suffix=`.${t[t.length-1]}`,r.name=ur(t.slice(0,t.length-1),".")),r});return(r,t)=>(ne(),ve(qe,{module:S.value,data:y.value,type:H(Re).CUSTOM,types:[H(Re).CUSTOM]},null,8,["module","data","type","types"]))}}),Er={class:"warp_bigger compare_area"},Ar={class:"show_area"},Ir={class:"tw-flex tw-justify-end tw-items-center"},Br={key:0},Lr={class:"tw-ml-4"},Nr={class:"tw-ml-2"},Or={class:"tw-mr-1"},Pr={class:"tw-ml-2"},Wr={name:"ModuleCompare"},Rr=me({...Wr,setup(x){const p=ce("storeIDB"),{curContentIdentity:C,curContentName:S,curContentFolderIdentity:y,curFolders:r,curHistoryFolders:t,addFolder:i,renameFolder:o,deleteFolder:s,sortFolder:a,createContent:f,saveContent:c,showContent:v,renameContent:b,copyContent:w,deleteContent:D,autoSaveContent:k,importContent:M}=xe(p,kr,q,Sr());J("contentFolderIdentity",y),J("contentIdentity",C),J("contentName",S),J("historyFolders",t),J("folders",r),J("addFolder",i),J("renameFolder",o),J("deleteFolder",s),J("showContent",v),J("copyContent",w),J("renameContent",b),J("deleteContent",D),J("sortFolder",a),J("saveContent",c),J("autoSaveContent",k);function A(){f()}function B(F){ee.loading=!0;const{name:I,content:R,isSave:U,folderIdentity:P}=F;M(I,R,U,P).then(()=>{ee.loading=!1}).catch(()=>{ee.loading=!1})}let W;(F=>{F.Left="left",F.Middle="middle",F.Right="right"})(W||(W={}));const L=De(()=>{const F=[{value:"left",label:ie("compare.copy.left")},{value:"right",label:ie("compare.copy.right")}];return q.item[C.value].content.useThreeWay&&F.push({value:"middle",label:ie("compare.copy.middle")}),F});function N(F){const{content:I,compare:R,diff:U}=q.item[C.value].content;F==="left"?we(I||""):F==="middle"?we(U||""):we(R||"")}return(F,I)=>(ne(),Ce("div",Er,[Y(ar,{collapse:H(ee).historyDrawer.collapse,"onUpdate:collapse":I[2]||(I[2]=R=>H(ee).historyDrawer.collapse=R),history:H(ee).historyDrawer},{default:oe(()=>[te("div",Ar,[Y(lr,{title:H(ie)("module.compare")},{titleRight:oe(()=>[te("div",Ir,[H(C)?(ne(),Ce("span",Br,[Y(er,{"store-item-data":H(q).item[H(C)]},null,8,["store-item-data"])])):We("",!0),te("span",null,[Y(_r,{checked:H(q).item[H(C)].content.useThreeWay,"onUpdate:checked":I[0]||(I[0]=R=>H(q).item[H(C)].content.useThreeWay=R),name:H(ie)("compare.threeWay")},null,8,["checked","name"])]),te("span",Lr,[Y(rr,{"support-types":["text/plain"],accept:[H(He)],onSelect:A,onContent:B},null,8,["accept"])]),te("span",Nr,[Y(tr,{data:L.value,onSelected:N},{anchor:oe(()=>[Y(sr,{type:"primary"},{default:oe(()=>[te("span",Or,cr(H(ie)("tags.copy")),1),Y(pr,{type:H(dr).DownOutlined,size:"xs"},null,8,["type"])]),_:1})]),_:1},8,["data"])]),te("span",Pr,[Y(Fr)]),Y(nr,vr({class:"tw-ml-2"},F.$attrs),null,16),H(ee).historyDrawer.collapse?(ne(),ve(ir,{key:1,class:"tw-ml-2",visible:H(ee).historyDrawer.visible,"onUpdate:visible":I[1]||(I[1]=R=>H(ee).historyDrawer.visible=R)},null,8,["visible"])):We("",!0)])]),default:oe(()=>[(ne(),ve(Mr,{key:`${H(C)}_${H(q).item[H(C)].content.useThreeWay}`}))]),_:1},8,["title"])])]),_:1},8,["collapse","history"])]))}});const Ur=$e(Rr,[["__scopeId","data-v-66b969ce"]]),mt=me({__name:"Compare",setup(x){return(p,C)=>(ne(),ve(Ur))}});export{mt as default};
