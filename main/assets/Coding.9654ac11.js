import{q as J,bf as b,d as $,b as q,aj as B,o as f,x as C,K as T,c as F,a1 as R,$ as e,be as mt,a4 as r,g as v,br as S,S as s,t as dt,di as _t,s as yt,a as x,w as d,at as ht,v as _,a0 as vt,y as M}from"./index.aa9234e1.js";import{U as wt}from"./UIWithTitle.3e9cc2fb.js";import{b as Ct,c as kt,d as bt,e as St,U as Ft}from"./UICreateImport.vue_vue_type_script_setup_true_lang.9e2ebb42.js";import{_ as H}from"./DButton.vue_vue_type_script_setup_true_lang.8a7aefad.js";import{d as It}from"./copyLib.306a4c72.js";import{_ as $t}from"./DSelect.vue_vue_type_script_setup_true_lang.89f47b6a.js";import{_ as jt}from"./DCodeMirror.vue_vue_type_script_setup_true_lang.6eba92fc.js";import{u as Dt}from"./ModuleAutoSaveLib.f5c63669.js";import{_ as V}from"./_plugin-vue_export-helper.cdc0426e.js";import{u as Nt}from"./PortImport.vue_vue_type_script_setup_true_lang.a38e66cd.js";import{D as Ut}from"./DTooltip.b8cdb8df.js";import{_ as gt,a as Mt}from"./Interface.fda4bb57.js";import{g as qt}from"./fileLib.3a4ae2a3.js";import"./ModuleCollapsetLib.88db3687.js";import"./routeLib.390f25a1.js";import"./findIndex.a88ac902.js";import"./hasIn.8d781537.js";import"./memoize.4464d5ef.js";import"./_baseIsEqual.3d349b77.js";import"./index.c23fe160.js";import"./KeyCode.9e37adda.js";import"./pick.efc0f760.js";import"./_flatRest.64809e56.js";import"./styleChecker.86ed2c0d.js";import"./debounce.e33dc256.js";import"./now.24a82a2d.js";import"./DResult.vue_vue_type_script_setup_true_lang.89b79348.js";import"./DSpin.54dd59a3.js";import"./config.aa76b2c0.js";import"./codemirror.e612adcd.js";import"./randomLib.04c6c9cc.js";import"./stringify.15412eb9.js";const p=J({folders:[],item:{}}),w=".coding",Bt={[b.Config]:"coding_config",[b.Folder]:"coding_folder",[b.Content]:"coding_content",[b.Env]:"coding_env"};var P=(t=>(t.C="text/x-csrc",t.CPP="text/x-c++src",t.CSharp="text/x-csharp",t.Css="text/css",t.Dockerfile="text/x-dockerfile",t.ErLang="text/x-erlang",t.Go="text/x-go",t.Html="text/html",t.Java="text/x-java",t.Javascript="text/javascript",t.Json="application/json",t.Kotlin="text/x-kotlin",t.Less="text/x-less",t.Lua="text/lua",t.Markdown="text/markdown",t.Nginx="text/x-nginx-conf",t.PHP="text/x-php",t.Protobuf="text/x-protobuf",t.Python="text/x-python",t.Ruby="text/x-ruby",t.Sass="text/x-scss",t.Shell="text/x-sh",t.Sql="text/x-sql",t.Scala="text/x-scala",t.Swift="text/x-swift",t.Text="text",t.Xml="application/xml",t.Yaml="application/x-yaml",t))(P||{});const I={["text/x-csrc"]:{types:["text/x-csrc"],suffixes:[".c",".h"]},["text/x-c++src"]:{types:["text/x-c++src"],suffixes:[".cpp"]},["text/x-csharp"]:{types:["text/x-csharp"],suffixes:[".cs",".aspx"]},["text/css"]:{types:["text/x-csrc"],suffixes:[".css"]},["text/x-dockerfile"]:{types:["text/x-dockerfile"],suffixes:[""]},["text/x-erlang"]:{types:["text/x-erlange"],suffixes:[".erl",".hrl"]},["text/x-go"]:{types:["text/x-go"],suffixes:[".go"]},["text/html"]:{types:["text/html"],suffixes:[".html",".htm"]},["text/x-java"]:{types:["text/x-java"],suffixes:[".java",".jsp"]},["text/javascript"]:{types:["text/javascript"],suffixes:[".ts",".js",".jsx",".vue"]},["text/x-kotlin"]:{types:["text/x-kotlin"],suffixes:[".kt"]},["text/x-less"]:{types:["text/x-less"],suffixes:[".less"]},["text/lua"]:{types:["text/lua"],suffixes:[".lua"]},["text/markdown"]:{types:["text/markdown"],suffixes:[".md"]},["text/x-nginx-conf"]:{types:["text/x-nginx-conf"],suffixes:[".conf"]},["text/x-php"]:{types:["text/x-php","text/php"],suffixes:[".php"]},["text/x-protobuf"]:{types:["text/x-protobuf"],suffixes:[".proto"]},["text/x-python"]:{types:["text/x-python","text/x-python-script"],suffixes:[".py"]},["text/x-ruby"]:{types:["text/x-ruby"],suffixes:[".rb",".ruby"]},["text/x-scss"]:{types:["text/x-scss"],suffixes:[".sass"]},["text/x-sh"]:{types:["text/x-sh"],suffixes:[".sh"]},["text/x-sql"]:{types:["text/x-sql"],suffixes:[".sql"]},["text/x-scala"]:{types:["text/x-scala"],suffixes:[".scala"]},["text/x-swift"]:{types:["text/x-swift"],suffixes:[".swift"]},text:{types:["text","text/plain"],suffixes:[".txt"]},["application/xml"]:{types:["application/xml"],suffixes:[".xml"]},["application/x-yaml"]:{types:["application/x-yaml"],suffixes:[".yaml",".yml"]},["application/json"]:{types:["application/json"],suffixes:[".json"]}};function Tt(){return{content:{mode:"text",content:"",suffix:{origin:"",current:I.text.suffixes[0]}},isSaved:0}}const Pt={name:"CodingLang"},At=$({...Pt,props:{mode:{}},emits:["update:mode"],setup(t,{emit:c}){const u=t,y=q(()=>{const n=[];return B(P,(m,h)=>{n.push({label:h,value:m})}),n}),a=q({get:()=>u.mode,set:n=>c("update:mode",n)});return(n,m)=>(f(),C($t,{"show-search":!0,style:{"min-width":"120px"},select:a.value,"onUpdate:select":m[0]||(m[0]=h=>a.value=h),options:y.value},null,8,["select","options"]))}}),Ht={class:"coding-content"},Jt={name:"CodingEditor"},Rt=$({...Jt,setup(t){const c=T("contentIdentity"),u=T("contentName");return Dt(p,c,["content"],u),(y,a)=>(f(),F("div",Ht,[(f(),C(jt,R(y.$attrs,{"is-use-format":!0,mode:e(p).item[e(c)].content.mode,key:e(c),theme:e(mt)[e(r).theme.current],"textarea-key":e(c),value:e(p).item[e(c)].content.content,"onUpdate:value":a[0]||(a[0]=n=>e(p).item[e(c)].content.content=n)}),null,16,["mode","theme","textarea-key","value"]))]))}});const Vt=V(Rt,[["__scopeId","data-v-4189cfa2"]]),Kt={class:"warp_bigger coding_area"},Ot={key:0,class:"show_area"},Wt={class:"tw-text-sm"},zt={class:"tw-flex tw-justify-end tw-items-center"},Gt={key:0},Xt={class:"tw-ml-4"},Yt={class:"tw-ml-2"},Qt={class:"tw-ml-2"},Zt={class:"tw-ml-2"},Et={name:"ModuleCoding"},Lt=$({...Et,setup(t){const c=T("storeIDB"),u=q(()=>{switch(r.os){case S.Mac:return v("coding.notice.quick.mac");case S.Linux:case S.Unix:case S.Win:default:return v("coding.notice.quick.win")}}),{curIsSaved:y,curContentIdentity:a,curContentName:n,curContentFolderIdentity:m,curFolders:h,curHistoryFolders:K,addFolder:O,renameFolder:W,deleteFolder:z,sortFolder:G,createContent:X,saveContent:Y,showContent:Q,renameContent:Z,copyContent:E,deleteContent:L,autoSaveContent:tt,importContent:et,getContent:st,saveFolder:ot,saveContentItem:at}=Nt(c,Bt,p,Tt());s("contentIsSaved",y),s("contentFolderIdentity",m),s("contentIdentity",a),s("contentName",n),s("historyFolders",K),s("folders",h),s("addFolder",O),s("renameFolder",W),s("deleteFolder",z),s("showContent",Q),s("copyContent",E),s("renameContent",Z),s("deleteContent",L),s("sortFolder",G),s("saveContent",Y),s("autoSaveContent",tt),s("getContent",st),s("saveFolder",ot),s("saveContentItem",at);const k=J({support:[],accept:""});dt(()=>{let l=[],o=[];B(I,i=>{const{suffixes:D,types:N}=i;l=[...l,...N],o=[...o,...D]}),k.support=l,k.accept=_t(o,",")+`,${w}`});function nt(){X()}function it(l){r.loading=!0;const{name:o,content:i,type:D,isSave:N,folderIdentity:xt}=l;let U=qt(o),g;if(U!==w){let A="";B(I,(ft,ut)=>{if(ft.types.includes(D))return A=ut,!1});const pt=A||P.Text;g={content:i,mode:pt,suffix:{origin:U,current:U}}}else g=i;et(o,g,N,xt,w).then(()=>{r.loading=!1}).catch(()=>{r.loading=!1})}const j=yt(!1);function rt(){j.value=!0}function ct(){It(p.item[a.value].content.content||"")}function lt(l){const{content:o}=p.item[a.value];o.mode=l,o.suffix.current=I[l].suffixes[0]}return(l,o)=>(f(),F("div",Kt,[x(Ft,{collapse:e(r).historyDrawer.collapse,"onUpdate:collapse":o[3]||(o[3]=i=>e(r).historyDrawer.collapse=i),history:e(r).historyDrawer,suffix:e(w)},{default:d(()=>[e(a)?(f(),F("div",Ot,[x(wt,{title:e(v)(`module.${e(r).module}`),contentName:e(n),"onUpdate:contentName":o[2]||(o[2]=i=>ht(n)?n.value=i:null),"is-has-name":!0},{titleLeft:d(()=>[x(Ut,null,{anchor:d(()=>[x(gt,{type:e(Mt).ExclamationCircleOutlined,size:"sm"},null,8,["type"])]),default:d(()=>[_("span",Wt,vt(u.value),1)]),_:1})]),titleRight:d(()=>[_("div",zt,[e(a)?(f(),F("span",Gt,[x(Ct,{"store-item-data":e(p).item[e(a)]},null,8,["store-item-data"])])):M("",!0),_("span",Xt,[x(At,{mode:e(p).item[e(a)].content.mode||"","onUpdate:mode":lt},null,8,["mode"])]),_("span",Yt,[x(kt,{"support-types":k.support,accept:k.accept,"store-item-data":e(p).item[e(a)],suffix:e(w),"is-use-export-use":!0,onSelect:nt,onContent:it},null,8,["support-types","accept","store-item-data","suffix"])]),_("span",Qt,[x(H,{name:e(v)("coding.code.format"),onClick:rt},null,8,["name"])]),_("span",Zt,[x(H,{type:"primary",name:e(v)("tags.copy"),onClick:ct},null,8,["name"])]),x(bt,R({class:"tw-ml-2"},l.$attrs),null,16),e(r).historyDrawer.collapse?(f(),C(St,{key:1,class:"tw-ml-2",visible:e(r).historyDrawer.visible,"onUpdate:visible":o[0]||(o[0]=i=>e(r).historyDrawer.visible=i)},null,8,["visible"])):M("",!0)])]),default:d(()=>[(f(),C(Vt,{key:e(a),"is-format":j.value,"onUpdate:isFormat":o[1]||(o[1]=i=>j.value=i)},null,8,["is-format"]))]),_:1},8,["title","contentName"])])):M("",!0)]),_:1},8,["collapse","history","suffix"])]))}});const te=V(Lt,[["__scopeId","data-v-5a9f209e"]]),Me=$({__name:"Coding",setup(t){return(c,u)=>(f(),C(te))}});export{Me as default};
