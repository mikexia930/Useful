import{_ as Q}from"./DMarkdown.vue_vue_type_script_setup_true_lang.e94416e7.js";import{bd as f,q as Z,d as T,Y as x,o as c,c as C,a as r,a7 as t,a0 as e,g as p,w as _,aa as s,aq as tt,v as g,y as I,X as et,a8 as nt,x as F}from"./index.faab34ef.js";import{u as ot}from"./ModuleAutoSaveLib.9e4c0c9c.js";import{_ as k}from"./_plugin-vue_export-helper.cdc0426e.js";import{U as st}from"./UIWithTitle.0e5eec4c.js";import{b as at,c as rt,a as it,d as lt,e as mt,U as ct}from"./UICreateImport.vue_vue_type_script_setup_true_lang.511ce074.js";import{u as dt}from"./PortImport.vue_vue_type_script_setup_true_lang.b70e4ab0.js";import{_ as pt}from"./DButton.vue_vue_type_script_setup_true_lang.cdf87bb8.js";import{b as _t,E as ut}from"./Interface.626ae8f0.js";import{d as b}from"./copyLib.a3b1e3c2.js";import{E as v}from"./config.4ba8fdea.js";import"./memoize.4bde03d7.js";import"./fileLib.41837830.js";import"./DTooltip.28ab5894.js";import"./_baseIsEqual.35b9df4a.js";import"./ModuleCollapsetLib.21ae146e.js";import"./routeLib.73e87531.js";import"./findIndex.8f62b537.js";import"./hasIn.6feb23c8.js";import"./index.1434d5a1.js";import"./KeyCode.9e37adda.js";import"./pick.7ac0dd93.js";import"./_flatRest.64e8233e.js";import"./DSelect.vue_vue_type_script_setup_true_lang.d651249f.js";import"./styleChecker.fbdd00d2.js";import"./debounce.19eb1104.js";import"./now.b82f2ad8.js";import"./DResult.vue_vue_type_script_setup_true_lang.79754a0a.js";import"./DSpin.db87b73c.js";import"./randomLib.04c6c9cc.js";import"./stringify.15412eb9.js";const yt="ed",h=".md",ft={[f.Config]:"typing_config",[f.Folder]:"typing_folder",[f.Content]:"typing_content",[f.Env]:"typing_env"};function gt(){return{content:{content:"",html:""},isSaved:0}}const m=Z({folders:[],item:{}}),vt={class:"typing-content"},ht={name:"TypingEditor"},Ct=T({...ht,setup($){const i=x("contentIdentity"),n=x("contentName");ot(m,i,["content"],n);function d(u){m.item[i.value].content.html=u}return(u,y)=>(c(),C("div",vt,[r(Q,{"show-code-row-number":!0,"text-identity":`${t(yt)}-${t(i)}`,content:t(m).item[t(i)].content.content,"onUpdate:content":y[0]||(y[0]=w=>t(m).item[t(i)].content.content=w),style:{height:"100%"},onOnHtmlChanged:d},null,8,["text-identity","content"])]))}});const wt=k(Ct,[["__scopeId","data-v-ed359743"]]),It={class:"warp_bigger format_area"},xt={key:0,class:"show_area"},Ft={class:"tw-flex tw-justify-end tw-items-center"},Tt={key:0},$t={class:"tw-ml-2"},Dt={class:"tw-ml-2"},bt={class:"tw-mr-1"},kt={name:"ModuleTyping"},Et=T({...kt,setup($){const i=x("storeIDB"),{curContentIdentity:n,curContentName:d,curContentFolderIdentity:u,curFolders:y,curHistoryFolders:w,curIsSaved:E,addFolder:S,renameFolder:N,deleteFolder:U,sortFolder:B,createContent:M,saveContent:H,showContent:V,renameContent:O,copyContent:P,deleteContent:j,autoSaveContent:q,importContent:R,getContent:z,saveFolder:A,saveContentItem:L}=dt(i,ft,m,gt());e("contentIsSaved",E),e("contentFolderIdentity",u),e("contentIdentity",n),e("contentName",d),e("historyFolders",w),e("folders",y),e("addFolder",S),e("renameFolder",N),e("deleteFolder",U),e("showContent",V),e("copyContent",P),e("renameContent",O),e("deleteContent",j),e("sortFolder",B),e("saveContent",H),e("autoSaveContent",q),e("getContent",z),e("saveFolder",A),e("saveContentItem",L);function W(){M()}function X(l){s.loading=!0;const{name:o,content:a,isSave:J,folderIdentity:K}=l;R(o,{content:a},J,K,h).then(()=>{s.loading=!1}).catch(()=>{s.loading=!1})}let D;(l=>{l.Markdown="markdown",l.Html="html"})(D||(D={}));const Y=[{value:"markdown",label:p("typing.markdownValue")},{value:"html",label:p("typing.htmlValue")}];function G(l){const{html:o,content:a}=m.item[n.value].content;l==="markdown"?b(a||""):b(o||"")}return(l,o)=>(c(),C("div",It,[r(ct,{collapse:t(s).historyDrawer.collapse,"onUpdate:collapse":o[2]||(o[2]=a=>t(s).historyDrawer.collapse=a),history:t(s).historyDrawer,suffix:t(h)},{default:_(()=>[t(n)?(c(),C("div",xt,[r(st,{title:t(p)(`module.${t(s).module}`),contentName:t(d),"onUpdate:contentName":o[1]||(o[1]=a=>tt(d)?d.value=a:null),"is-has-name":!0},{titleRight:_(()=>[g("div",Ft,[t(n)?(c(),C("span",Tt,[r(at,{"store-item-data":t(m).item[t(n)]},null,8,["store-item-data"])])):I("",!0),g("span",$t,[r(rt,{"support-types":["text/markdown"],accept:[t(h)],"un-support-msg":t(p)("port.mdOnly"),"store-item-data":t(m).item[t(n)],suffix:t(h),type:t(v).MD,types:[t(v).MD,t(v).PDF,t(v).HTML],onSelect:W,onContent:X},null,8,["accept","un-support-msg","store-item-data","suffix","type","types"])]),g("span",Dt,[r(it,{data:Y,onSelected:G},{anchor:_(()=>[r(pt,{type:"primary"},{default:_(()=>[g("span",bt,et(t(p)("tags.copy")),1),r(_t,{type:t(ut).DownOutlined,size:"xs"},null,8,["type"])]),_:1})]),_:1})]),r(lt,nt({class:"tw-ml-2"},l.$attrs),null,16),t(s).historyDrawer.collapse?(c(),F(mt,{key:1,class:"tw-ml-2",visible:t(s).historyDrawer.visible,"onUpdate:visible":o[0]||(o[0]=a=>t(s).historyDrawer.visible=a)},null,8,["visible"])):I("",!0)])]),default:_(()=>[(c(),F(wt,{key:t(n)}))]),_:1},8,["title","contentName"])])):I("",!0)]),_:1},8,["collapse","history","suffix"])]))}});const St=k(Et,[["__scopeId","data-v-903c76fb"]]),me=T({__name:"Typing",setup($){return(i,n)=>(c(),F(St))}});export{me as default};
