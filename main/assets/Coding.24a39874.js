import{y as J,d as $,m as B,o as f,H as C,a8 as q,c as S,ai as O,ag as e,cO as mt,s as r,cU as F,ab as s,B as dt,cY as _t,z as yt,k as x,G as d,aw as ht,F as _,ah as vt,I as M}from"./index.3deece30.js";import{c as I}from"./routeLib.d176ac8b.js";import{U as wt}from"./UIWithTitle.42167c64.js";import{u as Ct,b as kt,c as Ft,d as It,e as St,U as bt}from"./UICreateImport.vue_vue_type_script_setup_true_lang.08e51745.js";import{g as v}from"./lib.5292314e.js";import{_ as A}from"./DButton.vue_vue_type_script_setup_true_lang.e0a6fca6.js";import{d as $t}from"./copyLib.1fee6c38.js";import{a as jt,D as Dt}from"./DInput.vue_vue_type_script_setup_true_lang.8d83bae6.js";import{f as T}from"./forEach.79d0bc65.js";import{_ as Nt}from"./DCodeMirror.vue_vue_type_script_setup_true_lang.56fb46d0.js";import{u as Ut}from"./ModuleAutoSaveLib.910abb99.js";import{_ as R}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as gt,a as Mt}from"./Interface.8f0a6e0f.js";import{g as Bt}from"./config.d3a4b33d.js";import"./dateLib.63528a18.js";import"./dayjs.min.6c47bd3a.js";import"./advancedFormat.16ff0fee.js";import"./DSpin.b0f7577d.js";import"./hasIn.cdc63c80.js";import"./memoize.06af567a.js";import"./identity.e17c3348.js";import"./findIndex.d1b8ede5.js";import"./_baseIsEqual.7ab21e0d.js";import"./styleChecker.8c6099b5.js";import"./index.545ec4e7.js";import"./pick.5b01df1c.js";import"./randomLib.04c6c9cc.js";import"./stringify.15412eb9.js";import"./codemirror.5457daa7.js";const p=J({folders:[],item:{}}),w=".coding",qt={[I.Config]:"coding_config",[I.Folder]:"coding_folder",[I.Content]:"coding_content",[I.Env]:"coding_env"};var P=(t=>(t.C="text/x-csrc",t.CPP="text/x-c++src",t.CSharp="text/x-csharp",t.Css="text/css",t.Dockerfile="text/x-dockerfile",t.ErLang="text/x-erlang",t.Go="text/x-go",t.Html="text/html",t.Java="text/x-java",t.Javascript="text/javascript",t.Json="application/json",t.Kotlin="text/x-kotlin",t.Less="text/x-less",t.Lua="text/lua",t.Markdown="text/markdown",t.Nginx="text/x-nginx-conf",t.PHP="text/x-php",t.Protobuf="text/x-protobuf",t.Python="text/x-python",t.Ruby="text/x-ruby",t.Sass="text/x-scss",t.Shell="text/x-sh",t.Sql="text/x-sql",t.Scala="text/x-scala",t.Swift="text/x-swift",t.Text="text",t.Xml="application/xml",t.Yaml="application/x-yaml",t))(P||{});const b={["text/x-csrc"]:{types:["text/x-csrc"],suffixes:[".c",".h"]},["text/x-c++src"]:{types:["text/x-c++src"],suffixes:[".cpp"]},["text/x-csharp"]:{types:["text/x-csharp"],suffixes:[".cs",".aspx"]},["text/css"]:{types:["text/x-csrc"],suffixes:[".css"]},["text/x-dockerfile"]:{types:["text/x-dockerfile"],suffixes:[""]},["text/x-erlang"]:{types:["text/x-erlange"],suffixes:[".erl",".hrl"]},["text/x-go"]:{types:["text/x-go"],suffixes:[".go"]},["text/html"]:{types:["text/html"],suffixes:[".html",".htm"]},["text/x-java"]:{types:["text/x-java"],suffixes:[".java",".jsp"]},["text/javascript"]:{types:["text/javascript"],suffixes:[".ts",".js",".jsx",".vue"]},["text/x-kotlin"]:{types:["text/x-kotlin"],suffixes:[".kt"]},["text/x-less"]:{types:["text/x-less"],suffixes:[".less"]},["text/lua"]:{types:["text/lua"],suffixes:[".lua"]},["text/markdown"]:{types:["text/markdown"],suffixes:[".md"]},["text/x-nginx-conf"]:{types:["text/x-nginx-conf"],suffixes:[".conf"]},["text/x-php"]:{types:["text/x-php","text/php"],suffixes:[".php"]},["text/x-protobuf"]:{types:["text/x-protobuf"],suffixes:[".proto"]},["text/x-python"]:{types:["text/x-python","text/x-python-script"],suffixes:[".py"]},["text/x-ruby"]:{types:["text/x-ruby"],suffixes:[".rb",".ruby"]},["text/x-scss"]:{types:["text/x-scss"],suffixes:[".sass"]},["text/x-sh"]:{types:["text/x-sh"],suffixes:[".sh"]},["text/x-sql"]:{types:["text/x-sql"],suffixes:[".sql"]},["text/x-scala"]:{types:["text/x-scala"],suffixes:[".scala"]},["text/x-swift"]:{types:["text/x-swift"],suffixes:[".swift"]},text:{types:["text","text/plain"],suffixes:[".txt"]},["application/xml"]:{types:["application/xml"],suffixes:[".xml"]},["application/x-yaml"]:{types:["application/x-yaml"],suffixes:[".yaml",".yml"]},["application/json"]:{types:["application/json"],suffixes:[".json"]}};function Tt(){return{content:{mode:"text",content:"",suffix:{origin:"",current:b.text.suffixes[0]}},isSaved:0}}const Pt={name:"CodingLang"},Ht=$({...Pt,props:{mode:{}},emits:["update:mode"],setup(t,{emit:c}){const u=t,y=B(()=>{const n=[];return T(P,(m,h)=>{n.push({label:h,value:m})}),n}),a=B({get:()=>u.mode,set:n=>c("update:mode",n)});return(n,m)=>(f(),C(jt,{"show-search":!0,style:{"min-width":"120px"},select:a.value,"onUpdate:select":m[0]||(m[0]=h=>a.value=h),options:y.value},null,8,["select","options"]))}}),At={class:"coding-content"},Jt={name:"CodingEditor"},Ot=$({...Jt,setup(t){const c=q("contentIdentity"),u=q("contentName");return Ut(p,c,["content"],u),(y,a)=>(f(),S("div",At,[(f(),C(Nt,O(y.$attrs,{"is-use-format":!0,mode:e(p).item[e(c)].content.mode,key:e(c),theme:e(mt)[e(r).theme.current],"textarea-key":e(c),value:e(p).item[e(c)].content.content,"onUpdate:value":a[0]||(a[0]=n=>e(p).item[e(c)].content.content=n)}),null,16,["mode","theme","textarea-key","value"]))]))}});const Rt=R(Ot,[["__scopeId","data-v-4189cfa2"]]),Vt={class:"warp_bigger coding_area"},zt={key:0,class:"show_area"},Gt={class:"tw-text-sm"},Wt={class:"tw-flex tw-justify-end tw-items-center"},Yt={key:0},Kt={class:"tw-ml-4"},Xt={class:"tw-ml-2"},Qt={class:"tw-ml-2"},Zt={class:"tw-ml-2"},Et={name:"ModuleCoding"},Lt=$({...Et,setup(t){const c=q("storeIDB"),u=B(()=>{switch(r.os){case F.Mac:return v("coding.notice.quick.mac");case F.Linux:case F.Unix:case F.Win:default:return v("coding.notice.quick.win")}}),{curIsSaved:y,curContentIdentity:a,curContentName:n,curContentFolderIdentity:m,curFolders:h,curHistoryFolders:V,addFolder:z,renameFolder:G,deleteFolder:W,sortFolder:Y,createContent:K,saveContent:X,showContent:Q,renameContent:Z,copyContent:E,deleteContent:L,autoSaveContent:tt,importContent:et,getContent:st,saveFolder:ot,saveContentItem:at}=Ct(c,qt,p,Tt());s("contentIsSaved",y),s("contentFolderIdentity",m),s("contentIdentity",a),s("contentName",n),s("historyFolders",V),s("folders",h),s("addFolder",z),s("renameFolder",G),s("deleteFolder",W),s("showContent",Q),s("copyContent",E),s("renameContent",Z),s("deleteContent",L),s("sortFolder",Y),s("saveContent",X),s("autoSaveContent",tt),s("getContent",st),s("saveFolder",ot),s("saveContentItem",at);const k=J({support:[],accept:""});dt(()=>{let l=[],o=[];T(b,i=>{const{suffixes:D,types:N}=i;l=[...l,...N],o=[...o,...D]}),k.support=l,k.accept=_t(o,",")+`,${w}`});function nt(){K()}function it(l){r.loading=!0;const{name:o,content:i,type:D,isSave:N,folderIdentity:xt}=l;let U=Bt(o),g;if(U!==w){let H="";T(b,(ft,ut)=>{if(ft.types.includes(D))return H=ut,!1});const pt=H||P.Text;g={content:i,mode:pt,suffix:{origin:U,current:U}}}else g=i;et(o,g,N,xt,w).then(()=>{r.loading=!1}).catch(()=>{r.loading=!1})}const j=yt(!1);function rt(){j.value=!0}function ct(){$t(p.item[a.value].content.content||"")}function lt(l){const{content:o}=p.item[a.value];o.mode=l,o.suffix.current=b[l].suffixes[0]}return(l,o)=>(f(),S("div",Vt,[x(bt,{collapse:e(r).historyDrawer.collapse,"onUpdate:collapse":o[3]||(o[3]=i=>e(r).historyDrawer.collapse=i),history:e(r).historyDrawer,suffix:e(w)},{default:d(()=>[e(a)?(f(),S("div",zt,[x(wt,{title:e(v)(`module.${e(r).module}`),contentName:e(n),"onUpdate:contentName":o[2]||(o[2]=i=>ht(n)?n.value=i:null),"is-has-name":!0},{titleLeft:d(()=>[x(Dt,null,{anchor:d(()=>[x(gt,{type:e(Mt).ExclamationCircleOutlined,size:"sm"},null,8,["type"])]),default:d(()=>[_("span",Gt,vt(u.value),1)]),_:1})]),titleRight:d(()=>[_("div",Wt,[e(a)?(f(),S("span",Yt,[x(kt,{"store-item-data":e(p).item[e(a)]},null,8,["store-item-data"])])):M("",!0),_("span",Kt,[x(Ht,{mode:e(p).item[e(a)].content.mode||"","onUpdate:mode":lt},null,8,["mode"])]),_("span",Xt,[x(Ft,{"support-types":k.support,accept:k.accept,"store-item-data":e(p).item[e(a)],suffix:e(w),"is-use-export-use":!0,onSelect:nt,onContent:it},null,8,["support-types","accept","store-item-data","suffix"])]),_("span",Qt,[x(A,{name:e(v)("coding.code.format"),onClick:rt},null,8,["name"])]),_("span",Zt,[x(A,{type:"primary",name:e(v)("tags.copy"),onClick:ct},null,8,["name"])]),x(It,O({class:"tw-ml-2"},l.$attrs),null,16),e(r).historyDrawer.collapse?(f(),C(St,{key:1,class:"tw-ml-2",visible:e(r).historyDrawer.visible,"onUpdate:visible":o[0]||(o[0]=i=>e(r).historyDrawer.visible=i)},null,8,["visible"])):M("",!0)])]),default:d(()=>[(f(),C(Rt,{key:e(a),"is-format":j.value,"onUpdate:isFormat":o[1]||(o[1]=i=>j.value=i)},null,8,["is-format"]))]),_:1},8,["title","contentName"])])):M("",!0)]),_:1},8,["collapse","history","suffix"])]))}});const te=R(Lt,[["__scopeId","data-v-5a9f209e"]]),Ne=$({__name:"Coding",setup(t){return(c,u)=>(f(),C(te))}});export{Ne as default};
