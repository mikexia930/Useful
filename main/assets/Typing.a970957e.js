import{_ as Y}from"./DMarkdown.vue_vue_type_script_setup_true_lang.0fc6ffef.js";import{c as f}from"./routeLib.d176ac8b.js";import{y as Z,d as T,a8 as x,o as m,c as C,k as r,ag as t,ab as e,G as p,s,aw as tt,F as g,I,ah as et,ai as nt,H as F}from"./index.3deece30.js";import{u as ot}from"./ModuleAutoSaveLib.910abb99.js";import{_ as b}from"./_plugin-vue_export-helper.cdc0426e.js";import{U as st}from"./UIWithTitle.42167c64.js";import{u as at,b as rt,c as it,a as lt,d as ct,e as mt,U as dt}from"./UICreateImport.vue_vue_type_script_setup_true_lang.08e51745.js";import{g as _}from"./lib.5292314e.js";import{_ as pt}from"./DButton.vue_vue_type_script_setup_true_lang.e0a6fca6.js";import{_ as _t,a as ut}from"./Interface.8f0a6e0f.js";import{d as k}from"./copyLib.1fee6c38.js";import{E as h}from"./config.d3a4b33d.js";import"./dayjs.min.6c47bd3a.js";import"./memoize.06af567a.js";import"./imageLib.03284e0d.js";import"./dateLib.63528a18.js";import"./advancedFormat.16ff0fee.js";import"./forEach.79d0bc65.js";import"./identity.e17c3348.js";import"./DInput.vue_vue_type_script_setup_true_lang.8d83bae6.js";import"./_baseIsEqual.7ab21e0d.js";import"./DSpin.b0f7577d.js";import"./hasIn.cdc63c80.js";import"./findIndex.d1b8ede5.js";import"./styleChecker.8c6099b5.js";import"./index.545ec4e7.js";import"./pick.5b01df1c.js";import"./randomLib.04c6c9cc.js";import"./stringify.15412eb9.js";const yt="ed",v=".md",ft={[f.Config]:"typing_config",[f.Folder]:"typing_folder",[f.Content]:"typing_content",[f.Env]:"typing_env"};function gt(){return{content:{content:"",html:""},isSaved:0}}const c=Z({folders:[],item:{}}),ht={class:"typing-content"},vt={name:"TypingEditor"},Ct=T({...vt,setup($){const i=x("contentIdentity"),n=x("contentName");ot(c,i,["content"],n);function d(u){c.item[i.value].content.html=u}return(u,y)=>(m(),C("div",ht,[r(Y,{"show-code-row-number":!0,"text-identity":`${t(yt)}-${t(i)}`,content:t(c).item[t(i)].content.content,"onUpdate:content":y[0]||(y[0]=w=>t(c).item[t(i)].content.content=w),style:{height:"100%"},onOnHtmlChanged:d},null,8,["text-identity","content"])]))}});const wt=b(Ct,[["__scopeId","data-v-ed359743"]]),It={class:"warp_bigger format_area"},xt={key:0,class:"show_area"},Ft={class:"tw-flex tw-justify-end tw-items-center"},Tt={key:0},$t={class:"tw-ml-2"},Dt={class:"tw-ml-2"},kt={class:"tw-mr-1"},bt={name:"ModuleTyping"},St=T({...bt,setup($){const i=x("storeIDB"),{curContentIdentity:n,curContentName:d,curContentFolderIdentity:u,curFolders:y,curHistoryFolders:w,curIsSaved:S,addFolder:E,renameFolder:N,deleteFolder:U,sortFolder:B,createContent:M,saveContent:H,showContent:V,renameContent:O,copyContent:P,deleteContent:j,autoSaveContent:R,importContent:z,getContent:A,saveFolder:G,saveContentItem:L}=at(i,ft,c,gt());e("contentIsSaved",S),e("contentFolderIdentity",u),e("contentIdentity",n),e("contentName",d),e("historyFolders",w),e("folders",y),e("addFolder",E),e("renameFolder",N),e("deleteFolder",U),e("showContent",V),e("copyContent",P),e("renameContent",O),e("deleteContent",j),e("sortFolder",B),e("saveContent",H),e("autoSaveContent",R),e("getContent",A),e("saveFolder",G),e("saveContentItem",L);function W(){M()}function q(l){s.loading=!0;const{name:o,content:a,isSave:Q,folderIdentity:X}=l;z(o,{content:a},Q,X,v).then(()=>{s.loading=!1}).catch(()=>{s.loading=!1})}let D;(l=>{l.Markdown="markdown",l.Html="html"})(D||(D={}));const J=[{value:"markdown",label:_("typing.markdownValue")},{value:"html",label:_("typing.htmlValue")}];function K(l){const{html:o,content:a}=c.item[n.value].content;l==="markdown"?k(a||""):k(o||"")}return(l,o)=>(m(),C("div",It,[r(dt,{collapse:t(s).historyDrawer.collapse,"onUpdate:collapse":o[2]||(o[2]=a=>t(s).historyDrawer.collapse=a),history:t(s).historyDrawer,suffix:t(v)},{default:p(()=>[t(n)?(m(),C("div",xt,[r(st,{title:t(_)(`module.${t(s).module}`),contentName:t(d),"onUpdate:contentName":o[1]||(o[1]=a=>tt(d)?d.value=a:null),"is-has-name":!0},{titleRight:p(()=>[g("div",Ft,[t(n)?(m(),C("span",Tt,[r(rt,{"store-item-data":t(c).item[t(n)]},null,8,["store-item-data"])])):I("",!0),g("span",$t,[r(it,{"support-types":["text/markdown"],accept:[t(v)],"un-support-msg":t(_)("port.mdOnly"),"store-item-data":t(c).item[t(n)],suffix:t(v),type:t(h).MD,types:[t(h).MD,t(h).PDF,t(h).HTML],onSelect:W,onContent:q},null,8,["accept","un-support-msg","store-item-data","suffix","type","types"])]),g("span",Dt,[r(lt,{data:J,onSelected:K},{anchor:p(()=>[r(pt,{type:"primary"},{default:p(()=>[g("span",kt,et(t(_)("tags.copy")),1),r(_t,{type:t(ut).DownOutlined,size:"xs"},null,8,["type"])]),_:1})]),_:1})]),r(ct,nt({class:"tw-ml-2"},l.$attrs),null,16),t(s).historyDrawer.collapse?(m(),F(mt,{key:1,class:"tw-ml-2",visible:t(s).historyDrawer.visible,"onUpdate:visible":o[0]||(o[0]=a=>t(s).historyDrawer.visible=a)},null,8,["visible"])):I("",!0)])]),default:p(()=>[(m(),F(wt,{key:t(n)}))]),_:1},8,["title","contentName"])])):I("",!0)]),_:1},8,["collapse","history","suffix"])]))}});const Et=b(St,[["__scopeId","data-v-903c76fb"]]),ie=T({__name:"Typing",setup($){return(i,n)=>(m(),F(Et))}});export{ie as default};
