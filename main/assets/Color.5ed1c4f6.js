import{d as T,q as j,M as z,o as w,c as C,v as n,a0 as b,$ as u,g as p,a as f,w as R,F as U,at as B,au as E,s as L,t as F,U as D,x as W}from"./index.1da778f9.js";import{_ as V,U as P}from"./UIWithTitle.f8208f61.js";import{s as A}from"./vue-color-kit.fb78b25c.js";import{d as $}from"./copyLib.da4e3454.js";import{a as N,_ as S,s as I,E as H}from"./Interface.adbaf245.js";import{_ as O}from"./DButton.vue_vue_type_script_setup_true_lang.7d1596b6.js";import{f as G,p as J,c as K}from"./fileLib.ab21b4c9.js";import{t as Q}from"./trim.8795fa7a.js";import{_ as M}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as X}from"./DUploadList.vue_vue_type_script_setup_true_lang.292f5a7e.js";import{_ as Y}from"./DResult.vue_vue_type_script_setup_true_lang.65015d34.js";import"./DTooltip.63413dc2.js";import"./_baseIsEqual.74295246.js";import"./findIndex.4ace8958.js";import"./hasIn.49cbec25.js";import"./memoize.9cfb9d7d.js";import"./_flatRest.4c2f6287.js";import"./DUpload.d86a41a8.js";import"./index.b9cbb730.js";import"./styleChecker.0a18f775.js";import"./index.779676f7.js";import"./Col.2af766ee.js";import"./responsiveObserve.2ab3d882.js";import"./last.c6fe145d.js";import"./debounce.64b6b86f.js";import"./now.5c01924d.js";var y=(m=>(m.Hex="hex",m.Rgb="rgb",m.Hsl="hsl",m.Hsla="hsla",m.Rgba="rgba",m))(y||{});class k{static _getRgb(r,s){let t=r.toLowerCase();const e=t.indexOf("rgba")==-1?0:1;t=e?t.replace("rgba",""):t.replace("rgb",""),t=t.replace(/\s/g,"").split(",");const a=Number(t[0].slice(1)),i=Number(t[1]),c=Number(e?t[2]:t[2].slice(0,-1)),o=e?Number(t[3].slice(0,-1))>1?1:Number(t[3].slice(0,-1)):1;return{r:a,g:i,b:c,o,complete:s?"rgba("+[a,i,c,o].join(",")+")":"rgb("+[a,i,c].join(",")+")"}}static _getHsl(r,s){let t=r.toLowerCase();const e=t.indexOf("hsla")==-1?0:1;t=e?t.replace("hsla",""):t.replace("hsl",""),t=t.replace(/\s/g,"").split(",");const a=Number(t[0].slice(1)),i=parseInt(t[1]),c=parseInt(e?t[2]:t[2].slice(0,-1)),o=e?Number(t[3].slice(0,-1))>1?1:Number(t[3].slice(0,-1)):1;return{h:a,s:i/100,l:c/100,o,complete:s?"hsla("+[a,i,c,o].join(",")+")":"hsl("+[a,i,c].join(",")+")"}}static _rgbToHex(r){let s=Number(r.r).toString(16),t=Number(r.g).toString(16),e=Number(r.b).toString(16),a=Math.round(r.o*255).toString(16),i=0;return s.length<2&&(s=0+s),t.length<2&&(t=0+t),e.length<2&&(e=0+e),a.length<2&&(a=0+a),s[0]==s[1]&&t[0]==t[1]&&e[0]==e[1]&&a[0]==a[1]&&(i=1),{r:s,g:t,b:e,o:a,complete:i?"#"+s[0]+t[0]+e[0]+(r.o==1?"":a):"#"+s+t+e+(r.o==1?"":a)}}static _rgbToHsl(r,s){const t=Number(r.r)/255,e=Number(r.g)/255,a=Number(r.b)/255,i=Number(r.o),c=Math.max(t,e,a),o=Math.min(t,e,a);let l,_,d=(c+o)/2;if(c==o)l=_=0;else{const g=c-o;switch(_=d<.5?g/(c+o):g/(2-c-o),c){case t:l=(e-a)/g;break;case e:l=(a-t)/g+2;break;case a:l=(t-e)/g+4;break}l=l*60,l=l<0?l+360:l}const h=Math.round(l),v=Math.round(_*100)+"%",x=Math.round(d*100)+"%";return{h,s:v,l:x,o:i,complete:s?"hsla("+[h,v,x,i].join(",")+")":"hsl("+[h,v,x].join(",")+")"}}static _hexToRgb(r,s){let t,e,a,i;const c=r.replace("#",""),o=c.split("");return c.length==3||c.length==4?(t=parseInt(o[0]+o[0],16),e=parseInt(o[1]+o[1],16),a=parseInt(o[2]+o[2],16),r.length==4?i=Math.round(parseInt(o[3]+o[3],16)/255*100)/100:i=1):(c.length==8||c.length==6)&&(t=parseInt(o[0]+o[1],16),e=parseInt(o[2]+o[3],16),a=parseInt(o[4]+o[5],16),r.length==8?i=Math.round(parseInt(o[6]+o[7],16)/255*100)/100:i=1),{r:t,g:e,b:a,o:i,complete:s?"rgba("+[t,e,a,i].join(",")+")":"rgb("+[t,e,a].join(",")+")"}}static _hslToRgb(r,s){let t=Number(r.h),e=Number(r.s),a=Number(r.l),i=Number(r.o),c,o,l;if(e==0)c=o=l=a;else{const _=a<.5?a*(1+e):a+e-a*e,d=2*a-_;t/=360;const h=function(v,x,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?v+(x-v)*6*g:g<1/2?x:g<2/3?v+(x-v)*(2/3-g)*6:v};c=h(d,_,t+1/3),o=h(d,_,t),l=h(d,_,t-1/3)}return c=Math.round(c*255),o=Math.round(o*255),l=Math.round(l*255),{r:c,g:o,b:l,o:i,complete:s?"rgba("+[c,o,l,i].join(",")+")":"rgb("+[c,o,l].join(",")+")"}}static exchange(r){return new Promise((s,t)=>{let e;const a=r&&r.color&&r.color.replace(/\s/g,"").toLowerCase()||"#fff",i=r&&r.format&&r.format.replace(/\s/g,"").toLowerCase()||"rgb",c=i.indexOf("rgba")==-1?0:1,o=i.indexOf("hsla")==-1?0:1;if(a.indexOf("#")>-1)switch(i){case"hex":e=this._hexToRgb(a,c),e=this._rgbToHex(e);break;case"rgb":case"rgba":e=this._hexToRgb(a,c);break;case"hsl":case"hsla":e=this._hexToRgb(a,c),e=this._rgbToHsl(e,o);break}else if(a.indexOf("rgb")>-1)switch(e=this._getRgb(a,c),i){case"hex":e=this._rgbToHex(e);break;case"hsl":case"hsla":e=this._rgbToHsl(e,o);break}else if(a.indexOf("hsl")>-1)switch(e=this._getHsl(a,o),e=this._hslToRgb(e,c),i){case"hex":e=this._rgbToHex(e);break;case"hsl":case"hsla":e=this._rgbToHsl(e,o);break}else t("color error");s(e.complete)})}}const Z={class:"editor-select"},q={class:"select_title"},ee={class:"select_title tw-my-4"},te={class:"select_selected"},se={class:"select_title"},oe={class:"select_show_font"},le={class:"select_show_black"},ae={class:"select_show_white"},re={class:"select_show_format"},ne={name:"ColorSelect"},ce=T({...ne,props:{imageUrl:{}},setup(m){const r=m,s=j({color:"#2e81ff",input:"",format:{hex:"",rgb:"",rgba:"",hsl:"",hsla:""},suck:{canvas:null,area:[]}});function t(o,l,_=void 0){const d=document.getElementsByClassName("color-upload-show_canvas")[0],h=document.getElementsByClassName("color-upload-show_image")[0];h&&d&&(h.style.display=o?"block":"none",d.style.display=l?"block":"none",_?d.appendChild(_):d.removeChild(d.childNodes[0]))}function e(o){var l;if(o){const{imageUrl:_}=r;G(_).then(d=>{const{canvas:h,height:v,width:x}=d;s.suck.canvas=h,s.suck.area=[0,v,x,v],_?t(!1,!0,h):(t(!0,!1,h),I(H.Warning,p("color.upload.notice.empty")))}).catch(d=>{console.log("covertImageToCanvas",d),I(H.Warning,p("color.upload.notice.empty")),t(!0,!1)})}else t(!0,!1),s.suck.canvas&&((l=s.suck.canvas)==null||l.remove)}function a(o){const{r:l,g:_,b:d,a:h}=o.rgba;s.color=`rgba(${l}, ${_}, ${d}, ${h})`}function i(){const o=Q(s.input);o?k.exchange({color:o,format:y.Rgba}).then(l=>{s.color=String(l)}).catch(()=>{I(H.Error,p("color.select.input.notice.error"))}):I(H.Warning,p("color.select.input.notice.empty"))}function c(o){o&&(k.exchange({color:o,format:y.Rgb}).then(l=>{s.format.rgb=String(l)}),k.exchange({color:o,format:y.Rgba}).then(l=>{s.format.rgba=String(l)}),k.exchange({color:o,format:y.Hsl}).then(l=>{s.format.hsl=String(l)}),k.exchange({color:o,format:y.Hsla}).then(l=>{s.format.hsla=String(l)}),k.exchange({color:o,format:y.Hex}).then(l=>{let _=String(l);_.length>7&&(_=_.substring(0,7)),s.format.hex=_}))}return z(()=>s.color,o=>{c(o)},{immediate:!0}),(o,l)=>(w(),C("div",Z,[n("div",null,[n("div",q,b(u(p)("color.select.select")),1),f(u(A),{theme:"light",color:s.color,"sucker-hide":!1,"sucker-canvas":s.suck.canvas,"sucker-area":s.suck.area,onChangeColor:a,onOpenSucker:e},null,8,["color","sucker-canvas","sucker-area"]),n("div",ee,b(u(p)("color.select.input.label")),1),n("div",null,[f(V,{style:{"font-size":"12px"},value:s.input,"onUpdate:value":l[0]||(l[0]=_=>s.input=_),placeholder:u(p)("color.select.input.placeholder"),"is-search":!0},{suffix:R(()=>[f(O,{size:"small",type:"text",name:u(p)("tags.confirm"),onClick:i},null,8,["name"])]),_:1},8,["value","placeholder"])])]),n("div",te,[n("div",se,b(u(p)("color.select.selected")),1),n("div",{class:"select_show",style:U({backgroundColor:s.color})},[n("div",oe,[n("div",le,b(u(p)("color.select.black")),1),n("div",{class:"select_show_black",style:U({textShadow:`1px 1px 0 ${s.color}`})},b(u(p)("color.select.shadow")),5),n("div",ae,b(u(p)("color.select.white")),1),n("div",{class:"select_show_white",style:U({textShadow:`1px 1px 0 ${s.color}`})},b(u(p)("color.select.shadow")),5)])],4),n("div",re,[n("div",null,[n("span",null,b(s.format.hex),1),n("span",{onClick:l[1]||(l[1]=()=>u($)(s.format.hex))},[f(S,{size:"sm",type:u(N).CopyOutlined},null,8,["type"])])]),n("div",null,[n("span",null,b(s.format.rgb),1),n("span",{onClick:l[2]||(l[2]=()=>u($)(s.format.rgb))},[f(S,{size:"sm",type:u(N).CopyOutlined},null,8,["type"])])]),n("div",null,[n("span",null,b(s.format.rgba),1),n("span",{onClick:l[3]||(l[3]=()=>u($)(s.format.rgba))},[f(S,{size:"sm",type:u(N).CopyOutlined},null,8,["type"])])]),n("div",null,[n("span",null,b(s.format.hsl),1),n("span",{onClick:l[4]||(l[4]=()=>u($)(s.format.hsl))},[f(S,{size:"sm",type:u(N).CopyOutlined},null,8,["type"])])]),n("div",null,[n("span",null,b(s.format.hsla),1),n("span",{onClick:l[5]||(l[5]=()=>u($)(s.format.hsla))},[f(S,{size:"sm",type:u(N).CopyOutlined},null,8,["type"])])])])])]))}});const ie=M(ce,[["__scopeId","data-v-bc8639ad"]]),ue=m=>(B("data-v-d0436e56"),m=m(),E(),m),_e={class:"color-upload"},de={class:"color-upload_upload"},pe={class:"color-upload-show"},me={class:"color-upload-show_image"},he=["src"],ge={key:1,class:"tw-flex tw-h-full tw-justify-center tw-items-center"},fe=ue(()=>n("div",{class:"color-upload-show_canvas tw-hidden"},null,-1)),be={name:"ColorUpload"},ve=T({...be,props:{imageUrl:{}},emits:["update:imageUrl"],setup(m,{emit:r}){function s(e){r("update:imageUrl",e.previewUrl)}function t(e){I(H.Error,e)}return(e,a)=>(w(),C("div",_e,[n("div",de,[f(X,{"max-size":200,onFile:s,onError:t},{default:R(()=>[f(O,{name:u(p)("color.upload.image")},null,8,["name"])]),_:1})]),n("div",pe,[n("div",me,[e.imageUrl?(w(),C("img",{key:0,src:e.imageUrl},null,8,he)):(w(),C("div",ge,[f(Y,{msg:u(p)("color.upload.notice.empty")},null,8,["msg"])]))]),fe])]))}});const xe=M(ve,[["__scopeId","data-v-d0436e56"]]),ye={class:"color-editor"},we={class:"editor_left"},ke={class:"editor_title"},Ce={class:"editor_right"},$e={class:"editor_title"},Ne={class:"editor_right_upload"},Se={name:"ColorEditor"},Ie=T({...Se,setup(m){const r=L("");return F(()=>{D(()=>{var s;(s=document.getElementsByClassName("editor_right"))==null||s[0].addEventListener("paste",t=>{J(t,K,!0).then(e=>{r.value=String(e)})})})}),(s,t)=>(w(),C("div",ye,[n("div",we,[n("div",ke,b(u(p)("color.select.label")),1),n("div",null,[f(ie,{"image-url":r.value},null,8,["image-url"])])]),n("div",Ce,[n("div",$e,b(u(p)("color.upload.label")),1),n("div",Ne,[f(xe,{"image-url":r.value,"onUpdate:imageUrl":t[0]||(t[0]=e=>r.value=e)},null,8,["image-url"])])])]))}});const He=M(Ie,[["__scopeId","data-v-82a0ee27"]]),Te={class:"warp_bigger color_area"},Me={name:"ModuleColor"},Ue=T({...Me,setup(m){return(r,s)=>(w(),C("div",Te,[f(P,{title:u(p)("module.color")},{default:R(()=>[f(He)]),_:1},8,["title"])]))}});const Re=M(Ue,[["__scopeId","data-v-c0050130"]]),rt=T({__name:"Color",setup(m){return(r,s)=>(w(),W(Re))}});export{rt as default};
