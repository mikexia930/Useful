import{al as re,dJ as Ue,d8 as Me,d9 as Le,q as je,bh as q,d as M,s as P,M as qe,aj as R,o as x,c as D,$ as i,Y as K,v as E,a as w,x as G,w as Y,a0 as ne,d2 as Pe,d3 as he,g as l,K as N,b as B,S as v,y as H,at as He,au as Be,t as Ge,p as We,a4 as A,av as ze,a1 as Ze}from"./index.1da778f9.js";import{U as Je}from"./UIWithTitle.f8208f61.js";import{E as Ve,g as Ye,b as Ke,c as Xe,d as Qe,e as et,U as tt}from"./UICreateImport.vue_vue_type_script_setup_true_lang.e9d5def8.js";import{_ as nt}from"./DButton.vue_vue_type_script_setup_true_lang.7d1596b6.js";import{d as rt}from"./copyLib.da4e3454.js";import{d as ot,h as st,u as at}from"./PortImport.vue_vue_type_script_setup_true_lang.2fc96ef8.js";import{_ as ut}from"./DSteps.vue_vue_type_script_setup_true_lang.6fa0d8bb.js";import{_ as se,a as ae,s as z,E as Z}from"./Interface.adbaf245.js";import{_ as ct}from"./DResult.vue_vue_type_script_setup_true_lang.65015d34.js";import{_ as Q}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as it,a as J,E as ue,q as lt,e as ce}from"./posterLib.d01e67e6.js";import{a as dt}from"./_arrayReduce.5f344ba7.js";import{_ as ft}from"./DMarkdown.vue_vue_type_script_setup_true_lang.97792807.js";import{u as mt}from"./ModuleAutoSaveLib.0fb4c3e5.js";import{a as ie}from"./config.aa76b2c0.js";import"./DTooltip.63413dc2.js";import"./_baseIsEqual.74295246.js";import"./ModuleCollapsetLib.78fb6d31.js";import"./routeLib.b1a3bf91.js";import"./findIndex.4ace8958.js";import"./hasIn.49cbec25.js";import"./memoize.9cfb9d7d.js";import"./index.5aa88714.js";import"./KeyCode.9e37adda.js";import"./pick.5cf82e83.js";import"./_flatRest.4c2f6287.js";import"./DSelect.vue_vue_type_script_setup_true_lang.5279f391.js";import"./styleChecker.0a18f775.js";import"./debounce.64b6b86f.js";import"./now.5c01924d.js";import"./trim.8795fa7a.js";import"./fileLib.ab21b4c9.js";import"./DSpin.61091bf0.js";import"./randomLib.04c6c9cc.js";import"./stringify.15412eb9.js";import"./responsiveObserve.2ab3d882.js";import"./index.b9cbb730.js";function pt(e){return function(n){n=re(n);var r=Ue(n)?Me(n):void 0,t=r?r[0]:n.charAt(0),o=r?Le(r,1).join(""):n.slice(1);return t[e]()+o}}var ht=pt("toUpperCase");const _t=ht;function vt(e){return function(n){return e==null?void 0:e[n]}}var yt={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},gt=vt(yt);const xt=gt;var bt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ct="\\u0300-\\u036f",Et="\\ufe20-\\ufe2f",wt="\\u20d0-\\u20ff",St=Ct+Et+wt,$t="["+St+"]",Dt=RegExp($t,"g");function It(e){return e=re(e),e&&e.replace(bt,xt).replace(Dt,"")}var Rt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Nt(e){return e.match(Rt)||[]}var kt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Tt(e){return kt.test(e)}var _e="\\ud800-\\udfff",At="\\u0300-\\u036f",Ft="\\ufe20-\\ufe2f",Ot="\\u20d0-\\u20ff",Ut=At+Ft+Ot,ve="\\u2700-\\u27bf",ye="a-z\\xdf-\\xf6\\xf8-\\xff",Mt="\\xac\\xb1\\xd7\\xf7",Lt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",jt="\\u2000-\\u206f",qt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ge="A-Z\\xc0-\\xd6\\xd8-\\xde",Pt="\\ufe0e\\ufe0f",xe=Mt+Lt+jt+qt,be="['\u2019]",le="["+xe+"]",Ht="["+Ut+"]",Ce="\\d+",Bt="["+ve+"]",Ee="["+ye+"]",we="[^"+_e+xe+Ce+ve+ye+ge+"]",Gt="\\ud83c[\\udffb-\\udfff]",Wt="(?:"+Ht+"|"+Gt+")",zt="[^"+_e+"]",Se="(?:\\ud83c[\\udde6-\\uddff]){2}",$e="[\\ud800-\\udbff][\\udc00-\\udfff]",U="["+ge+"]",Zt="\\u200d",de="(?:"+Ee+"|"+we+")",Jt="(?:"+U+"|"+we+")",fe="(?:"+be+"(?:d|ll|m|re|s|t|ve))?",me="(?:"+be+"(?:D|LL|M|RE|S|T|VE))?",De=Wt+"?",Ie="["+Pt+"]?",Vt="(?:"+Zt+"(?:"+[zt,Se,$e].join("|")+")"+Ie+De+")*",Yt="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Kt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Xt=Ie+De+Vt,Qt="(?:"+[Bt,Se,$e].join("|")+")"+Xt,en=RegExp([U+"?"+Ee+"+"+fe+"(?="+[le,U,"$"].join("|")+")",Jt+"+"+me+"(?="+[le,U+de,"$"].join("|")+")",U+"?"+de+"+"+fe,U+"+"+me,Kt,Yt,Ce,Qt].join("|"),"g");function tn(e){return e.match(en)||[]}function nn(e,n,r){return e=re(e),n=r?void 0:n,n===void 0?Tt(e)?tn(e):Nt(e):e.match(n)||[]}var rn="['\u2019]",on=RegExp(rn,"g");function sn(e){return function(n){return dt(nn(It(n).replace(on,"")),e,"")}}var an=sn(function(e,n,r){return e+(r?" ":"")+n.toUpperCase()});const un=an,I=je({folders:[],item:{}}),te=".md",cn={[q.Config]:"_document_config",[q.Folder]:"_document_folder",[q.Content]:"_document_content",[q.Env]:"_document_env"};function ln(){return{content:{step:0,selected:[],identity:"",name:"",content:""},isSaved:0}}const dn={key:0},fn={class:"tw-mt-10"},mn=["title"],pn={class:"selected-move"},hn=["onClick"],_n={name:"DocumentSelected"},vn=M({..._n,props:{select:{}},emits:["change"],setup(e,{emit:n}){const r=e,t=P([]);qe(()=>r.select,c=>{t.value=[],R(c,(p,m)=>{t.value.push({label:p.contentName||"unknown",value:p.contentIdentity})})},{immediate:!0,deep:!0});function o(){u()}function s(c){t.value.splice(c,1),u()}function u(){const c=[];R(t.value,p=>{c.push({contentName:p.label,contentIdentity:p.value})}),n("change",c)}return(c,p)=>(x(),D("div",null,[i(K)(t.value)?(x(),D("div",dn,[E("div",fn,[w(ct)])])):(x(),G(i(ot),{key:1,handle:".selected-move",list:t.value,"item-key":"value",sort:!0,onDragend:o},{item:Y(({element:m,index:d})=>[(x(),D("div",{key:m.value,class:"ed-selected-item"},[E("div",{title:m.label},[E("span",pn,[w(se,{type:i(ae).HolderOutlined},null,8,["type"])]),E("span",null,ne(m.label),1)],8,mn),E("span",{onClick:_=>s(d)},[w(se,{type:i(ae).DeleteOutlined},null,8,["type"])],8,hn)]))]),_:1},8,["list"]))]))}});const yn=Q(vn,[["__scopeId","data-v-cedc580b"]]);var Re={exports:{}},gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function V(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var y=Re.exports={},L=function(n){return function(r,t){return"#".repeat(n)+" "+t(r)}},oe=function e(n,r,t){var o=n;return typeof n=="string"&&(o=n.split(`
`)),t?o.length<=1?o.join(`
`):o[0]+`
`+e(o.slice(1),r,!1):o.map(function(s){return" ".repeat(r)+s}).join(`
`)},W=function(n){var r={strong:"**",italic:"*",underline:"_",strikethrough:"~~"};return n.replace(/<\/?strong\>/gi,r.strong).replace(/<\/?bold\>/gi,r.strong).replace(/<\/?em\>/gi,r.italic).replace(/<\/?italic\>/gi,r.italic).replace(/<\/?u\>/gi,r.underline).replace(/<\/?strike\>/gi,r.strikethrough)};y.h1=L(1);y.h2=L(2);y.h3=L(3);y.h4=L(4);y.h5=L(5);y.h6=L(6);y.blockquote=function(e,n){return n(e,"> ")};y.img=function(e,n){debugger;return Array.isArray(e)?n(e,"","img"):typeof e=="string"?y.img({source:e,title:"",alt:""}):(e.title=e.title||"",e.alt=e.alt||"","!["+e.alt+"]("+e.source+' "'+e.title+'")')};y.ul=function(e,n){for(var r="",t=0;t<e.length;++t){var o="",s=Object.keys(e[t])[0];s!=="ul"&&s!=="ol"&&s!=="taskLists"&&(o+=`
 - `),r+=o+W(oe(n(e[t]),4,!0))}return r};y.ol=function(e,n){for(var r="",t=0,o=0;o<e.length;++o){var s="",u=Object.keys(e[o])[0];u!=="ul"&&u!=="ol"&&u!=="taskLists"?s=`
 `+(o+1-t)+". ":t++,r+=s+W(oe(n(e[o]),4,!0))}return r};y.taskLists=function(e,n){for(var r="",t=0;t<e.length;++t){var o="",s=Object.keys(e[t])[0];s!=="ul"&&s!=="ol"&&s!=="taskLists"&&(o+=e[t].isDone?`
 - [x] `:`
 - [ ] `),r+=o+W(oe(n(e[t].title||e[t]),4,!0))}return r};y.code=function(e,n){var r="```"+(e.language||"")+`
`;return Array.isArray(e.content)?r+=e.content.join(`
`):r+=e.content,r+="\n```",r};y.p=function(e,n){return W(n(e,`
`))};y.table=function(e,n){var r,t={CENTER:"center",RIGHT:"right",LEFT:"left",NONE:"none"},o=(r={},V(r,t.CENTER,3),V(r,t.RIGHT,2),V(r,t.LEFT,2),V(r,t.NONE,1),r);if((typeof e>"u"?"undefined":gn(e))!=="object"||!e.hasOwnProperty("headers")||!e.hasOwnProperty("rows"))return"";var s=e.headers.map(function(h,a){return e.aligns&&e.aligns[a]?e.aligns[a]:t.NONE}),u=e.headers.map(function(h,a){return Math.max(o[s[a]],h.length-2)});e.pretty===!0&&e.rows.forEach(function(h){(Array.isArray(h)?h:e.headers.map(function(a){return h[a]})).forEach(function(a,f){u[f]=Math.max(u[f],a.length-2)})});var c=function(a,f){return" ".repeat(a)+f},p=function(a,f){return f+" ".repeat(a)},m=function(a,f){return" ".repeat(Math.floor(a/2))+f+" ".repeat(Math.ceil(a/2))},d=function(a,f){var $=u[f]+2-a.length;switch(s[f]){case t.RIGHT:return c($,a);case t.LEFT:return p($,a);case t.CENTER:case t.NONE:default:return m($,a)}},_=function(a,f){var $=u[f]+2-a.length;switch(s[f]){case t.RIGHT:return c($,a);case t.NONE:case t.LEFT:return p($,a);case t.CENTER:default:return m($,a)}},S=e.headers.map(d),b="| "+S.join(" | ")+" |",g="| "+e.headers.map(function(h,a){var f="-".repeat(u[a]);switch(s[a]){case t.CENTER:return":"+f+":";case t.RIGHT:return"-"+f+":";case t.LEFT:return":"+f+"-";case t.NONE:default:return"-"+f+"-"}}).join(" | ")+" |",C=function(a,f){return e.pretty!==!0?a:_(a,f)},T=e.rows.map(function(h){return"| "+(Array.isArray(h)?h:e.headers.map(function(a){return h[a]})).map(function(a){return n(a)}).map(function(a){return W(a)}).map(function(a){return a.replace(/([^\\])\|/,"$1\\|")}).map(function(a){return a.trim()}).map(C).join(" | ")+" |"}).join(`
`);return[b,g,T].join(`
`)};y.link=function(e,n){return Array.isArray(e)?n(e,"","link"):typeof e=="string"?y.link({source:e,title:""}):"["+e.title+"]("+e.source+")"};y.hr=function(e,n){return"---"};function xn(e,n,r){return r=typeof r!="string"?" ":r,String(e).replace(/^/gm,r.repeat(n))}var bn=xn,X=Re.exports,F=bn;function k(e,n,r){if(n=n||"",typeof e=="string"||typeof e=="number")return F(e,1,n);var t=[];if(Array.isArray(e)){for(var o=0;o<e.length;++o)t.push(F(k(e[o],"",r),1,n));return t.join(`
`)}else if(r){var s="",u=X[r||type];if(typeof u=="function")s+=F(u(r?e:e[type],k),1,n)+`
`;else throw new Error("There is no such converter: "+type);return s}else{var c="";return Object.keys(e).forEach(function(p,m,d){var _=X[r||p];if(typeof _=="function")c+=F(_(r?e:e[p],k),1,n)+`
`;else throw new Error("There is no such converter: "+p)}),c}}k.async=function(e,n,r){return Promise.resolve().then(function(){if(n=n||"",typeof e=="string"||typeof e=="number")return F(e,1,n);var t=[];if(Array.isArray(e)){var o=e.map(function(c,p){return Promise.resolve().then(function(){return k.async(c,"",r)}).then(function(m){return F(m,1,n)}).then(function(m){t[p]=m})});return Promise.all(o).then(function(){return t.join(`
`)})}else{var s=Object.keys(e)[0],u=X[r||s];if(typeof u=="function")return Promise.resolve().then(function(){return u(r?e:e[s],k)}).then(function(c){return F(c,1,n)+`
`});throw new Error("There is no such converter: "+s)}})};k.converters=X;var Cn=k;function En(e,n){return new Promise((r,t)=>{e.getStorageData(n,Pe.Type).then(o=>{let s=[];(o==null?void 0:o.value)&&!K(o)?s=he(o.value):s.push(st()),r(s)})})}function wn(e){return En(e,it[q.Folder])}function Sn(e){const n=[];return R(e,r=>{const t=$n(r.name,r.content);n.push(...t)}),Cn(n)}function $n(e,n){var u,c,p,m,d,_,S;const{remark:r,request:t,response:o}=n,s=[];if(n.request&&n.response){s.push({h2:e}),r&&s.push({blockquote:(n==null?void 0:n.remark)||""}),t.url&&(s.push({h4:l("poster.doc.request.url")}),s.push({code:{language:"text",content:t.url}}));const b=(t==null?void 0:t.method)||"";b&&(s.push({h4:l("poster.doc.request.method")}),s.push({code:{language:"text",content:un(b)}}));const g={headers:[l("poster.doc.request.header.type"),l("poster.doc.request.header.content"),l("poster.doc.request.header.desc")],rows:[]};if(t.auth&&t.auth.type){const C=((u=t.auth)==null?void 0:u.type)||"",T=((p=(c=t.auth)==null?void 0:c.basic)==null?void 0:p.username)||"",h=((d=(m=t.auth)==null?void 0:m.basic)==null?void 0:d.password)||"",a=((S=(_=t.auth)==null?void 0:_.bearer)==null?void 0:S.token)||"";if(C===J.Bearer||C===J.Basic){let f="";C===J.Basic?f=`${l("poster.doc.request.header.auth.username")}: ${T}
${l("poster.doc.request.header.auth.password")}: ${h}`:C===J.Bearer&&(f=`${l("poster.doc.request.header.auth.token")}: ${a}`);const $=["Authorization",C,f];g.rows.push($)}}b&&b===ue.POST&&g.rows.push(["Content-Type",lt(t.post.type,t.post.raw.type),""]),t.header&&!K(t.header)&&R(t.header,C=>{const{isUse:T,name:h,value:a,desc:f}=C;T&&g.rows.push([h,a,f])}),g.rows.length>0&&(s.push({h4:l("poster.doc.request.header.label")}),s.push({table:g})),t.query&&!K(t.query)&&(s.push({h4:l("poster.doc.request.query.label")}),s.push({table:pe(t.query)})),t.method&&t.method===ue.POST&&(t.post.type===ce.FormData||t.post.type===ce.XWWWFormUrlEncode)&&(s.push({h4:l("poster.doc.request.post.label")}),s.push({table:pe(t.post.form)})),s.push({h4:l("poster.doc.response.label")}),s.push({code:{language:"json",content:o.data?JSON.stringify(JSON.parse(o.data),null,4):""}})}return s}function pe(e){const n={headers:[l("poster.doc.request.params.table.name"),l("poster.doc.request.params.table.type"),l("poster.doc.request.params.table.essential"),l("poster.doc.request.params.table.desc")],rows:[]};return console.log("data",e),R(e,r=>{const{isUse:t,name:o,isEssential:s,fieldType:u,desc:c}=r;t&&n.rows.push([o,u,_t(String(s)),c])}),n}const Ne=e=>(He("data-v-5de70391"),e=e(),Be(),e),Dn={class:"document-choose"},In={class:"document-choose_side"},Rn={class:"document-choose_side_title"},Nn=Ne(()=>E("div",{class:"document-choose_arrow"},null,-1)),kn={class:"document-choose_side"},Tn={class:"document-choose_side_title"},An=Ne(()=>E("div",null,null,-1)),Fn={name:"DocumentSelect"},On=M({...Fn,setup(e){const n=N("storeIDB"),r=N("contentIdentity"),t=B(()=>I.item[r.value].content),o=P([]),s=B(()=>{const d=[];return R(t.value.selected,_=>{d.push(_.contentIdentity)}),d});function u(d){const{contentIdentity:_,name:S}=d;let b=-1;R(t.value.selected,(g,C)=>{if(g.contentIdentity===_)return b=C,!1}),b>-1?t.value.selected.splice(b,1):t.value.selected.push({contentIdentity:_,contentName:S})}const c=P(!1),p=P([]);v("historyFolders",p),wn(n).then(d=>{p.value=[...d],R(d,_=>{const{identity:S}=_;o.value.push(S)}),c.value=!0});function m(d){t.value.selected=d}return(d,_)=>(x(),D("div",Dn,[E("div",In,[E("div",Rn,ne(i(l)("document.select")),1),c.value?(x(),G(Ye,{key:0,from:i(Ve).ExportDoc,expand:o.value,select:s.value,sortable:!1,onSelected:u},null,8,["from","expand","select"])):H("",!0)]),Nn,E("div",kn,[E("div",Tn,ne(i(l)("document.selected")),1),w(yn,{select:t.value.selected,onChange:m},null,8,["select"])]),An]))}});const Un=Q(On,[["__scopeId","data-v-5de70391"]]),Mn={class:"tw-h-full tw-w-full"},Ln={name:"DocumentGenerate"},jn=M({...Ln,setup(e){const n=N("contentIdentity"),r=B(()=>I.item[n.value].content),t=P(!1);return Ge(()=>{setTimeout(()=>{t.value=!0},200)}),(o,s)=>(x(),D("div",Mn,[t.value?(x(),G(ft,{key:0,"show-code-row-number":!1,"text-identity":r.value.identity,content:r.value.content,"onUpdate:content":s[0]||(s[0]=u=>r.value.content=u),style:{height:"100%"}},null,8,["text-identity","content"])):H("",!0)]))}}),qn={class:"document-editor"},Pn={class:"document-editor-step"},Hn={key:0,class:"document-editor-content"},Bn={key:1,class:"document-editor-md"},Gn={name:"DocumentEditor"},Wn=M({...Gn,setup(e){N("storeIDB");const n=N("contentIdentity"),r=N("contentName"),t=N("getContent");mt(I,n,["content"],r);const o=B(()=>I.item[n.value].content),s=[{value:"select",label:l("document.step.select.label"),description:l("document.step.select.desc"),disabled:!1},{value:"edit",label:l("document.step.edit.label"),description:l("document.step.edit.desc"),disabled:!1}],u=We();function c(){var m;o.value.step===0?o.value.selected.length===0?z(Z.Warning,l("document.notice.unSelected")):p().then(d=>{d.length>0?(o.value.content=Sn(d),o.value.step=1):z(Z.Warning,l("document.notice.unSelected"))}):o.value.step===1&&((m=u.params)!=null&&m.id?z(Z.Warning,l("document.notice.cantReselect")):o.value.step=0)}function p(){return new Promise(m=>{const{selected:d}=o.value,_=[];R(d,(S,b)=>{t(S.contentIdentity).then(g=>{if(g){const{value:C}=g;_.push({name:S.contentName||"unknown",content:he(C)})}d.length===b+1&&m(_)}).catch(g=>{console.log("error",g),z(Z.Error,l("document.notice.unSelected")),d.length===b+1&&m(_)})})})}return(m,d)=>(x(),D("div",qn,[E("div",Pn,[w(ut,{steps:s,step:o.value.step,"onUpdate:step":c},null,8,["step"])]),o.value.step===0?(x(),D("div",Hn,[w(Un,{style:{width:"100%","max-width":"1200px"}})])):(x(),D("div",Bn,[w(jn)]))]))}});const zn=Q(Wn,[["__scopeId","data-v-ed0686b1"]]),Zn={class:"warp_bigger _document_area"},Jn={key:0,class:"show_area"},Vn={class:"tw-flex tw-justify-end tw-items-center"},Yn={key:0},Kn={class:"tw-ml-2"},Xn={class:"tw-ml-2"},Qn={name:"ModuleCoding"},er=M({...Qn,setup(e){const n=N("storeIDB"),{curIsSaved:r,curContentIdentity:t,curContentName:o,curContentFolderIdentity:s,curFolders:u,curHistoryFolders:c,addFolder:p,renameFolder:m,deleteFolder:d,sortFolder:_,createContent:S,saveContent:b,showContent:g,renameContent:C,copyContent:T,deleteContent:h,autoSaveContent:a,importContent:f,getContent:$,saveFolder:ke,saveContentItem:Te}=at(n,cn,I,ln());v("contentIsSaved",r),v("contentFolderIdentity",s),v("contentIdentity",t),v("contentName",o),v("historyFolders",c),v("folders",u),v("addFolder",p),v("renameFolder",m),v("deleteFolder",d),v("showContent",g),v("copyContent",T),v("renameContent",C),v("deleteContent",h),v("sortFolder",_),v("saveContent",b),v("autoSaveContent",a),v("getContent",$),v("saveFolder",ke),v("saveContentItem",Te);const ee=B(()=>I.item[t.value].content.step===0);function Ae(){S()}function Fe(){rt(I.item[t.value].content.content||"")}return(Oe,O)=>(x(),D("div",Zn,[w(tt,{collapse:i(A).historyDrawer.collapse,"onUpdate:collapse":O[2]||(O[2]=j=>i(A).historyDrawer.collapse=j),history:i(A).historyDrawer,suffix:i(te),"is-history-use-batch":!1},{default:Y(()=>[i(t)?(x(),D("div",Jn,[w(Je,{title:`\u300C${i(l)(`module.${i(A).documentModule}`)}\u300D${i(l)("document.export")}`,contentName:i(o),"onUpdate:contentName":O[1]||(O[1]=j=>ze(o)?o.value=j:null),"is-has-name":!0},{titleRight:Y(()=>[E("div",Vn,[i(t)?(x(),D("span",Yn,[w(Ke,{"store-item-data":i(I).item[i(t)]},null,8,["store-item-data"])])):H("",!0),E("span",Kn,[w(Xe,{disabled:ee.value,"support-types":["text/markdown"],accept:[i(te)],"store-item-data":i(I).item[i(t)],suffix:i(te),"is-use-export-use":!1,"is-support-import":!1,type:i(ie).MD,types:[i(ie).MD],onSelect:Ae},null,8,["disabled","accept","store-item-data","suffix","type","types"])]),E("span",Xn,[w(nt,{disabled:ee.value,type:"primary",name:i(l)("tags.copy"),onClick:Fe},null,8,["disabled","name"])]),w(Qe,Ze({disabled:ee.value,class:"tw-ml-2"},Oe.$attrs),null,16,["disabled"]),i(A).historyDrawer.collapse?(x(),G(et,{key:1,class:"tw-ml-2",visible:i(A).historyDrawer.visible,"onUpdate:visible":O[0]||(O[0]=j=>i(A).historyDrawer.visible=j)},null,8,["visible"])):H("",!0)])]),default:Y(()=>[w(zn)]),_:1},8,["title","contentName"])])):H("",!0)]),_:1},8,["collapse","history","suffix"])]))}});const tr=Q(er,[["__scopeId","data-v-3c69c460"]]),jr=M({__name:"Document",setup(e){return(n,r)=>(x(),G(tr))}});export{jr as default};
