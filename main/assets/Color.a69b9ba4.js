import{d as $,q as D,M as F,o as y,c as C,v as i,a0 as v,$ as p,g as h,a as g,w as H,F as O,s as R,x as j,ag as B,a1 as E,ar as W,as as P,t as V,U as A}from"./index.c8bb38b7.js";import{_ as J,U as G}from"./UIWithTitle.79bee722.js";import{s as K,D as Q}from"./DUpload.980551b9.js";import{d as S}from"./copyLib.c08bf92b.js";import{a as N,_ as U,s as I,E as T}from"./Interface.64efddec.js";import{_ as z}from"./DButton.vue_vue_type_script_setup_true_lang.b865b720.js";import{e as X,c as L,r as Y,p as Z}from"./fileLib.0c34c0a5.js";import{t as q,_ as ee}from"./DResult.vue_vue_type_script_setup_true_lang.ec20dca9.js";import{_ as M}from"./_plugin-vue_export-helper.cdc0426e.js";import"./DTooltip.706848f9.js";import"./_baseIsEqual.b23a0b05.js";import"./findIndex.4509e95b.js";import"./hasIn.c54410a7.js";import"./memoize.248533b3.js";import"./index.3de18f87.js";import"./styleChecker.1e3f9dff.js";import"./index.dac13bf3.js";import"./Col.b54f43ed.js";import"./responsiveObserve.1f25d4d3.js";import"./last.2886dca0.js";import"./_flatRest.8ae56f7d.js";import"./debounce.f5158728.js";import"./now.681cb03f.js";var w=(m=>(m.Hex="hex",m.Rgb="rgb",m.Hsl="hsl",m.Hsla="hsla",m.Rgba="rgba",m))(w||{});class k{static _getRgb(r,s){let t=r.toLowerCase();const e=t.indexOf("rgba")==-1?0:1;t=e?t.replace("rgba",""):t.replace("rgb",""),t=t.replace(/\s/g,"").split(",");const a=Number(t[0].slice(1)),c=Number(t[1]),n=Number(e?t[2]:t[2].slice(0,-1)),o=e?Number(t[3].slice(0,-1))>1?1:Number(t[3].slice(0,-1)):1;return{r:a,g:c,b:n,o,complete:s?"rgba("+[a,c,n,o].join(",")+")":"rgb("+[a,c,n].join(",")+")"}}static _getHsl(r,s){let t=r.toLowerCase();const e=t.indexOf("hsla")==-1?0:1;t=e?t.replace("hsla",""):t.replace("hsl",""),t=t.replace(/\s/g,"").split(",");const a=Number(t[0].slice(1)),c=parseInt(t[1]),n=parseInt(e?t[2]:t[2].slice(0,-1)),o=e?Number(t[3].slice(0,-1))>1?1:Number(t[3].slice(0,-1)):1;return{h:a,s:c/100,l:n/100,o,complete:s?"hsla("+[a,c,n,o].join(",")+")":"hsl("+[a,c,n].join(",")+")"}}static _rgbToHex(r){let s=Number(r.r).toString(16),t=Number(r.g).toString(16),e=Number(r.b).toString(16),a=Math.round(r.o*255).toString(16),c=0;return s.length<2&&(s=0+s),t.length<2&&(t=0+t),e.length<2&&(e=0+e),a.length<2&&(a=0+a),s[0]==s[1]&&t[0]==t[1]&&e[0]==e[1]&&a[0]==a[1]&&(c=1),{r:s,g:t,b:e,o:a,complete:c?"#"+s[0]+t[0]+e[0]+(r.o==1?"":a):"#"+s+t+e+(r.o==1?"":a)}}static _rgbToHsl(r,s){const t=Number(r.r)/255,e=Number(r.g)/255,a=Number(r.b)/255,c=Number(r.o),n=Math.max(t,e,a),o=Math.min(t,e,a);let l,u,d=(n+o)/2;if(n==o)l=u=0;else{const f=n-o;switch(u=d<.5?f/(n+o):f/(2-n-o),n){case t:l=(e-a)/f;break;case e:l=(a-t)/f+2;break;case a:l=(t-e)/f+4;break}l=l*60,l=l<0?l+360:l}const _=Math.round(l),b=Math.round(u*100)+"%",x=Math.round(d*100)+"%";return{h:_,s:b,l:x,o:c,complete:s?"hsla("+[_,b,x,c].join(",")+")":"hsl("+[_,b,x].join(",")+")"}}static _hexToRgb(r,s){let t,e,a,c;const n=r.replace("#",""),o=n.split("");return n.length==3||n.length==4?(t=parseInt(o[0]+o[0],16),e=parseInt(o[1]+o[1],16),a=parseInt(o[2]+o[2],16),r.length==4?c=Math.round(parseInt(o[3]+o[3],16)/255*100)/100:c=1):(n.length==8||n.length==6)&&(t=parseInt(o[0]+o[1],16),e=parseInt(o[2]+o[3],16),a=parseInt(o[4]+o[5],16),r.length==8?c=Math.round(parseInt(o[6]+o[7],16)/255*100)/100:c=1),{r:t,g:e,b:a,o:c,complete:s?"rgba("+[t,e,a,c].join(",")+")":"rgb("+[t,e,a].join(",")+")"}}static _hslToRgb(r,s){let t=Number(r.h),e=Number(r.s),a=Number(r.l),c=Number(r.o),n,o,l;if(e==0)n=o=l=a;else{const u=a<.5?a*(1+e):a+e-a*e,d=2*a-u;t/=360;const _=function(b,x,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?b+(x-b)*6*f:f<1/2?x:f<2/3?b+(x-b)*(2/3-f)*6:b};n=_(d,u,t+1/3),o=_(d,u,t),l=_(d,u,t-1/3)}return n=Math.round(n*255),o=Math.round(o*255),l=Math.round(l*255),{r:n,g:o,b:l,o:c,complete:s?"rgba("+[n,o,l,c].join(",")+")":"rgb("+[n,o,l].join(",")+")"}}static exchange(r){return new Promise((s,t)=>{let e;const a=r&&r.color&&r.color.replace(/\s/g,"").toLowerCase()||"#fff",c=r&&r.format&&r.format.replace(/\s/g,"").toLowerCase()||"rgb",n=c.indexOf("rgba")==-1?0:1,o=c.indexOf("hsla")==-1?0:1;if(a.indexOf("#")>-1)switch(c){case"hex":e=this._hexToRgb(a,n),e=this._rgbToHex(e);break;case"rgb":case"rgba":e=this._hexToRgb(a,n);break;case"hsl":case"hsla":e=this._hexToRgb(a,n),e=this._rgbToHsl(e,o);break}else if(a.indexOf("rgb")>-1)switch(e=this._getRgb(a,n),c){case"hex":e=this._rgbToHex(e);break;case"hsl":case"hsla":e=this._rgbToHsl(e,o);break}else if(a.indexOf("hsl")>-1)switch(e=this._getHsl(a,o),e=this._hslToRgb(e,n),c){case"hex":e=this._rgbToHex(e);break;case"hsl":case"hsla":e=this._rgbToHsl(e,o);break}else t("color error");s(e.complete)})}}const te={class:"editor-select"},se={class:"select_title"},oe={class:"select_title tw-my-4"},le={class:"select_selected"},ae={class:"select_title"},re={class:"select_show_font"},ne={class:"select_show_black"},ie={class:"select_show_white"},ce={class:"select_show_format"},ue={name:"ColorSelect"},de=$({...ue,props:{imageUrl:{}},setup(m){const r=m,s=D({color:"#2e81ff",input:"",format:{hex:"",rgb:"",rgba:"",hsl:"",hsla:""},suck:{canvas:null,area:[]}});function t(o,l,u=void 0){const d=document.getElementsByClassName("color-upload-show_canvas")[0],_=document.getElementsByClassName("color-upload-show_image")[0];_&&d&&(_.style.display=o?"block":"none",d.style.display=l?"block":"none",u?d.appendChild(u):d.removeChild(d.childNodes[0]))}function e(o){var l;if(o){const{imageUrl:u}=r;X(u).then(d=>{const{canvas:_,height:b,width:x}=d;s.suck.canvas=_,s.suck.area=[0,b,x,b],u?t(!1,!0,_):(t(!0,!1,_),I(T.Warning,h("color.upload.notice.empty")))}).catch(d=>{console.log("covertImageToCanvas",d),I(T.Warning,h("color.upload.notice.empty")),t(!0,!1)})}else t(!0,!1),s.suck.canvas&&((l=s.suck.canvas)==null||l.remove)}function a(o){const{r:l,g:u,b:d,a:_}=o.rgba;s.color=`rgba(${l}, ${u}, ${d}, ${_})`}function c(){const o=q(s.input);o?k.exchange({color:o,format:w.Rgba}).then(l=>{s.color=String(l)}).catch(()=>{I(T.Error,h("color.select.input.notice.error"))}):I(T.Warning,h("color.select.input.notice.empty"))}function n(o){o&&(k.exchange({color:o,format:w.Rgb}).then(l=>{s.format.rgb=String(l)}),k.exchange({color:o,format:w.Rgba}).then(l=>{s.format.rgba=String(l)}),k.exchange({color:o,format:w.Hsl}).then(l=>{s.format.hsl=String(l)}),k.exchange({color:o,format:w.Hsla}).then(l=>{s.format.hsla=String(l)}),k.exchange({color:o,format:w.Hex}).then(l=>{s.format.hex=String(l)}))}return F(()=>s.color,o=>{n(o)},{immediate:!0}),(o,l)=>(y(),C("div",te,[i("div",null,[i("div",se,v(p(h)("color.select.select")),1),g(p(K),{theme:"light",color:s.color,"sucker-hide":!1,"sucker-canvas":s.suck.canvas,"sucker-area":s.suck.area,onChangeColor:a,onOpenSucker:e},null,8,["color","sucker-canvas","sucker-area"]),i("div",oe,v(p(h)("color.select.input.label")),1),i("div",null,[g(J,{style:{"font-size":"12px"},value:s.input,"onUpdate:value":l[0]||(l[0]=u=>s.input=u),placeholder:p(h)("color.select.input.placeholder"),"is-search":!0},{suffix:H(()=>[g(z,{size:"small",type:"text",name:p(h)("tags.confirm"),onClick:c},null,8,["name"])]),_:1},8,["value","placeholder"])])]),i("div",le,[i("div",ae,v(p(h)("color.select.selected")),1),i("div",{class:"select_show",style:O({backgroundColor:s.color})},[i("div",re,[i("div",ne,v(p(h)("color.select.black")),1),i("div",{class:"select_show_black",style:O({textShadow:`1px 1px 0 ${s.color}`})},v(p(h)("color.select.shadow")),5),i("div",ie,v(p(h)("color.select.white")),1),i("div",{class:"select_show_white",style:O({textShadow:`1px 1px 0 ${s.color}`})},v(p(h)("color.select.shadow")),5)])],4),i("div",ce,[i("div",null,[i("span",null,v(s.format.hex),1),i("span",{onClick:l[1]||(l[1]=()=>p(S)(s.format.hex))},[g(U,{size:"sm",type:p(N).CopyOutlined},null,8,["type"])])]),i("div",null,[i("span",null,v(s.format.rgb),1),i("span",{onClick:l[2]||(l[2]=()=>p(S)(s.format.rgb))},[g(U,{size:"sm",type:p(N).CopyOutlined},null,8,["type"])])]),i("div",null,[i("span",null,v(s.format.rgba),1),i("span",{onClick:l[3]||(l[3]=()=>p(S)(s.format.rgba))},[g(U,{size:"sm",type:p(N).CopyOutlined},null,8,["type"])])]),i("div",null,[i("span",null,v(s.format.hsl),1),i("span",{onClick:l[4]||(l[4]=()=>p(S)(s.format.hsl))},[g(U,{size:"sm",type:p(N).CopyOutlined},null,8,["type"])])]),i("div",null,[i("span",null,v(s.format.hsla),1),i("span",{onClick:l[5]||(l[5]=()=>p(S)(s.format.hsla))},[g(U,{size:"sm",type:p(N).CopyOutlined},null,8,["type"])])])])])]))}});const pe=M(de,[["__scopeId","data-v-49bf86d3"]]),_e={name:"DUploadList"},me=$({..._e,props:{maxSize:{default:20},allowTypes:{default:()=>L}},emits:["error","file"],setup(m,{emit:r}){const s=m,t=R([]),e=R("");function a(){if(t.value.length>0){const{originFileObj:u}=t.value[0];u&&o(u)?Y(u).then(d=>{const{src:_}=d;e.value=_,n(u)}).catch(()=>{c(),r("error","file error")}):(c(),r("error","file error"))}else e.value="",n("")}function c(){e.value="",t.value=[]}function n(u){r("file",{previewUrl:e.value,file:u})}function o(u){const{maxSize:d,allowTypes:_}=s,b=_.includes(u.type),x=u.size/1024/1024>d;return b&&!x}const l=()=>!1;return(u,d)=>(y(),j(Q,E(u.$attrs,{"file-list":t.value,"onUpdate:fileList":d[0]||(d[0]=_=>t.value=_),"show-upload-list":!1,"max-count":1,"before-upload":l,onChange:a}),{default:H(()=>[B(u.$slots,"default",{},()=>[g(z,{name:"Upload"})])]),_:3},16,["file-list"]))}}),he=m=>(W("data-v-d0436e56"),m=m(),P(),m),ge={class:"color-upload"},fe={class:"color-upload_upload"},be={class:"color-upload-show"},ve={class:"color-upload-show_image"},xe=["src"],ye={key:1,class:"tw-flex tw-h-full tw-justify-center tw-items-center"},we=he(()=>i("div",{class:"color-upload-show_canvas tw-hidden"},null,-1)),ke={name:"ColorUpload"},Ce=$({...ke,props:{imageUrl:{}},emits:["update:imageUrl"],setup(m,{emit:r}){function s(e){r("update:imageUrl",e.previewUrl)}function t(e){I(T.Error,e)}return(e,a)=>(y(),C("div",ge,[i("div",fe,[g(me,{"max-size":200,onFile:s,onError:t},{default:H(()=>[g(z,{name:p(h)("color.upload.image")},null,8,["name"])]),_:1})]),i("div",be,[i("div",ve,[e.imageUrl?(y(),C("img",{key:0,src:e.imageUrl},null,8,xe)):(y(),C("div",ye,[g(ee,{msg:p(h)("color.upload.notice.empty")},null,8,["msg"])]))]),we])]))}});const $e=M(Ce,[["__scopeId","data-v-d0436e56"]]),Se={class:"color-editor"},Ne={class:"editor_left"},Ue={class:"editor_title"},Ie={class:"editor_right"},Te={class:"editor_title"},He={class:"editor_right_upload"},Me={name:"ColorEditor"},Oe=$({...Me,setup(m){const r=R("");return V(()=>{A(()=>{var s;(s=document.getElementsByClassName("editor_right"))==null||s[0].addEventListener("paste",t=>{Z(t,L,!0).then(e=>{r.value=String(e)})})})}),(s,t)=>(y(),C("div",Se,[i("div",Ne,[i("div",Ue,v(p(h)("color.select.label")),1),i("div",null,[g(pe,{"image-url":r.value},null,8,["image-url"])])]),i("div",Ie,[i("div",Te,v(p(h)("color.upload.label")),1),i("div",He,[g($e,{"image-url":r.value,"onUpdate:imageUrl":t[0]||(t[0]=e=>r.value=e)},null,8,["image-url"])])])]))}});const Re=M(Oe,[["__scopeId","data-v-82a0ee27"]]),ze={class:"warp_bigger color_area"},je={name:"ModuleColor"},Le=$({...je,setup(m){return(r,s)=>(y(),C("div",ze,[g(G,{title:p(h)("module.color")},{default:H(()=>[g(Re)]),_:1},8,["title"])]))}});const De=M(Le,[["__scopeId","data-v-c0050130"]]),it=$({__name:"Color",setup(m){return(r,s)=>(y(),j(De))}});export{it as default};
