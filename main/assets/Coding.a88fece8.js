import{q as J,bd as b,d as $,b as M,ah as B,o as f,x as C,Y as T,c as I,a8 as R,a7 as e,bc as mt,aa as r,g as v,bq as F,a0 as s,t as dt,dh as _t,s as yt,a as x,w as d,aq as ht,v as _,X as vt,y as q}from"./index.f845ce86.js";import{U as wt}from"./UIWithTitle.fd081b1a.js";import{b as Ct,c as kt,d as bt,e as Ft,U as It}from"./UICreateImport.vue_vue_type_script_setup_true_lang.94666e8f.js";import{_ as H}from"./DButton.vue_vue_type_script_setup_true_lang.fc787979.js";import{d as St}from"./copyLib.5886d2ab.js";import{_ as $t}from"./DSelect.vue_vue_type_script_setup_true_lang.af9eeefc.js";import{_ as jt}from"./DCodeMirror.vue_vue_type_script_setup_true_lang.19c10999.js";import{u as Dt}from"./ModuleAutoSaveLib.b42ab6f3.js";import{_ as V}from"./_plugin-vue_export-helper.cdc0426e.js";import{u as Nt}from"./PortImport.vue_vue_type_script_setup_true_lang.02911f1a.js";import{D as Ut}from"./DTooltip.62c08d25.js";import{b as gt,E as qt}from"./Interface.f196cb1a.js";import{g as Mt}from"./fileLib.ce24036d.js";import"./ModuleCollapsetLib.683797af.js";import"./routeLib.f9bd26de.js";import"./findIndex.6579a158.js";import"./hasIn.6d551bb6.js";import"./memoize.b7cf5793.js";import"./_baseIsEqual.39909510.js";import"./index.13afd5a7.js";import"./KeyCode.9e37adda.js";import"./pick.d36ec3ec.js";import"./_flatRest.d171ccb2.js";import"./styleChecker.1fdcbc50.js";import"./debounce.d887a7e2.js";import"./now.326ab29c.js";import"./DResult.vue_vue_type_script_setup_true_lang.ab7c3612.js";import"./DSpin.70873d5a.js";import"./config.4ba8fdea.js";import"./codemirror.b6b547c8.js";import"./randomLib.04c6c9cc.js";import"./stringify.15412eb9.js";const p=J({folders:[],item:{}}),w=".coding",Bt={[b.Config]:"coding_config",[b.Folder]:"coding_folder",[b.Content]:"coding_content",[b.Env]:"coding_env"};var P=(t=>(t.C="text/x-csrc",t.CPP="text/x-c++src",t.CSharp="text/x-csharp",t.Css="text/css",t.Dockerfile="text/x-dockerfile",t.ErLang="text/x-erlang",t.Go="text/x-go",t.Html="text/html",t.Java="text/x-java",t.Javascript="text/javascript",t.Json="application/json",t.Kotlin="text/x-kotlin",t.Less="text/x-less",t.Lua="text/lua",t.Markdown="text/markdown",t.Nginx="text/x-nginx-conf",t.PHP="text/x-php",t.Protobuf="text/x-protobuf",t.Python="text/x-python",t.Ruby="text/x-ruby",t.Sass="text/x-scss",t.Shell="text/x-sh",t.Sql="text/x-sql",t.Scala="text/x-scala",t.Swift="text/x-swift",t.Text="text",t.Xml="application/xml",t.Yaml="application/x-yaml",t))(P||{});const S={["text/x-csrc"]:{types:["text/x-csrc"],suffixes:[".c",".h"]},["text/x-c++src"]:{types:["text/x-c++src"],suffixes:[".cpp"]},["text/x-csharp"]:{types:["text/x-csharp"],suffixes:[".cs",".aspx"]},["text/css"]:{types:["text/x-csrc"],suffixes:[".css"]},["text/x-dockerfile"]:{types:["text/x-dockerfile"],suffixes:[""]},["text/x-erlang"]:{types:["text/x-erlange"],suffixes:[".erl",".hrl"]},["text/x-go"]:{types:["text/x-go"],suffixes:[".go"]},["text/html"]:{types:["text/html"],suffixes:[".html",".htm"]},["text/x-java"]:{types:["text/x-java"],suffixes:[".java",".jsp"]},["text/javascript"]:{types:["text/javascript"],suffixes:[".ts",".js",".jsx",".vue"]},["text/x-kotlin"]:{types:["text/x-kotlin"],suffixes:[".kt"]},["text/x-less"]:{types:["text/x-less"],suffixes:[".less"]},["text/lua"]:{types:["text/lua"],suffixes:[".lua"]},["text/markdown"]:{types:["text/markdown"],suffixes:[".md"]},["text/x-nginx-conf"]:{types:["text/x-nginx-conf"],suffixes:[".conf"]},["text/x-php"]:{types:["text/x-php","text/php"],suffixes:[".php"]},["text/x-protobuf"]:{types:["text/x-protobuf"],suffixes:[".proto"]},["text/x-python"]:{types:["text/x-python","text/x-python-script"],suffixes:[".py"]},["text/x-ruby"]:{types:["text/x-ruby"],suffixes:[".rb",".ruby"]},["text/x-scss"]:{types:["text/x-scss"],suffixes:[".sass"]},["text/x-sh"]:{types:["text/x-sh"],suffixes:[".sh"]},["text/x-sql"]:{types:["text/x-sql"],suffixes:[".sql"]},["text/x-scala"]:{types:["text/x-scala"],suffixes:[".scala"]},["text/x-swift"]:{types:["text/x-swift"],suffixes:[".swift"]},text:{types:["text","text/plain"],suffixes:[".txt"]},["application/xml"]:{types:["application/xml"],suffixes:[".xml"]},["application/x-yaml"]:{types:["application/x-yaml"],suffixes:[".yaml",".yml"]},["application/json"]:{types:["application/json"],suffixes:[".json"]}};function Tt(){return{content:{mode:"text",content:"",suffix:{origin:"",current:S.text.suffixes[0]}},isSaved:0}}const Pt={name:"CodingLang"},At=$({...Pt,props:{mode:{}},emits:["update:mode"],setup(t,{emit:c}){const u=t,y=M(()=>{const n=[];return B(P,(m,h)=>{n.push({label:h,value:m})}),n}),a=M({get:()=>u.mode,set:n=>c("update:mode",n)});return(n,m)=>(f(),C($t,{"show-search":!0,style:{"min-width":"120px"},select:a.value,"onUpdate:select":m[0]||(m[0]=h=>a.value=h),options:y.value},null,8,["select","options"]))}}),Ht={class:"coding-content"},Jt={name:"CodingEditor"},Rt=$({...Jt,setup(t){const c=T("contentIdentity"),u=T("contentName");return Dt(p,c,["content"],u),(y,a)=>(f(),I("div",Ht,[(f(),C(jt,R(y.$attrs,{"is-use-format":!0,mode:e(p).item[e(c)].content.mode,key:e(c),theme:e(mt)[e(r).theme.current],"textarea-key":e(c),value:e(p).item[e(c)].content.content,"onUpdate:value":a[0]||(a[0]=n=>e(p).item[e(c)].content.content=n)}),null,16,["mode","theme","textarea-key","value"]))]))}});const Vt=V(Rt,[["__scopeId","data-v-4189cfa2"]]),Ot={class:"warp_bigger coding_area"},Wt={key:0,class:"show_area"},Xt={class:"tw-text-sm"},Yt={class:"tw-flex tw-justify-end tw-items-center"},zt={key:0},Gt={class:"tw-ml-4"},Kt={class:"tw-ml-2"},Qt={class:"tw-ml-2"},Zt={class:"tw-ml-2"},Et={name:"ModuleCoding"},Lt=$({...Et,setup(t){const c=T("storeIDB"),u=M(()=>{switch(r.os){case F.Mac:return v("coding.notice.quick.mac");case F.Linux:case F.Unix:case F.Win:default:return v("coding.notice.quick.win")}}),{curIsSaved:y,curContentIdentity:a,curContentName:n,curContentFolderIdentity:m,curFolders:h,curHistoryFolders:O,addFolder:W,renameFolder:X,deleteFolder:Y,sortFolder:z,createContent:G,saveContent:K,showContent:Q,renameContent:Z,copyContent:E,deleteContent:L,autoSaveContent:tt,importContent:et,getContent:st,saveFolder:ot,saveContentItem:at}=Nt(c,Bt,p,Tt());s("contentIsSaved",y),s("contentFolderIdentity",m),s("contentIdentity",a),s("contentName",n),s("historyFolders",O),s("folders",h),s("addFolder",W),s("renameFolder",X),s("deleteFolder",Y),s("showContent",Q),s("copyContent",E),s("renameContent",Z),s("deleteContent",L),s("sortFolder",z),s("saveContent",K),s("autoSaveContent",tt),s("getContent",st),s("saveFolder",ot),s("saveContentItem",at);const k=J({support:[],accept:""});dt(()=>{let l=[],o=[];B(S,i=>{const{suffixes:D,types:N}=i;l=[...l,...N],o=[...o,...D]}),k.support=l,k.accept=_t(o,",")+`,${w}`});function nt(){G()}function it(l){r.loading=!0;const{name:o,content:i,type:D,isSave:N,folderIdentity:xt}=l;let U=Mt(o),g;if(U!==w){let A="";B(S,(ft,ut)=>{if(ft.types.includes(D))return A=ut,!1});const pt=A||P.Text;g={content:i,mode:pt,suffix:{origin:U,current:U}}}else g=i;et(o,g,N,xt,w).then(()=>{r.loading=!1}).catch(()=>{r.loading=!1})}const j=yt(!1);function rt(){j.value=!0}function ct(){St(p.item[a.value].content.content||"")}function lt(l){const{content:o}=p.item[a.value];o.mode=l,o.suffix.current=S[l].suffixes[0]}return(l,o)=>(f(),I("div",Ot,[x(It,{collapse:e(r).historyDrawer.collapse,"onUpdate:collapse":o[3]||(o[3]=i=>e(r).historyDrawer.collapse=i),history:e(r).historyDrawer,suffix:e(w)},{default:d(()=>[e(a)?(f(),I("div",Wt,[x(wt,{title:e(v)(`module.${e(r).module}`),contentName:e(n),"onUpdate:contentName":o[2]||(o[2]=i=>ht(n)?n.value=i:null),"is-has-name":!0},{titleLeft:d(()=>[x(Ut,null,{anchor:d(()=>[x(gt,{type:e(qt).ExclamationCircleOutlined,size:"sm"},null,8,["type"])]),default:d(()=>[_("span",Xt,vt(u.value),1)]),_:1})]),titleRight:d(()=>[_("div",Yt,[e(a)?(f(),I("span",zt,[x(Ct,{"store-item-data":e(p).item[e(a)]},null,8,["store-item-data"])])):q("",!0),_("span",Gt,[x(At,{mode:e(p).item[e(a)].content.mode||"","onUpdate:mode":lt},null,8,["mode"])]),_("span",Kt,[x(kt,{"support-types":k.support,accept:k.accept,"store-item-data":e(p).item[e(a)],suffix:e(w),"is-use-export-use":!0,onSelect:nt,onContent:it},null,8,["support-types","accept","store-item-data","suffix"])]),_("span",Qt,[x(H,{name:e(v)("coding.code.format"),onClick:rt},null,8,["name"])]),_("span",Zt,[x(H,{type:"primary",name:e(v)("tags.copy"),onClick:ct},null,8,["name"])]),x(bt,R({class:"tw-ml-2"},l.$attrs),null,16),e(r).historyDrawer.collapse?(f(),C(Ft,{key:1,class:"tw-ml-2",visible:e(r).historyDrawer.visible,"onUpdate:visible":o[0]||(o[0]=i=>e(r).historyDrawer.visible=i)},null,8,["visible"])):q("",!0)])]),default:d(()=>[(f(),C(Vt,{key:e(a),"is-format":j.value,"onUpdate:isFormat":o[1]||(o[1]=i=>j.value=i)},null,8,["is-format"]))]),_:1},8,["title","contentName"])])):q("",!0)]),_:1},8,["collapse","history","suffix"])]))}});const te=V(Lt,[["__scopeId","data-v-5a9f209e"]]),qe=$({__name:"Coding",setup(t){return(c,u)=>(f(),C(te))}});export{qe as default};
