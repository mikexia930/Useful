import{d as $,q as D,M as F,o as y,c as C,v as c,a0 as v,$ as p,g as h,a as g,w as H,F as O,s as R,x as j,ag as B,a1 as E,at as W,au as P,t as V,U as A}from"./index.c3214609.js";import{_ as J,U as G}from"./UIWithTitle.ecee8726.js";import{s as K,D as Q}from"./DUpload.3ee7df55.js";import{d as S}from"./copyLib.1fa9ccad.js";import{a as N,_ as U,s as I,E as T}from"./Interface.dbd528a2.js";import{_ as z}from"./DButton.vue_vue_type_script_setup_true_lang.e16dae94.js";import{f as X,c as L,r as Y,d as Z,p as q}from"./fileLib.c4bc32da.js";import{t as ee,_ as te}from"./DResult.vue_vue_type_script_setup_true_lang.78329022.js";import{_ as M}from"./_plugin-vue_export-helper.cdc0426e.js";import"./DTooltip.0f458019.js";import"./_baseIsEqual.5cb87b9a.js";import"./findIndex.df2567c0.js";import"./hasIn.93447342.js";import"./memoize.bfe40189.js";import"./index.4a90695f.js";import"./styleChecker.995dbee2.js";import"./index.279ed12a.js";import"./Col.df8743ce.js";import"./responsiveObserve.65b40bc4.js";import"./last.934f6069.js";import"./_flatRest.c8325c51.js";import"./debounce.fb34cc77.js";import"./now.4cfd5464.js";var w=(m=>(m.Hex="hex",m.Rgb="rgb",m.Hsl="hsl",m.Hsla="hsla",m.Rgba="rgba",m))(w||{});class k{static _getRgb(r,s){let t=r.toLowerCase();const e=t.indexOf("rgba")==-1?0:1;t=e?t.replace("rgba",""):t.replace("rgb",""),t=t.replace(/\s/g,"").split(",");const a=Number(t[0].slice(1)),u=Number(t[1]),n=Number(e?t[2]:t[2].slice(0,-1)),o=e?Number(t[3].slice(0,-1))>1?1:Number(t[3].slice(0,-1)):1;return{r:a,g:u,b:n,o,complete:s?"rgba("+[a,u,n,o].join(",")+")":"rgb("+[a,u,n].join(",")+")"}}static _getHsl(r,s){let t=r.toLowerCase();const e=t.indexOf("hsla")==-1?0:1;t=e?t.replace("hsla",""):t.replace("hsl",""),t=t.replace(/\s/g,"").split(",");const a=Number(t[0].slice(1)),u=parseInt(t[1]),n=parseInt(e?t[2]:t[2].slice(0,-1)),o=e?Number(t[3].slice(0,-1))>1?1:Number(t[3].slice(0,-1)):1;return{h:a,s:u/100,l:n/100,o,complete:s?"hsla("+[a,u,n,o].join(",")+")":"hsl("+[a,u,n].join(",")+")"}}static _rgbToHex(r){let s=Number(r.r).toString(16),t=Number(r.g).toString(16),e=Number(r.b).toString(16),a=Math.round(r.o*255).toString(16),u=0;return s.length<2&&(s=0+s),t.length<2&&(t=0+t),e.length<2&&(e=0+e),a.length<2&&(a=0+a),s[0]==s[1]&&t[0]==t[1]&&e[0]==e[1]&&a[0]==a[1]&&(u=1),{r:s,g:t,b:e,o:a,complete:u?"#"+s[0]+t[0]+e[0]+(r.o==1?"":a):"#"+s+t+e+(r.o==1?"":a)}}static _rgbToHsl(r,s){const t=Number(r.r)/255,e=Number(r.g)/255,a=Number(r.b)/255,u=Number(r.o),n=Math.max(t,e,a),o=Math.min(t,e,a);let l,i,d=(n+o)/2;if(n==o)l=i=0;else{const f=n-o;switch(i=d<.5?f/(n+o):f/(2-n-o),n){case t:l=(e-a)/f;break;case e:l=(a-t)/f+2;break;case a:l=(t-e)/f+4;break}l=l*60,l=l<0?l+360:l}const _=Math.round(l),b=Math.round(i*100)+"%",x=Math.round(d*100)+"%";return{h:_,s:b,l:x,o:u,complete:s?"hsla("+[_,b,x,u].join(",")+")":"hsl("+[_,b,x].join(",")+")"}}static _hexToRgb(r,s){let t,e,a,u;const n=r.replace("#",""),o=n.split("");return n.length==3||n.length==4?(t=parseInt(o[0]+o[0],16),e=parseInt(o[1]+o[1],16),a=parseInt(o[2]+o[2],16),r.length==4?u=Math.round(parseInt(o[3]+o[3],16)/255*100)/100:u=1):(n.length==8||n.length==6)&&(t=parseInt(o[0]+o[1],16),e=parseInt(o[2]+o[3],16),a=parseInt(o[4]+o[5],16),r.length==8?u=Math.round(parseInt(o[6]+o[7],16)/255*100)/100:u=1),{r:t,g:e,b:a,o:u,complete:s?"rgba("+[t,e,a,u].join(",")+")":"rgb("+[t,e,a].join(",")+")"}}static _hslToRgb(r,s){let t=Number(r.h),e=Number(r.s),a=Number(r.l),u=Number(r.o),n,o,l;if(e==0)n=o=l=a;else{const i=a<.5?a*(1+e):a+e-a*e,d=2*a-i;t/=360;const _=function(b,x,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?b+(x-b)*6*f:f<1/2?x:f<2/3?b+(x-b)*(2/3-f)*6:b};n=_(d,i,t+1/3),o=_(d,i,t),l=_(d,i,t-1/3)}return n=Math.round(n*255),o=Math.round(o*255),l=Math.round(l*255),{r:n,g:o,b:l,o:u,complete:s?"rgba("+[n,o,l,u].join(",")+")":"rgb("+[n,o,l].join(",")+")"}}static exchange(r){return new Promise((s,t)=>{let e;const a=r&&r.color&&r.color.replace(/\s/g,"").toLowerCase()||"#fff",u=r&&r.format&&r.format.replace(/\s/g,"").toLowerCase()||"rgb",n=u.indexOf("rgba")==-1?0:1,o=u.indexOf("hsla")==-1?0:1;if(a.indexOf("#")>-1)switch(u){case"hex":e=this._hexToRgb(a,n),e=this._rgbToHex(e);break;case"rgb":case"rgba":e=this._hexToRgb(a,n);break;case"hsl":case"hsla":e=this._hexToRgb(a,n),e=this._rgbToHsl(e,o);break}else if(a.indexOf("rgb")>-1)switch(e=this._getRgb(a,n),u){case"hex":e=this._rgbToHex(e);break;case"hsl":case"hsla":e=this._rgbToHsl(e,o);break}else if(a.indexOf("hsl")>-1)switch(e=this._getHsl(a,o),e=this._hslToRgb(e,n),u){case"hex":e=this._rgbToHex(e);break;case"hsl":case"hsla":e=this._rgbToHsl(e,o);break}else t("color error");s(e.complete)})}}const se={class:"editor-select"},oe={class:"select_title"},le={class:"select_title tw-my-4"},ae={class:"select_selected"},re={class:"select_title"},ne={class:"select_show_font"},ce={class:"select_show_black"},ie={class:"select_show_white"},ue={class:"select_show_format"},de={name:"ColorSelect"},pe=$({...de,props:{imageUrl:{}},setup(m){const r=m,s=D({color:"#2e81ff",input:"",format:{hex:"",rgb:"",rgba:"",hsl:"",hsla:""},suck:{canvas:null,area:[]}});function t(o,l,i=void 0){const d=document.getElementsByClassName("color-upload-show_canvas")[0],_=document.getElementsByClassName("color-upload-show_image")[0];_&&d&&(_.style.display=o?"block":"none",d.style.display=l?"block":"none",i?d.appendChild(i):d.removeChild(d.childNodes[0]))}function e(o){var l;if(o){const{imageUrl:i}=r;X(i).then(d=>{const{canvas:_,height:b,width:x}=d;s.suck.canvas=_,s.suck.area=[0,b,x,b],i?t(!1,!0,_):(t(!0,!1,_),I(T.Warning,h("color.upload.notice.empty")))}).catch(d=>{console.log("covertImageToCanvas",d),I(T.Warning,h("color.upload.notice.empty")),t(!0,!1)})}else t(!0,!1),s.suck.canvas&&((l=s.suck.canvas)==null||l.remove)}function a(o){const{r:l,g:i,b:d,a:_}=o.rgba;s.color=`rgba(${l}, ${i}, ${d}, ${_})`}function u(){const o=ee(s.input);o?k.exchange({color:o,format:w.Rgba}).then(l=>{s.color=String(l)}).catch(()=>{I(T.Error,h("color.select.input.notice.error"))}):I(T.Warning,h("color.select.input.notice.empty"))}function n(o){o&&(k.exchange({color:o,format:w.Rgb}).then(l=>{s.format.rgb=String(l)}),k.exchange({color:o,format:w.Rgba}).then(l=>{s.format.rgba=String(l)}),k.exchange({color:o,format:w.Hsl}).then(l=>{s.format.hsl=String(l)}),k.exchange({color:o,format:w.Hsla}).then(l=>{s.format.hsla=String(l)}),k.exchange({color:o,format:w.Hex}).then(l=>{let i=String(l);i.length>7&&(i=i.substring(0,7)),s.format.hex=i}))}return F(()=>s.color,o=>{n(o)},{immediate:!0}),(o,l)=>(y(),C("div",se,[c("div",null,[c("div",oe,v(p(h)("color.select.select")),1),g(p(K),{theme:"light",color:s.color,"sucker-hide":!1,"sucker-canvas":s.suck.canvas,"sucker-area":s.suck.area,onChangeColor:a,onOpenSucker:e},null,8,["color","sucker-canvas","sucker-area"]),c("div",le,v(p(h)("color.select.input.label")),1),c("div",null,[g(J,{style:{"font-size":"12px"},value:s.input,"onUpdate:value":l[0]||(l[0]=i=>s.input=i),placeholder:p(h)("color.select.input.placeholder"),"is-search":!0},{suffix:H(()=>[g(z,{size:"small",type:"text",name:p(h)("tags.confirm"),onClick:u},null,8,["name"])]),_:1},8,["value","placeholder"])])]),c("div",ae,[c("div",re,v(p(h)("color.select.selected")),1),c("div",{class:"select_show",style:O({backgroundColor:s.color})},[c("div",ne,[c("div",ce,v(p(h)("color.select.black")),1),c("div",{class:"select_show_black",style:O({textShadow:`1px 1px 0 ${s.color}`})},v(p(h)("color.select.shadow")),5),c("div",ie,v(p(h)("color.select.white")),1),c("div",{class:"select_show_white",style:O({textShadow:`1px 1px 0 ${s.color}`})},v(p(h)("color.select.shadow")),5)])],4),c("div",ue,[c("div",null,[c("span",null,v(s.format.hex),1),c("span",{onClick:l[1]||(l[1]=()=>p(S)(s.format.hex))},[g(U,{size:"sm",type:p(N).CopyOutlined},null,8,["type"])])]),c("div",null,[c("span",null,v(s.format.rgb),1),c("span",{onClick:l[2]||(l[2]=()=>p(S)(s.format.rgb))},[g(U,{size:"sm",type:p(N).CopyOutlined},null,8,["type"])])]),c("div",null,[c("span",null,v(s.format.rgba),1),c("span",{onClick:l[3]||(l[3]=()=>p(S)(s.format.rgba))},[g(U,{size:"sm",type:p(N).CopyOutlined},null,8,["type"])])]),c("div",null,[c("span",null,v(s.format.hsl),1),c("span",{onClick:l[4]||(l[4]=()=>p(S)(s.format.hsl))},[g(U,{size:"sm",type:p(N).CopyOutlined},null,8,["type"])])]),c("div",null,[c("span",null,v(s.format.hsla),1),c("span",{onClick:l[5]||(l[5]=()=>p(S)(s.format.hsla))},[g(U,{size:"sm",type:p(N).CopyOutlined},null,8,["type"])])])])])]))}});const _e=M(pe,[["__scopeId","data-v-bc8639ad"]]),me={name:"DUploadList"},he=$({...me,props:{maxSize:{default:20},allowTypes:{default:()=>L}},emits:["error","file"],setup(m,{emit:r}){const s=m,t=R([]),e=R("");function a(){if(t.value.length>0){const{originFileObj:i}=t.value[0];i&&o(i)?Y(i).then(d=>{const{src:_}=d;e.value=_,n(i)}).catch(()=>{u(),r("error","file error")}):(u(),r("error","file error"))}else e.value="",n("")}function u(){e.value="",t.value=[]}function n(i){r("file",{previewUrl:e.value,file:i})}function o(i){const{maxSize:d,allowTypes:_}=s,b=Z(i.type,_),x=i.size/1024/1024>d;return b&&!x}const l=()=>!1;return(i,d)=>(y(),j(Q,E(i.$attrs,{"file-list":t.value,"onUpdate:fileList":d[0]||(d[0]=_=>t.value=_),"show-upload-list":!1,"max-count":1,"before-upload":l,onChange:a}),{default:H(()=>[B(i.$slots,"default",{},()=>[g(z,{name:"Upload"})])]),_:3},16,["file-list"]))}}),ge=m=>(W("data-v-d0436e56"),m=m(),P(),m),fe={class:"color-upload"},be={class:"color-upload_upload"},ve={class:"color-upload-show"},xe={class:"color-upload-show_image"},ye=["src"],we={key:1,class:"tw-flex tw-h-full tw-justify-center tw-items-center"},ke=ge(()=>c("div",{class:"color-upload-show_canvas tw-hidden"},null,-1)),Ce={name:"ColorUpload"},$e=$({...Ce,props:{imageUrl:{}},emits:["update:imageUrl"],setup(m,{emit:r}){function s(e){r("update:imageUrl",e.previewUrl)}function t(e){I(T.Error,e)}return(e,a)=>(y(),C("div",fe,[c("div",be,[g(he,{"max-size":200,onFile:s,onError:t},{default:H(()=>[g(z,{name:p(h)("color.upload.image")},null,8,["name"])]),_:1})]),c("div",ve,[c("div",xe,[e.imageUrl?(y(),C("img",{key:0,src:e.imageUrl},null,8,ye)):(y(),C("div",we,[g(te,{msg:p(h)("color.upload.notice.empty")},null,8,["msg"])]))]),ke])]))}});const Se=M($e,[["__scopeId","data-v-d0436e56"]]),Ne={class:"color-editor"},Ue={class:"editor_left"},Ie={class:"editor_title"},Te={class:"editor_right"},He={class:"editor_title"},Me={class:"editor_right_upload"},Oe={name:"ColorEditor"},Re=$({...Oe,setup(m){const r=R("");return V(()=>{A(()=>{var s;(s=document.getElementsByClassName("editor_right"))==null||s[0].addEventListener("paste",t=>{q(t,L,!0).then(e=>{r.value=String(e)})})})}),(s,t)=>(y(),C("div",Ne,[c("div",Ue,[c("div",Ie,v(p(h)("color.select.label")),1),c("div",null,[g(_e,{"image-url":r.value},null,8,["image-url"])])]),c("div",Te,[c("div",He,v(p(h)("color.upload.label")),1),c("div",Me,[g(Se,{"image-url":r.value,"onUpdate:imageUrl":t[0]||(t[0]=e=>r.value=e)},null,8,["image-url"])])])]))}});const ze=M(Re,[["__scopeId","data-v-82a0ee27"]]),je={class:"warp_bigger color_area"},Le={name:"ModuleColor"},De=$({...Le,setup(m){return(r,s)=>(y(),C("div",je,[g(G,{title:p(h)("module.color")},{default:H(()=>[g(ze)]),_:1},8,["title"])]))}});const Fe=M(De,[["__scopeId","data-v-c0050130"]]),it=$({__name:"Color",setup(m){return(r,s)=>(y(),j(Fe))}});export{it as default};
