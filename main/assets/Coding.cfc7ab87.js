import{q as U,d as S,K as $,o as c,c as C,x as y,a1 as B,$ as e,bg as re,a4 as n,S as t,t as ae,aj as D,di as ie,a as m,w,g as b,av as de,v as I,y as F}from"./index.c3214609.js";import{D as ce,C as E,c as u,i as le,a as me,E as pe}from"./DCodeMirror.0b43063e.js";import{U as ue}from"./UIWithTitle.ecee8726.js";import{b as _e,c as fe,d as Ce,e as ye,U as ge}from"./UICreateImport.vue_vue_type_script_setup_true_lang.58b157a9.js";import{_ as ve}from"./DButton.vue_vue_type_script_setup_true_lang.e16dae94.js";import{d as he}from"./copyLib.1fa9ccad.js";import{u as xe}from"./ModuleAutoSaveLib.c58791b0.js";import{_ as M}from"./_plugin-vue_export-helper.cdc0426e.js";import{u as we}from"./PortImport.vue_vue_type_script_setup_true_lang.803ac0fc.js";import{g as Ie}from"./fileLib.c4bc32da.js";import"./DTooltip.0f458019.js";import"./Interface.dbd528a2.js";import"./_baseIsEqual.5cb87b9a.js";import"./DSelect.vue_vue_type_script_setup_true_lang.8a285078.js";import"./KeyCode.9e37adda.js";import"./codemirror.9a06b5d5.js";import"./ModuleCollapsetLib.64a30fa6.js";import"./routeLib.772d14c3.js";import"./findIndex.df2567c0.js";import"./hasIn.93447342.js";import"./memoize.bfe40189.js";import"./index.7f436b9e.js";import"./pick.13f70975.js";import"./_flatRest.c8325c51.js";import"./styleChecker.995dbee2.js";import"./debounce.fb34cc77.js";import"./now.4cfd5464.js";import"./DResult.vue_vue_type_script_setup_true_lang.78329022.js";import"./DSpin.d6233a34.js";import"./config.aa76b2c0.js";import"./randomLib.04c6c9cc.js";import"./stringify.15412eb9.js";const d=U({folders:[],item:{}}),Fe={class:"coding-content"},$e={name:"CodingEditor"},Se=S({...$e,setup(k){const s=$("contentIdentity"),_=$("contentName");return xe(d,s,["content"],_),(a,i)=>(c(),C("div",Fe,[(c(),y(ce,B(a.$attrs,{"is-use-format":!0,"is-use-border":!0,"is-select-mode":!0,key:e(s),theme:e(re)[e(n).theme.current],"textarea-key":e(s),value:e(d).item[e(s)].content.content,"onUpdate:value":i[0]||(i[0]=p=>e(d).item[e(s)].content.content=p),mode:e(d).item[e(s)].content.mode,"onUpdate:mode":i[1]||(i[1]=p=>e(d).item[e(s)].content.mode=p)}),null,16,["theme","textarea-key","value","mode"]))]))}});const ke=M(Se,[["__scopeId","data-v-dca79e7e"]]),Ne={class:"warp_bigger coding_area"},De={key:0,class:"show_area"},be={class:"tw-flex tw-justify-end tw-items-center"},Ee={key:0},Ue={class:"tw-ml-2"},Be={class:"tw-ml-2"},Me={name:"ModuleCoding"},Te=S({...Me,setup(k){const s=$("storeIDB"),{curIsSaved:_,curContentIdentity:a,curContentName:i,curContentFolderIdentity:p,curFolders:T,curHistoryFolders:j,addFolder:A,renameFolder:V,deleteFolder:L,sortFolder:R,createContent:q,saveContent:H,showContent:K,renameContent:P,copyContent:W,deleteContent:z,autoSaveContent:G,importContent:J,getContent:O,saveFolder:Q,saveContentItem:X}=we(s,me,d,le());t("contentIsSaved",_),t("contentFolderIdentity",p),t("contentIdentity",a),t("contentName",i),t("historyFolders",j),t("folders",T),t("addFolder",A),t("renameFolder",V),t("deleteFolder",L),t("showContent",K),t("copyContent",W),t("renameContent",P),t("deleteContent",z),t("sortFolder",R),t("saveContent",H),t("autoSaveContent",G),t("getContent",O),t("saveFolder",Q),t("saveContentItem",X);const f=U({support:[],accept:""});ae(()=>{let l=[],o=[];D(E,r=>{const{suffixes:g,types:v}=r;l=[...l,...v],o=[...o,...g]}),f.support=l,f.accept=ie(o,",")+`,${u}`});function Y(){q()}function Z(l){n.loading=!0;const{name:o,content:r,type:g,isSave:v,folderIdentity:te}=l;let h=Ie(o),x;if(h!==u){let N="";D(E,(ne,se)=>{if(ne.types.includes(g))return N=se,!1});const oe=N||pe.Text;x={content:r,mode:oe,suffix:{origin:h,current:h}}}else x=r;J(o,x,v,te,u).then(()=>{n.loading=!1}).catch(()=>{n.loading=!1})}function ee(){he(d.item[a.value].content.content||"")}return(l,o)=>(c(),C("div",Ne,[m(ge,{collapse:e(n).historyDrawer.collapse,"onUpdate:collapse":o[2]||(o[2]=r=>e(n).historyDrawer.collapse=r),history:e(n).historyDrawer,suffix:e(u)},{default:w(()=>[e(a)?(c(),C("div",De,[m(ue,{title:e(b)(`module.${e(n).module}`),contentName:e(i),"onUpdate:contentName":o[1]||(o[1]=r=>de(i)?i.value=r:null),"is-has-name":!0},{titleRight:w(()=>[I("div",be,[e(a)?(c(),C("span",Ee,[m(_e,{"store-item-data":e(d).item[e(a)]},null,8,["store-item-data"])])):F("",!0),I("span",Ue,[m(fe,{"support-types":f.support,accept:f.accept,"store-item-data":e(d).item[e(a)],suffix:e(u),"is-use-export-use":!0,onSelect:Y,onContent:Z},null,8,["support-types","accept","store-item-data","suffix"])]),I("span",Be,[m(ve,{type:"primary",name:e(b)("tags.copy"),onClick:ee},null,8,["name"])]),m(Ce,B({class:"tw-ml-2"},l.$attrs),null,16),e(n).historyDrawer.collapse?(c(),y(ye,{key:1,class:"tw-ml-2",visible:e(n).historyDrawer.visible,"onUpdate:visible":o[0]||(o[0]=r=>e(n).historyDrawer.visible=r)},null,8,["visible"])):F("",!0)])]),default:w(()=>[(c(),y(ke,{key:e(a)}))]),_:1},8,["title","contentName"])])):F("",!0)]),_:1},8,["collapse","history","suffix"])]))}});const je=M(Te,[["__scopeId","data-v-856d258f"]]),ft=S({__name:"Coding",setup(k){return(s,_)=>(c(),y(je))}});export{ft as default};
