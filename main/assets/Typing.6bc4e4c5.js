import{_ as G}from"./DMarkdown.vue_vue_type_script_setup_true_lang.815f497e.js";import{b as g}from"./config.f9e89767.js";import{X as J,d as w,B as v,o as p,c as I,a as s,a4 as t,b as D,a5 as C,D as e,au as y,at as u,a6 as F,av as K,a3 as Q,W as r}from"./index.611b52b0.js";import{u as Y}from"./ModuleAutoSaveLib.04e12bb3.js";import{s as Z}from"./storeSocket.d6226510.js";import{_ as E}from"./_plugin-vue_export-helper.cdc0426e.js";import{U as tt,_ as et}from"./UIWithTitle.30bc1e52.js";import{a as nt,u as ot,b as st,c as at,_ as rt,d as it,e as ct,U as lt}from"./PortExport.vue_vue_type_script_setup_true_lang.c939a6dc.js";import{g as f}from"./lib.75e6cd80.js";import{E as mt,a as h}from"./DConfirm.15e4c3c0.js";import{_ as pt,E as dt}from"./Interface.48732bbd.js";import{d as b}from"./copyLib.49c87afd.js";import"./dayjs.min.6c47bd3a.js";import"./memoize.c79247e9.js";import"./dateLib.63528a18.js";import"./advancedFormat.16ff0fee.js";import"./forEach.99eaac2d.js";import"./identity.ef62d0c1.js";import"./isPlainObject.4756aa4c.js";import"./DCheckbox.vue_vue_type_script_setup_true_lang.29ca96b9.js";import"./Modal.a2e097dd.js";import"./styleChecker.fdf7553f.js";import"./index.fcfefed5.js";import"./index.410413ae.js";import"./hasIn.84fb846a.js";import"./toNumber.d0d01f72.js";import"./messageLib.15acb5c4.js";import"./randomLib.04c6c9cc.js";import"./stringify.15412eb9.js";import"./cloneDeep.87697a00.js";const _t="ed",ut=".md",yt={[g.Config]:"typing_config",[g.Folder]:"typing_folder",[g.Content]:"typing_content",[g.Env]:"typing_env"};function ft(){return{content:{content:"",html:""},isSaved:0}}const l=J({folders:[],item:{}}),gt={class:"typing-content"},ht={name:"TypingEditor"},vt=w({...ht,setup(x){const n=v("contentIdentity");Y(Z,n,["content"]);function o(d){l.item[n.value].content.html=d}return(d,_)=>(p(),I("div",gt,[s(G,{"show-code-row-number":!0,"text-identity":`${t(_t)}-${t(n)}`,content:t(l).item[t(n)].content.content,"onUpdate:content":_[0]||(_[0]=a=>t(l).item[t(n)].content.content=a),style:{height:"100%"},onOnHtmlChanged:o},null,8,["text-identity","content"])]))}});const Ct=E(vt,[["__scopeId","data-v-8ce4fe7a"]]),wt={name:"TypingExport"},xt=w({...wt,setup(x){const n=v("contentIdentity"),o=v("contentName"),d=D(()=>({module:mt.Typing,identity:n.value})),_=D(()=>{const a={name:"",content:"",html:"",suffix:""};return a.name=o.value,a.content=l.item[n.value].content.content,a.html=l.item[n.value].content.html||"",a});return(a,T)=>(p(),C(nt,{module:d.value,data:_.value,type:t(h).MD,types:[t(h).MD,t(h).HTML,t(h).PDF]},null,8,["module","data","type","types"]))}}),It={class:"warp_bigger format_area"},Tt={class:"show_area"},$t={class:"tw-flex tw-justify-end tw-items-center"},Dt={key:0},Ft={class:"tw-ml-2"},bt={class:"tw-ml-2"},Et={class:"tw-mr-1"},kt={class:"tw-ml-2"},St={name:"ModuleTyping"},Mt=w({...St,setup(x){const n=v("storeIDB"),{curContentIdentity:o,curContentName:d,curContentFolderIdentity:_,curFolders:a,curHistoryFolders:T,addFolder:k,renameFolder:S,deleteFolder:M,sortFolder:B,createContent:N,saveContent:U,showContent:H,renameContent:V,copyContent:O,deleteContent:P,autoSaveContent:j,importContent:W}=ot(n,yt,l,ft());e("contentFolderIdentity",_),e("contentIdentity",o),e("contentName",d),e("historyFolders",T),e("folders",a),e("addFolder",k),e("renameFolder",S),e("deleteFolder",M),e("showContent",H),e("copyContent",O),e("renameContent",V),e("deleteContent",P),e("sortFolder",B),e("saveContent",U),e("autoSaveContent",j);function z(){N()}function A(i){r.loading=!0;const{name:c,content:m,isSave:X,folderIdentity:q}=i;W(c,{content:m},X,q).then(()=>{r.loading=!1}).catch(()=>{r.loading=!1})}let $;(i=>{i.Markdown="markdown",i.Html="html"})($||($={}));const L=[{value:"markdown",label:f("typing.markdownValue")},{value:"html",label:f("typing.htmlValue")}];function R(i){const{html:c,content:m}=l.item[o.value].content;i==="markdown"?b(m||""):b(c||"")}return(i,c)=>(p(),I("div",It,[s(lt,{collapse:t(r).historyDrawer.collapse,"onUpdate:collapse":c[1]||(c[1]=m=>t(r).historyDrawer.collapse=m),history:t(r).historyDrawer},{default:y(()=>[u("div",Tt,[s(tt,{title:t(f)("module.typing")},{titleRight:y(()=>[u("div",$t,[t(o)?(p(),I("span",Dt,[s(st,{"store-item-data":t(l).item[t(o)]},null,8,["store-item-data"])])):F("",!0),u("span",Ft,[s(at,{"support-types":["text/markdown"],accept:[t(ut)],"un-support-msg":t(f)("port.mdOnly"),onSelect:z,onContent:A},null,8,["accept","un-support-msg"])]),u("span",bt,[s(rt,{data:L,onSelected:R},{anchor:y(()=>[s(et,{type:"primary"},{default:y(()=>[u("span",Et,K(t(f)("tags.copy")),1),s(pt,{type:t(dt).DownOutlined,size:"xs"},null,8,["type"])]),_:1})]),_:1})]),u("span",kt,[s(xt)]),s(it,Q({class:"tw-ml-2"},i.$attrs),null,16),t(r).historyDrawer.collapse?(p(),C(ct,{key:1,class:"tw-ml-2",visible:t(r).historyDrawer.visible,"onUpdate:visible":c[0]||(c[0]=m=>t(r).historyDrawer.visible=m)},null,8,["visible"])):F("",!0)])]),default:y(()=>[(p(),C(Ct,{key:t(o)}))]),_:1},8,["title"])])]),_:1},8,["collapse","history"])]))}});const Bt=E(Mt,[["__scopeId","data-v-ba901c8e"]]),me=w({__name:"Typing",setup(x){return(n,o)=>(p(),C(Bt))}});export{me as default};
