import{_ as j}from"./DButton.vue_vue_type_script_setup_true_lang.8a7aefad.js";import{_ as se,U as le}from"./UIWithTitle.3e9cc2fb.js";import{q as ae,d as N,b as ie,o as E,c as P,v as k,a as I,$ as f,g as C,R as ue,Z as fe,a0 as W,ao as ne,a4 as w,K as J,w as R,z as de,m as pe,n as ve,s as me,dn as ge,aO as he,dp as ye,bf as Q,S as M,at as Se,y as ee,a1 as be,x as te}from"./index.aa9234e1.js";import{_ as H}from"./_plugin-vue_export-helper.cdc0426e.js";import{a as U,_ as xe,s as B,E as V}from"./Interface.fda4bb57.js";import{d as Ce}from"./copyLib.306a4c72.js";import{_ as ke}from"./DInputNumber.vue_vue_type_script_setup_true_lang.cc5f970f.js";import{_ as Ie,b as _e,c as Me,d as Oe,e as we,U as Ee}from"./UICreateImport.vue_vue_type_script_setup_true_lang.9e2ebb42.js";import{a as De,u as Fe}from"./PortImport.vue_vue_type_script_setup_true_lang.a38e66cd.js";import{D as oe}from"./DFormItem.f51e8402.js";import{u as Te}from"./ModuleAutoSaveLib.f5c63669.js";import{t as re}from"./DResult.vue_vue_type_script_setup_true_lang.89b79348.js";import"./DTooltip.b8cdb8df.js";import"./_baseIsEqual.3d349b77.js";import"./DSelect.vue_vue_type_script_setup_true_lang.89f47b6a.js";import"./KeyCode.9e37adda.js";import"./ModuleCollapsetLib.88db3687.js";import"./routeLib.390f25a1.js";import"./findIndex.a88ac902.js";import"./hasIn.8d781537.js";import"./memoize.4464d5ef.js";import"./index.c23fe160.js";import"./pick.efc0f760.js";import"./_flatRest.64809e56.js";import"./styleChecker.86ed2c0d.js";import"./debounce.e33dc256.js";import"./now.24a82a2d.js";import"./fileLib.3a4ae2a3.js";import"./DSpin.54dd59a3.js";import"./config.aa76b2c0.js";import"./randomLib.04c6c9cc.js";import"./stringify.15412eb9.js";import"./index.50d2d1d1.js";import"./Col.2fbd287a.js";import"./responsiveObserve.1a00559a.js";import"./last.879bf4f3.js";const m=ae({folders:[],item:{},isConnecting:!1,isConnect:!1}),$e={class:"url_area"},Pe={class:"url_input"},je={class:"url_btn"},Le={name:"SocketUrl"},Ue=N({...Le,props:{url:{}},emits:["update:url","connect","cancel","clear","reset"],setup(_,{emit:b}){const o=_,i=ie({get:()=>o.url,set:s=>b("update:url",s)});function e(){b("connect")}function t(){b("cancel")}function n(){b("clear")}function r(){b("reset")}return(s,a)=>(E(),P("div",$e,[k("div",Pe,[I(se,{value:i.value,"onUpdate:value":a[0]||(a[0]=u=>i.value=u),placeholder:f(C)("socket.url"),"allow-clear":!0},null,8,["value","placeholder"])]),k("div",je,[I(j,{onClick:e,type:"primary",disabled:f(m).isConnecting||f(m).isConnect,name:f(C)("socket.operate.connect")},null,8,["disabled","name"]),I(j,{onClick:t,type:"primary",danger:!0,disabled:!f(m).isConnect,name:f(C)("tags.cancel")},null,8,["disabled","name"]),I(j,{onClick:n,name:f(C)("tags.clear")},null,8,["name"]),I(j,{onClick:r,disabled:f(m).isConnecting,type:"primary",danger:!0,name:f(C)("tags.reset")},null,8,["disabled","name"])])]))}});const Re=H(Ue,[["__scopeId","data-v-80c93b3e"]]);var O=(_=>(_.Up="up",_.Down="down",_.Connect="connect",_.Connected="connected",_.Close="close",_.Disconnect="disconnect",_.Ping="ping",_))(O||{});const Ne={class:"tw-mr-2"},Ae={name:"SocketResponse"},Be=N({...Ae,props:{resultData:{}},setup(_){const b=_,o={[O.Up]:U.VerticalAlignTopOutlined,[O.Close]:U.GlobalOutlined,[O.Ping]:U.HeartOutlined,[O.Down]:U.VerticalAlignBottomOutlined,[O.Connect]:U.SwapOutlined,[O.Connected]:U.RetweetOutlined,[O.Disconnect]:U.DisconnectOutlined};function i(t){Ce(t)}function e(t){b.resultData.splice(t,1)}return(t,n)=>(E(),P("div",{class:ne(["result_area",`${f(w).theme.current}LightBg`])},[(E(!0),P(ue,null,fe(t.resultData,(r,s)=>(E(),P("div",{class:"result_item",key:s},[k("span",null,[I(xe,{type:o[r.type]},null,8,["type"])]),k("span",null," [ "+W(r.time)+" ] ",1),k("span",null,W(r.value),1),k("span",null,[k("span",Ne,[I(j,{onClick:a=>i(r.value),size:"small",name:f(C)("tags.copy")},null,8,["onClick","name"])]),k("span",null,[I(j,{type:"danger",onClick:a=>e(s),size:"small",name:f(C)("tags.delete")},null,8,["onClick","name"])])])]))),128))],2))}});const Ve=H(Be,[["__scopeId","data-v-a109184d"]]),We={class:"bottom_work"},He={class:"work_setting"},Ge={class:"work_setting_title"},Ke={class:"tw-flex tw-items-end tw-ml-2 tw-pb-4"},ze={class:"work_input"},Qe={class:"work_setting_title"},Xe={class:"work_button"},Je={name:"SocketSend"},Ze=N({...Je,props:{message:{}},emits:["update:message","send","heartbeat"],setup(_,{emit:b}){const o=_,i=J("contentIdentity"),e=ie({get:()=>o.message,set:s=>b("update:message",s)});function t(){b("send")}const n=ae({isPing:m.item[i.value].content.heart.isPing,time:m.item[i.value].content.heart.time,value:m.item[i.value].content.heart.value});function r(){const{isPing:s,time:a,value:u}=n;b("heartbeat",{isPing:s,time:a,value:u})}return(s,a)=>(E(),P("div",We,[k("div",{class:ne(["content_area",`${f(w).theme.current}MainBg`])},[k("div",He,[k("div",null,[k("div",Ge,[k("span",null,W(f(C)("socket.request.pingSetting")),1),k("span",null,[I(De,{checked:n.isPing,"onUpdate:checked":a[0]||(a[0]=u=>n.isPing=u),name:f(C)("socket.request.isPing")},null,8,["checked","name"])])]),I(oe,{label:f(C)("socket.request.interval")},{default:R(()=>[I(ke,{value:n.time,"onUpdate:value":a[1]||(a[1]=u=>n.time=u),min:1,max:60},{addonAfter:R(()=>[de(W(f(C)("setting.common.seconds")),1)]),_:1},8,["value"])]),_:1},8,["label"]),I(oe,{label:f(C)("socket.request.heartMessage")},{default:R(()=>[I(se,{value:n.value,"onUpdate:value":a[2]||(a[2]=u=>n.value=u),placeholder:f(C)("socket.request.pingValue")},null,8,["value","placeholder"])]),_:1},8,["label"])]),k("div",Ke,[I(j,{type:"primary",name:f(C)("socket.operate.set"),onClick:r},null,8,["name"])])]),k("div",ze,[k("div",Qe,W(f(C)("socket.request.sendMessage")),1),I(Ie,{value:e.value,"onUpdate:value":a[3]||(a[3]=u=>e.value=u),placeholder:f(C)("socket.request.placeholder")},null,8,["value","placeholder"])]),k("div",Xe,[I(j,{type:"primary",name:f(C)("socket.operate.send"),disabled:f(m).isConnecting||!f(m).isConnect,onClick:t},null,8,["name","disabled"])])],2)]))}});const Ye=H(Ze,[["__scopeId","data-v-a2ad7179"]]);var ce={exports:{}};(function(_,b){(function(i,e){_.exports=e()})(typeof self<"u"?self:pe,function(){return function(o){var i={};function e(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return o[t].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=o,e.c=i,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(n&1&&(t=e(t)),n&8||n&4&&typeof t=="object"&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),n&2&&typeof t!="string")for(var s in t)e.d(r,s,function(a){return t[a]}.bind(null,s));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s="fb15")}({"0366":function(o,i,e){var t=e("1c0b");o.exports=function(n,r,s){if(t(n),r===void 0)return n;switch(s){case 0:return function(){return n.call(r)};case 1:return function(a){return n.call(r,a)};case 2:return function(a,u){return n.call(r,a,u)};case 3:return function(a,u,c){return n.call(r,a,u,c)}}return function(){return n.apply(r,arguments)}}},"0cfb":function(o,i,e){var t=e("83ab"),n=e("d039"),r=e("cc12");o.exports=!t&&!n(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!=7})},"159b":function(o,i,e){var t=e("da84"),n=e("fdbc"),r=e("17c2"),s=e("9112");for(var a in n){var u=t[a],c=u&&u.prototype;if(c&&c.forEach!==r)try{s(c,"forEach",r)}catch{c.forEach=r}}},"17c2":function(o,i,e){var t=e("b727").forEach,n=e("a640"),r=n("forEach");o.exports=r?[].forEach:function(a){return t(this,a,arguments.length>1?arguments[1]:void 0)}},"1c0b":function(o,i){o.exports=function(e){if(typeof e!="function")throw TypeError(String(e)+" is not a function");return e}},"1d80":function(o,i){o.exports=function(e){if(e==null)throw TypeError("Can't call method on "+e);return e}},"2d00":function(o,i,e){var t=e("da84"),n=e("342f"),r=t.process,s=r&&r.versions,a=s&&s.v8,u,c;a?(u=a.split("."),c=u[0]<4?1:u[0]+u[1]):n&&(u=n.match(/Edge\/(\d+)/),(!u||u[1]>=74)&&(u=n.match(/Chrome\/(\d+)/),u&&(c=u[1]))),o.exports=c&&+c},"342f":function(o,i,e){var t=e("d066");o.exports=t("navigator","userAgent")||""},"428f":function(o,i,e){var t=e("da84");o.exports=t},"44ad":function(o,i,e){var t=e("d039"),n=e("c6b6"),r="".split;o.exports=t(function(){return!Object("z").propertyIsEnumerable(0)})?function(s){return n(s)=="String"?r.call(s,""):Object(s)}:Object},4930:function(o,i,e){var t=e("2d00"),n=e("d039");o.exports=!!Object.getOwnPropertySymbols&&!n(function(){var r=Symbol();return!String(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&t&&t<41})},"50c4":function(o,i,e){var t=e("a691"),n=Math.min;o.exports=function(r){return r>0?n(t(r),9007199254740991):0}},5135:function(o,i,e){var t=e("7b0b"),n={}.hasOwnProperty;o.exports=Object.hasOwn||function(s,a){return n.call(t(s),a)}},5692:function(o,i,e){var t=e("c430"),n=e("c6cd");(o.exports=function(r,s){return n[r]||(n[r]=s!==void 0?s:{})})("versions",[]).push({version:"3.14.0",mode:t?"pure":"global",copyright:"\xA9 2021 Denis Pushkarev (zloirock.ru)"})},"5c6c":function(o,i){o.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}},"65f0":function(o,i,e){var t=e("861d"),n=e("e8b5"),r=e("b622"),s=r("species");o.exports=function(a,u){var c;return n(a)&&(c=a.constructor,typeof c=="function"&&(c===Array||n(c.prototype))?c=void 0:t(c)&&(c=c[s],c===null&&(c=void 0))),new(c===void 0?Array:c)(u===0?0:u)}},"7b0b":function(o,i,e){var t=e("1d80");o.exports=function(n){return Object(t(n))}},"825a":function(o,i,e){var t=e("861d");o.exports=function(n){if(!t(n))throw TypeError(String(n)+" is not an object");return n}},"83ab":function(o,i,e){var t=e("d039");o.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},"861d":function(o,i){o.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}},8875:function(o,i,e){var t,n,r;(function(s,a){n=[],t=a,r=typeof t=="function"?t.apply(i,n):t,r!==void 0&&(o.exports=r)})(typeof self<"u"?self:this,function(){function s(){var a=Object.getOwnPropertyDescriptor(document,"currentScript");if(!a&&"currentScript"in document&&document.currentScript||a&&a.get!==s&&document.currentScript)return document.currentScript;try{throw new Error}catch(D){var u=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,c=/@([^@]*):(\d+):(\d+)\s*$/ig,g=u.exec(D.stack)||c.exec(D.stack),S=g&&g[1]||!1,v=g&&g[2]||!1,d=document.location.href.replace(document.location.hash,""),l,h,x,p=document.getElementsByTagName("script");S===d&&(l=document.documentElement.outerHTML,h=new RegExp("(?:[^\\n]+?\\n){0,"+(v-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),x=l.replace(h,"$1").trim());for(var y=0;y<p.length;y++)if(p[y].readyState==="interactive"||p[y].src===S||S===d&&p[y].innerHTML&&p[y].innerHTML.trim()===x)return p[y];return null}}return s})},"90e3":function(o,i){var e=0,t=Math.random();o.exports=function(n){return"Symbol("+String(n===void 0?"":n)+")_"+(++e+t).toString(36)}},9112:function(o,i,e){var t=e("83ab"),n=e("9bf2"),r=e("5c6c");o.exports=t?function(s,a,u){return n.f(s,a,r(1,u))}:function(s,a,u){return s[a]=u,s}},"9bf2":function(o,i,e){var t=e("83ab"),n=e("0cfb"),r=e("825a"),s=e("c04e"),a=Object.defineProperty;i.f=t?a:function(c,g,S){if(r(c),g=s(g,!0),r(S),n)try{return a(c,g,S)}catch{}if("get"in S||"set"in S)throw TypeError("Accessors not supported");return"value"in S&&(c[g]=S.value),c}},a640:function(o,i,e){var t=e("d039");o.exports=function(n,r){var s=[][n];return!!s&&t(function(){s.call(null,r||function(){throw 1},1)})}},a691:function(o,i){var e=Math.ceil,t=Math.floor;o.exports=function(n){return isNaN(n=+n)?0:(n>0?t:e)(n)}},b622:function(o,i,e){var t=e("da84"),n=e("5692"),r=e("5135"),s=e("90e3"),a=e("4930"),u=e("fdbf"),c=n("wks"),g=t.Symbol,S=u?g:g&&g.withoutSetter||s;o.exports=function(v){return(!r(c,v)||!(a||typeof c[v]=="string"))&&(a&&r(g,v)?c[v]=g[v]:c[v]=S("Symbol."+v)),c[v]}},b727:function(o,i,e){var t=e("0366"),n=e("44ad"),r=e("7b0b"),s=e("50c4"),a=e("65f0"),u=[].push,c=function(g){var S=g==1,v=g==2,d=g==3,l=g==4,h=g==6,x=g==7,p=g==5||h;return function(y,D,Z,Y){for(var G=r(y),L=n(G),F=t(D,Z,3),T=s(L.length),$=0,K=Y||a,z=S?K(y,T):v||x?K(y,0):void 0,A,q;T>$;$++)if((p||$ in L)&&(A=L[$],q=F(A,$,G),g))if(S)z[$]=q;else if(q)switch(g){case 3:return!0;case 5:return A;case 6:return $;case 2:u.call(z,A)}else switch(g){case 4:return!1;case 7:u.call(z,A)}return h?-1:d||l?l:z}};o.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},c04e:function(o,i,e){var t=e("861d");o.exports=function(n,r){if(!t(n))return n;var s,a;if(r&&typeof(s=n.toString)=="function"&&!t(a=s.call(n))||typeof(s=n.valueOf)=="function"&&!t(a=s.call(n))||!r&&typeof(s=n.toString)=="function"&&!t(a=s.call(n)))return a;throw TypeError("Can't convert object to primitive value")}},c430:function(o,i){o.exports=!1},c6b6:function(o,i){var e={}.toString;o.exports=function(t){return e.call(t).slice(8,-1)}},c6cd:function(o,i,e){var t=e("da84"),n=e("ce4e"),r="__core-js_shared__",s=t[r]||n(r,{});o.exports=s},c8ba:function(o,i){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch{typeof window=="object"&&(e=window)}o.exports=e},cc12:function(o,i,e){var t=e("da84"),n=e("861d"),r=t.document,s=n(r)&&n(r.createElement);o.exports=function(a){return s?r.createElement(a):{}}},ce4e:function(o,i,e){var t=e("da84"),n=e("9112");o.exports=function(r,s){try{n(t,r,s)}catch{t[r]=s}return s}},d039:function(o,i){o.exports=function(e){try{return!!e()}catch{return!0}}},d066:function(o,i,e){var t=e("428f"),n=e("da84"),r=function(s){return typeof s=="function"?s:void 0};o.exports=function(s,a){return arguments.length<2?r(t[s])||r(n[s]):t[s]&&t[s][a]||n[s]&&n[s][a]}},da84:function(o,i,e){(function(t){var n=function(r){return r&&r.Math==Math&&r};o.exports=n(typeof globalThis=="object"&&globalThis)||n(typeof window=="object"&&window)||n(typeof self=="object"&&self)||n(typeof t=="object"&&t)||function(){return this}()||Function("return this")()}).call(this,e("c8ba"))},e8b5:function(o,i,e){var t=e("c6b6");o.exports=Array.isArray||function(r){return t(r)=="Array"}},fb15:function(o,i,e){if(e.r(i),typeof window<"u"){var t=window.document.currentScript;{var n=e("8875");t=n(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:n})}var r=t&&t.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);r&&(e.p=r[1])}function s(v,d){if(!(v instanceof d))throw new TypeError("Cannot call a class as a function")}function a(v,d){for(var l=0;l<d.length;l++){var h=d[l];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(v,h.key,h)}}function u(v,d,l){return d&&a(v.prototype,d),l&&a(v,l),v}function c(v,d,l){return d in v?Object.defineProperty(v,d,{value:l,enumerable:!0,configurable:!0,writable:!0}):v[d]=l,v}e("159b");var g=function(){function v(d){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{time:5,message:"heartbeat"};s(this,v),c(this,"socketIns",void 0),c(this,"socketUrl",""),c(this,"queue",[]),c(this,"pingConfig",void 0),c(this,"protocols",void 0),c(this,"reconnectTimes",void 0),c(this,"curReconnectTimes",0),c(this,"handleMessage",void 0),c(this,"pingInterval",null),this.socketUrl=d,this.protocols=l,this.pingConfig=x,this.reconnectTimes=h}return u(v,[{key:"getSocketIns",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",h=arguments.length>1?arguments[1]:void 0;if(typeof WebSocket>"u")throw new Error("not support websocket");return this.socketIns||(l&&(this.socketUrl=l),h&&(this.handleMessage=h),this.setSocketIns()),this.socketIns}},{key:"setSocketIns",value:function(){var l=this;this.protocols?this.socketIns=new WebSocket(this.socketUrl,this.protocols):this.socketIns=new WebSocket(this.socketUrl),this.socketIns.onerror=function(h){l.reconnect(),l.handleMessage&&l.handleMessage({type:"error",data:h})},this.socketIns.onclose=function(){l.clearPing(),l.handleMessage&&l.handleMessage({type:"close"})},this.socketIns.onopen=function(){l.curReconnectTimes=0,l.ping(),l.consumeQueue()},this.handleMessage&&(this.socketIns.onmessage=this.handleMessage)}},{key:"getState",value:function(){var l;return(l=this.socketIns)===null||l===void 0?void 0:l.readyState}},{key:"getMessage",value:function(l){this.handleMessage=l,this.socketIns.onmessage=l}},{key:"setQueue",value:function(l){this.queue.push(l)}},{key:"consumeQueue",value:function(){var l=this;this.queue&&this.queue.length>0&&(this.queue.forEach(function(h){l.send(h)}),this.queue=[])}},{key:"sendMessage",value:function(l){var h=this.getState();h===1?this.send(l):(this.setQueue(l),(h===2||h===3)&&this.reconnect())}},{key:"send",value:function(l){this.socketIns.send(l)}},{key:"close",value:function(){this.getState()===1&&this.socketIns.close()}},{key:"destroy",value:function(){this.socketIns=null}},{key:"reconnect",value:function(){this.getState()!==0&&(this.curReconnectTimes+=1,this.curReconnectTimes<=this.reconnectTimes&&this.setSocketIns())}},{key:"ping",value:function(){var l=this;this.pingConfig.time>0&&!this.pingInterval&&(this.pingInterval=setInterval(function(){l.handleMessage({type:"ping",data:l.pingConfig.message}),l.sendMessage(l.pingConfig.message)},this.pingConfig.time*1e3))}},{key:"clearPing",value:function(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}},{key:"setPingConfig",value:function(l,h){this.pingInterval&&(clearInterval(this.pingInterval),this.pingConfig.time=l,this.pingConfig.message=h,this.ping())}}]),v}(),S=g;i.default=S},fdbc:function(o,i){o.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(o,i,e){var t=e("4930");o.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}})})})(ce);const qe=ve(ce.exports),et={class:"tw-h-full"},tt={class:"data_area"},nt={class:"operate_area"},ot={class:"content_area"},rt={name:"SocketEditor"},st=N({...rt,setup(_){const b=J("contentIdentity"),o=J("contentName");Te(m,b,["url"],o);function i(x){const{type:p,data:y}=x;switch(p){case O.Ping:S(O.Ping,y);break;case O.Close:S(O.Close,C("socket.closed")),m.isConnect=!1,m.isConnecting=!1;break;default:S(O.Down,y);break}}let e,t;function n(){const{heart:x}=m.item[b.value].content;let p=!1,y=0,D="";x&&(p=x.isPing,y=x.time,D=x.value),e=new qe("","",10,{time:p?y:0,message:D})}function r(){const{url:x}=m.item[b.value].content;if(re(x)){m.isConnecting=!0,S(O.Connect,C("socket.connecting")),e?(m.isConnect=!1,e.close()):n();try{e.getSocketIns(x,i),t=setInterval(()=>{e.getState()===1&&(clearInterval(t),m.isConnect=!0,m.isConnecting=!1,S(O.Connected,C("socket.connected")))},200)}catch(p){S(O.Disconnect,p)}}else B(V.Warning,C("socket.notice.requestUrlEmpty"))}function s(){m.isConnecting=!1,m.isConnect&&(m.isConnect=!1,e.close(),e=null)}function a(){s(),S(O.Disconnect,C("socket.disconnect"))}const u=me("");function c(){m.isConnect?re(u.value)?e?(e.sendMessage(u.value),S(O.Up,u.value),u.value=""):B(V.Warning,C("socket.notice.notConnect")):B(V.Warning,C("socket.notice.emptyMessage")):B(V.Warning,C("socket.notice.notConnect"))}const{addSpan:g}=ye();function S(x,p){const{content:y}=m.item[b.value].content;y.unshift({type:x,time:g(0,"","",ge("time")),value:he(p)?JSON.stringify(p):p})}function v(){m.item[b.value].content.content=[]}function d(){if(s(),m.item[b.value]){const{content:x}=m.item[b.value];x.url="",x.content=[];const{heart:p}=x;p&&(p.isPing=!1,p.time=5,p.value="")}t&&clearInterval(t),u.value=""}function l(){d()}function h(x){const{isPing:p,value:y,time:D}=x;m.item[b.value].content.heart={isPing:p,value:y,time:D},B(V.Success,C("notice.saveOk")),m.isConnect&&(p?e.ping():e.clearPing())}return(x,p)=>(E(),P("div",et,[k("div",tt,[k("div",{class:ne(["content_area",`${f(w).theme.current}MainBg`])},[I(Re,{url:f(m).item[f(b)].content.url,"onUpdate:url":p[0]||(p[0]=y=>f(m).item[f(b)].content.url=y),onCancel:a,onConnect:r,onReset:l,onClear:v},null,8,["url"]),I(Ve,{"result-data":f(m).item[f(b)].content.content},null,8,["result-data"])],2)]),k("div",nt,[k("div",ot,[I(Ye,{message:u.value,"onUpdate:message":p[1]||(p[1]=y=>u.value=y),onSend:c,onHeartbeat:h},null,8,["message"])])])]))}});const at=H(st,[["__scopeId","data-v-1c910280"]]),X=".socket",it={[Q.Config]:"socket_config",[Q.Folder]:"socket_folder",[Q.Content]:"socket_content",[Q.Env]:"socket_env"};function ct(){return{content:{url:"",content:[],heart:{isPing:!1,time:5,value:""}},isSaved:0}}const lt={class:"warp_bigger socket_area"},ut={key:0,class:"show_area"},ft={class:"tw-flex tw-justify-end tw-items-center"},dt={key:0},pt={class:"tw-ml-4"},vt={name:"ModuleSocket"},mt=N({...vt,setup(_){const b=J("storeIDB"),{curContentIdentity:o,curContentName:i,curContentFolderIdentity:e,curFolders:t,curHistoryFolders:n,curIsSaved:r,addFolder:s,renameFolder:a,deleteFolder:u,sortFolder:c,createContent:g,saveContent:S,showContent:v,renameContent:d,copyContent:l,deleteContent:h,autoSaveContent:x,importContent:p,getContent:y,saveFolder:D,saveContentItem:Z}=Fe(b,it,m,ct());M("contentIsSaved",r),M("contentFolderIdentity",e),M("contentIdentity",o),M("contentName",i),M("historyFolders",n),M("folders",t),M("addFolder",s),M("renameFolder",a),M("deleteFolder",u),M("showContent",v),M("copyContent",l),M("renameContent",d),M("deleteContent",h),M("sortFolder",c),M("saveContent",S),M("autoSaveContent",x),M("getContent",y),M("saveFolder",D),M("saveContentItem",Z);function Y(){g()}function G(L){w.loading=!0;const{name:F,content:T,isSave:$,folderIdentity:K}=L;p(F,T,$,K,X).then(()=>{w.loading=!1}).catch(()=>{w.loading=!1})}return(L,F)=>(E(),P("div",lt,[I(Ee,{collapse:f(w).historyDrawer.collapse,"onUpdate:collapse":F[2]||(F[2]=T=>f(w).historyDrawer.collapse=T),history:f(w).historyDrawer,suffix:f(X)},{default:R(()=>[f(o)?(E(),P("div",ut,[I(le,{title:f(C)(`module.${f(w).module}`),contentName:f(i),"onUpdate:contentName":F[1]||(F[1]=T=>Se(i)?i.value=T:null),"is-has-name":!0},{titleRight:R(()=>[k("div",ft,[f(o)?(E(),P("span",dt,[I(_e,{"store-item-data":f(m).item[f(o)]},null,8,["store-item-data"])])):ee("",!0),k("span",pt,[I(Me,{"support-types":["text/plain"],accept:[f(X)],"store-item-data":f(m).item[f(o)],suffix:f(X),onSelect:Y,onContent:G},null,8,["accept","store-item-data","suffix"])]),I(Oe,be({class:"tw-ml-2"},L.$attrs),null,16),f(w).historyDrawer.collapse?(E(),te(we,{key:1,class:"tw-ml-2",visible:f(w).historyDrawer.visible,"onUpdate:visible":F[0]||(F[0]=T=>f(w).historyDrawer.visible=T)},null,8,["visible"])):ee("",!0)])]),default:R(()=>[(E(),te(at,{key:f(o)}))]),_:1},8,["title","contentName"])])):ee("",!0)]),_:1},8,["collapse","history","suffix"])]))}});const gt=H(mt,[["__scopeId","data-v-36d75e80"]]),qt=N({__name:"Socket",setup(_){return(b,o)=>(E(),te(gt))}});export{qt as default};
