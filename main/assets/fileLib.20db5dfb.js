import{ah as p,ai as w,aj as F}from"./index.ede6ea95.js";const $=["image/jpeg","image/png","image/jpg"];function v(t){return new Promise((i,a)=>{if(typeof FileReader<"u"){const n=new FileReader;n.onload=function(e){y(e.target.result).then(o=>{const{canvas:d,height:s,width:l}=o;i({src:R(d),height:s,width:l})})},n.readAsDataURL(t),n.onerror=e=>{console.log("error-readImageAsDataUrl",e),a("no support FileReader")}}else a("no support FileReader")})}function y(t){return new Promise((i,a)=>{const n=document.createElement("canvas");if(t){const e=new Image;e.src=t,e.onload=()=>{n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(e,0,0,e.width,e.height),i({canvas:n,height:e.height,width:e.width})},e.onerror=o=>{a(o)}}else n.width=0,n.height=0,i({canvas:n,height:0,width:0})})}function R(t){return t.toDataURL("image/png")}function f(t,i){return new Promise((a,n)=>{try{const e=document.createElement("a");if(e.setAttribute("href","data:text/plain;charset=UTF-8,"+encodeURIComponent(t)),e.setAttribute("download",i),e.style.display="none",document.createEvent){const o=document.createEvent("MouseEvents");o.initEvent("click",!0,!0),e.dispatchEvent(o)}else e.click();a("")}catch(e){n(e)}})}function b(t,i,a=""){return f(t,`${i}${a}`)}function A(t,i,a=""){const n=`<!DOCTYPE html><head><meta charset="UTF-8"><title>${i}</title></head><body>${t}</body></html>`;return f(n,`${i}${a}`)}function x(t,i){window.open(`#/preview/${t}/${i}`)}function D(t){return new Promise((i,a)=>{if(typeof FileReader<"u"){const n=new FileReader;n.readAsText(t,"utf-8"),n.onload=function(e){i(n.result)},n.onerror=e=>{a(e)}}else a("no support FileReader")})}function E(t){return D(t)}function C(t){let i="";const a=w(t,".");return a.length>1&&(i=`.${F(a[a.length-1])}`),i}function I(t,i,a=!1){return new Promise((n,e)=>{var o;if(!((o=t==null?void 0:t.clipboardData)!=null&&o.items))e("");else{const d=t.clipboardData.items.length;for(let s=0;s<d;s++){const l=t.clipboardData.items[s],{kind:m,type:u}=l;if(m==="file"){let h=!1;if(p(i,c=>{if(!u||u.indexOf(c)>-1)return h=!0,!1}),h){const c=l.getAsFile();t.preventDefault(),a?v(c).then(r=>{const{src:g}=r;n(g)}).catch(r=>{e(r),console.log("importFile-err",r)}):E(c).then(r=>{n(r)}).catch(r=>{e(r),console.log("importFile-err",r)})}}}}})}export{x as a,A as b,$ as c,f as d,y as e,C as g,E as i,I as p,v as r,b as s};
