import{_ as Y}from"./DMarkdown.vue_vue_type_script_setup_true_lang.6d16de55.js";import{d as f}from"./routeLib.4927cad7.js";import{y as Z,d as T,a8 as x,o as c,c as C,k as r,ag as t,ab as e,G as p,s,aw as tt,F as g,I,ah as et,ai as nt,H as F}from"./index.286357e0.js";import{u as ot}from"./ModuleAutoSaveLib.f0f70820.js";import{_ as b}from"./_plugin-vue_export-helper.cdc0426e.js";import{U as st}from"./UIWithTitle.8dc65e39.js";import{u as at,b as rt,c as it,a as lt,d as mt,e as ct,U as dt}from"./UICreateImport.vue_vue_type_script_setup_true_lang.2128243a.js";import{g as _}from"./lib.5173e56c.js";import{_ as pt}from"./DButton.vue_vue_type_script_setup_true_lang.793ae897.js";import{_ as _t,a as ut}from"./Interface.d7af1223.js";import{d as k}from"./copyLib.d7a7b067.js";import{E as h}from"./config.f197c6bf.js";import"./dayjs.min.6c47bd3a.js";import"./memoize.64cb1933.js";import"./isEmpty.bacb74f3.js";import"./identity.bfdea954.js";import"./imageLib.03284e0d.js";import"./dateLib.63528a18.js";import"./advancedFormat.16ff0fee.js";import"./forEach.78ceb588.js";import"./DInput.vue_vue_type_script_setup_true_lang.5ea82556.js";import"./_baseIsEqual.ecb1efce.js";import"./DSpin.f68cef5b.js";import"./hasIn.0707db01.js";import"./findIndex.8a999be9.js";import"./styleChecker.9da7f8d9.js";import"./index.55a51bb0.js";import"./pick.e9f1a41d.js";import"./randomLib.04c6c9cc.js";import"./stringify.15412eb9.js";const yt="ed",v=".md",ft={[f.Config]:"typing_config",[f.Folder]:"typing_folder",[f.Content]:"typing_content",[f.Env]:"typing_env"};function gt(){return{content:{content:"",html:""},isSaved:0}}const m=Z({folders:[],item:{}}),ht={class:"typing-content"},vt={name:"TypingEditor"},Ct=T({...vt,setup($){const i=x("contentIdentity"),n=x("contentName");ot(m,i,["content"],n);function d(u){m.item[i.value].content.html=u}return(u,y)=>(c(),C("div",ht,[r(Y,{"show-code-row-number":!0,"text-identity":`${t(yt)}-${t(i)}`,content:t(m).item[t(i)].content.content,"onUpdate:content":y[0]||(y[0]=w=>t(m).item[t(i)].content.content=w),style:{height:"100%"},onOnHtmlChanged:d},null,8,["text-identity","content"])]))}});const wt=b(Ct,[["__scopeId","data-v-ed359743"]]),It={class:"warp_bigger format_area"},xt={key:0,class:"show_area"},Ft={class:"tw-flex tw-justify-end tw-items-center"},Tt={key:0},$t={class:"tw-ml-2"},Dt={class:"tw-ml-2"},kt={class:"tw-mr-1"},bt={name:"ModuleTyping"},St=T({...bt,setup($){const i=x("storeIDB"),{curContentIdentity:n,curContentName:d,curContentFolderIdentity:u,curFolders:y,curHistoryFolders:w,curIsSaved:S,addFolder:E,renameFolder:N,deleteFolder:U,sortFolder:B,createContent:M,saveContent:H,showContent:V,renameContent:O,copyContent:P,deleteContent:j,autoSaveContent:R,importContent:z,getContent:A,saveFolder:G,saveContentItem:L}=at(i,ft,m,gt());e("contentIsSaved",S),e("contentFolderIdentity",u),e("contentIdentity",n),e("contentName",d),e("historyFolders",w),e("folders",y),e("addFolder",E),e("renameFolder",N),e("deleteFolder",U),e("showContent",V),e("copyContent",P),e("renameContent",O),e("deleteContent",j),e("sortFolder",B),e("saveContent",H),e("autoSaveContent",R),e("getContent",A),e("saveFolder",G),e("saveContentItem",L);function W(){M()}function q(l){s.loading=!0;const{name:o,content:a,isSave:Q,folderIdentity:X}=l;z(o,{content:a},Q,X,v).then(()=>{s.loading=!1}).catch(()=>{s.loading=!1})}let D;(l=>{l.Markdown="markdown",l.Html="html"})(D||(D={}));const J=[{value:"markdown",label:_("typing.markdownValue")},{value:"html",label:_("typing.htmlValue")}];function K(l){const{html:o,content:a}=m.item[n.value].content;l==="markdown"?k(a||""):k(o||"")}return(l,o)=>(c(),C("div",It,[r(dt,{collapse:t(s).historyDrawer.collapse,"onUpdate:collapse":o[2]||(o[2]=a=>t(s).historyDrawer.collapse=a),history:t(s).historyDrawer,suffix:t(v)},{default:p(()=>[t(n)?(c(),C("div",xt,[r(st,{title:t(_)(`module.${t(s).module}`),contentName:t(d),"onUpdate:contentName":o[1]||(o[1]=a=>tt(d)?d.value=a:null),"is-has-name":!0},{titleRight:p(()=>[g("div",Ft,[t(n)?(c(),C("span",Tt,[r(rt,{"store-item-data":t(m).item[t(n)]},null,8,["store-item-data"])])):I("",!0),g("span",$t,[r(it,{"support-types":["text/markdown"],accept:[t(v)],"un-support-msg":t(_)("port.mdOnly"),"store-item-data":t(m).item[t(n)],suffix:t(v),type:t(h).MD,types:[t(h).MD,t(h).PDF,t(h).HTML],onSelect:W,onContent:q},null,8,["accept","un-support-msg","store-item-data","suffix","type","types"])]),g("span",Dt,[r(lt,{data:J,onSelected:K},{anchor:p(()=>[r(pt,{type:"primary"},{default:p(()=>[g("span",kt,et(t(_)("tags.copy")),1),r(_t,{type:t(ut).DownOutlined,size:"xs"},null,8,["type"])]),_:1})]),_:1})]),r(mt,nt({class:"tw-ml-2"},l.$attrs),null,16),t(s).historyDrawer.collapse?(c(),F(ct,{key:1,class:"tw-ml-2",visible:t(s).historyDrawer.visible,"onUpdate:visible":o[0]||(o[0]=a=>t(s).historyDrawer.visible=a)},null,8,["visible"])):I("",!0)])]),default:p(()=>[(c(),F(wt,{key:t(n)}))]),_:1},8,["title","contentName"])])):I("",!0)]),_:1},8,["collapse","history","suffix"])]))}});const Et=b(St,[["__scopeId","data-v-903c76fb"]]),le=T({__name:"Typing",setup($){return(i,n)=>(c(),F(Et))}});export{le as default};
